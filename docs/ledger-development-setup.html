<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ledger-development-setup - Rotko Networks infrastructure</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Rotko Networks infrastructure</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="ledger-penumbra-development-setup-guide"><a class="header" href="#ledger-penumbra-development-setup-guide">Ledger Penumbra Development Setup Guide</a></h1>
<p>This guide covers setting up the Penumbra app for Ledger hardware wallets on Linux and macOS. Tested successfully only on NixOS so message me out if you spot any faults in it. It's also good to note out that you should probably be quite advanced computer user to participate in testing the hardware wallet this early.</p>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<h3 id="system-dependencies"><a class="header" href="#system-dependencies">System Dependencies</a></h3>
<p><strong>Linux (Ubuntu/Debian):</strong></p>
<pre><code class="language-bash">sudo apt update &amp;&amp; sudo apt-get -y install build-essential git wget cmake \
libssl-dev libgmp-dev autoconf libtool python3 python3-venv
</code></pre>
<p><strong>macOS:</strong></p>
<pre><code class="language-bash">brew install cmake autoconf automake libtool python3
</code></pre>
<h3 id="docker"><a class="header" href="#docker">Docker</a></h3>
<ul>
<li><strong>Linux</strong>: Follow <a href="https://docs.docker.com/install/">Docker CE installation</a></li>
<li><strong>macOS</strong>: Install <a href="https://www.docker.com/products/docker-desktop">Docker Desktop</a></li>
</ul>
<h3 id="additional-tools"><a class="header" href="#additional-tools">Additional Tools</a></h3>
<ul>
<li>Node.js &gt; v14.0 (via <code>nvm</code> or <code>n</code>)</li>
<li>Rust toolchain (for running tests)</li>
</ul>
<h2 id="setup-instructions"><a class="header" href="#setup-instructions">Setup Instructions</a></h2>
<h3 id="1-clone-and-initialize-repository"><a class="header" href="#1-clone-and-initialize-repository">1. Clone and Initialize Repository</a></h3>
<pre><code class="language-bash"># Clone the repository
git clone https://github.com/Zondax/ledger-penumbra.git
cd ledger-penumbra

# Initialize submodules (CRITICAL STEP)
git submodule update --init --recursive
</code></pre>
<h3 id="2-build-the-application"><a class="header" href="#2-build-the-application">2. Build the Application</a></h3>
<p>Build for your specific device:</p>
<pre><code class="language-bash"># For Nano S+
make buildS2

# For Nano X
make buildX

# For Flex
make buildFL

# For Stax
make buildST
</code></pre>
<h2 id="installation-methods"><a class="header" href="#installation-methods">Installation Methods</a></h2>
<h3 id="method-a-using-development-release-easiest"><a class="header" href="#method-a-using-development-release-easiest">Method A: Using Development Release (Easiest)</a></h3>
<ol>
<li>Download the installer from <a href="https://github.com/zondax/ledger-penumbra/releases">releases page</a></li>
<li>For Nano S+, download <code>installer_s2.sh</code></li>
<li>Make executable and run:</li>
</ol>
<pre><code class="language-bash">chmod +x ./installer_s2.sh
./installer_s2.sh load
</code></pre>
<h3 id="method-b-loading-from-source-build-recommended"><a class="header" href="#method-b-loading-from-source-build-recommended">Method B: Loading from Source Build (recommended)</a></h3>
<h4 id="setup-python-environment"><a class="header" href="#setup-python-environment">Setup Python Environment</a></h4>
<p>Since many systems have read-only Python installations (like NixOS), use a virtual environment:</p>
<pre><code class="language-bash">python3 -m venv venv
source venv/bin/activate
pip install ledgerblue
</code></pre>
<h4 id="usb-permissions-linux-only"><a class="header" href="#usb-permissions-linux-only">USB Permissions (Linux only)</a></h4>
<pre><code class="language-bash"># Download and install Ledger udev rules
wget -q -O - https://raw.githubusercontent.com/LedgerHQ/udev-rules/master/add_udev_rules.sh | sudo bash

# Replug your device after installing rules
</code></pre>
<h4 id="load-to-device"><a class="header" href="#load-to-device">Load to Device</a></h4>
<pre><code class="language-bash"># Ensure device is connected and unlocked
make loadS2  # or loadX, loadFL, loadST for other devices
</code></pre>
<h3 id="method-c-using-emulator-no-device-needed"><a class="header" href="#method-c-using-emulator-no-device-needed">Method C: Using Emulator (No Device Needed)</a></h3>
<pre><code class="language-bash"># Install Zemu emulator
make zemu_install

# Run tests in emulator
make zemu_test
</code></pre>
<h2 id="preparing-development-device"><a class="header" href="#preparing-development-device">Preparing Development Device</a></h2>
<p><strong>⚠️ WARNING: Use a dedicated development device without real funds!</strong></p>
<h3 id="1-enter-recovery-mode"><a class="header" href="#1-enter-recovery-mode">1. Enter Recovery Mode</a></h3>
<ul>
<li>Hold right button while plugging in device</li>
<li>Device shows "Recovery"</li>
</ul>
<h3 id="2-initialize-with-test-mnemonic"><a class="header" href="#2-initialize-with-test-mnemonic">2. Initialize with Test Mnemonic</a></h3>
<pre><code class="language-bash">make dev_init
</code></pre>
<p>This sets:</p>
<ul>
<li>PIN: <code>5555</code></li>
<li>Mnemonic: <code>equip will roof matter pink blind book anxiety banner elbow sun young</code></li>
</ul>
<h3 id="3-add-development-certificate"><a class="header" href="#3-add-development-certificate">3. Add Development Certificate</a></h3>
<pre><code class="language-bash"># Still in recovery mode
make dev_ca
</code></pre>
<h2 id="running-tests"><a class="header" href="#running-tests">Running Tests</a></h2>
<h3 id="unit-tests-rust"><a class="header" href="#unit-tests-rust">Unit Tests (Rust)</a></h3>
<pre><code class="language-bash">make rust_test
</code></pre>
<h3 id="integration-tests-zemu"><a class="header" href="#integration-tests-zemu">Integration Tests (Zemu)</a></h3>
<pre><code class="language-bash">make zemu_test
</code></pre>
<h3 id="all-tests"><a class="header" href="#all-tests">All Tests</a></h3>
<pre><code class="language-bash">make test_all
</code></pre>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="no-dongle-found-error"><a class="header" href="#no-dongle-found-error">"No dongle found" Error</a></h3>
<ol>
<li>Check device is connected and unlocked</li>
<li>Verify USB detection: <code>lsusb | grep Ledger</code></li>
<li>On Linux, ensure udev rules are installed</li>
<li>Try without sudo first, then with sudo if needed</li>
</ol>
<h3 id="bolos_sdk-is-not-set-error"><a class="header" href="#bolos_sdk-is-not-set-error">"BOLOS_SDK is not set" Error</a></h3>
<p>Never run make commands from the <code>app/</code> subdirectory. Always run from project root.</p>
<h3 id="submodule-errors"><a class="header" href="#submodule-errors">Submodule Errors</a></h3>
<p>If you see errors about missing files in <code>deps/</code>:</p>
<pre><code class="language-bash">git submodule update --init --recursive
</code></pre>
<h3 id="python-installation-issues"><a class="header" href="#python-installation-issues">Python Installation Issues</a></h3>
<p>If system Python is read-only (NixOS, etc.):</p>
<pre><code class="language-bash">python3 -m venv venv
source venv/bin/activate
pip install ledgerblue
</code></pre>
<h2 id="development-workflow"><a class="header" href="#development-workflow">Development Workflow</a></h2>
<ol>
<li>Make code changes</li>
<li>Rebuild: <code>make buildS2</code></li>
<li>Reload: <code>make loadS2</code></li>
<li>Test: <code>make zemu_test</code></li>
</ol>
<h2 id="platform-specific-notes"><a class="header" href="#platform-specific-notes">Platform-Specific Notes</a></h2>
<h3 id="macos"><a class="header" href="#macos">macOS</a></h3>
<ul>
<li>Ensure Docker Desktop is running</li>
<li>No udev rules needed</li>
<li>Device should work out of the box</li>
</ul>
<h3 id="linux"><a class="header" href="#linux">Linux</a></h3>
<ul>
<li>Install udev rules for device recognition</li>
<li>May need to run with sudo for USB access</li>
<li>Some distros require user to be in <code>plugdev</code> group</li>
</ul>
<h2 id="important-notes"><a class="header" href="#important-notes">Important Notes</a></h2>
<ul>
<li>The releases on GitHub are <strong>unvetted development builds</strong></li>
<li>Only use devices without real funds for development</li>
<li>Production-ready versions will be available through Ledger Live after security audit</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="penumbra.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="penumbra.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
