<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Rotko Networks infrastructure</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="hardware.html"><strong aria-hidden="true">2.</strong> Hardware</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="rack.html"><strong aria-hidden="true">2.1.</strong> Rack</a></li><li class="chapter-item expanded "><a href="bkk01.html"><strong aria-hidden="true">2.2.</strong> BKK01</a></li><li class="chapter-item expanded "><a href="bkk02.html"><strong aria-hidden="true">2.3.</strong> BKK02</a></li><li class="chapter-item expanded "><a href="bkk03.html"><strong aria-hidden="true">2.4.</strong> BKK03</a></li><li class="chapter-item expanded "><a href="bkk04.html"><strong aria-hidden="true">2.5.</strong> BKK04</a></li><li class="chapter-item expanded "><a href="carbon.html"><strong aria-hidden="true">2.6.</strong> Carbon offset</a></li></ol></li><li class="chapter-item expanded "><a href="software.html"><strong aria-hidden="true">3.</strong> Software</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="firmware.html"><strong aria-hidden="true">3.1.</strong> Firmware</a></li><li class="chapter-item expanded "><a href="networking.html"><strong aria-hidden="true">3.2.</strong> Networking</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="networking_proxmox.html"><strong aria-hidden="true">3.2.1.</strong> Proxmox</a></li><li class="chapter-item expanded "><a href="networking_routeros.html"><strong aria-hidden="true">3.2.2.</strong> RouterOS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="networking_routeros_fast.html"><strong aria-hidden="true">3.2.2.1.</strong> FastTracking</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="filesystem.html"><strong aria-hidden="true">3.3.</strong> Filesystem</a></li><li class="chapter-item expanded "><a href="ansible.html"><strong aria-hidden="true">3.4.</strong> Ansible</a></li><li class="chapter-item expanded "><a href="virtualization.html"><strong aria-hidden="true">3.5.</strong> Virtualization</a></li></ol></li><li class="chapter-item expanded "><a href="team.html"><strong aria-hidden="true">4.</strong> Team</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Rotko Networks infrastructure</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>At Rotko Networks, our commitment to powering the development
and deployment of decentralized applications within the Web3 ecosystem is
unwavering. In achieving this, we are dedicated to providing an infrastructure
that encapsulates robust hardware, optimized to deliver top-tier performance
while ensuring minimal memory latency.</p>
<p>Our approach to building this infrastructure transcends the conventional focus
on computational capabilities. We place a similar, if not greater, emphasis on
storage solutions, integrating high-speed data access systems that boast
minimal latency. Furthermore, we integrate technology that guarantees data
integrity, adding another layer of trust to our operations.</p>
<p>Our server's network robustness is another aspect we can't overemphasize. It's
equipped with cutting-edge features that ensure seamless, swift, and efficient
data transfer. This is a key facet of our system, as it contributes
significantly to a smooth, unbroken service for end users.</p>
<p>Recognizing the heavy-duty nature of blockchain operations, we've carefully
selected components for our server that not only meet the demand for
resource-intensive applications but also have the capacity to exceed these
requirements.</p>
<p>In the following sections, we'll delve into the specifics of the hardware that
forms the backbone of our infrastructure, discussing their features,
capabilities, and the reasons they've been chosen for our server operations.</p>
<p>Join us as we take a detailed look at our server infrastructure, designed and
engineered to promote growth and foster innovation in the Web3 ecosystem.
Prepare for an insightful journey into the hardware specifics that power Rotko
Networks. Stay tuned!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hardware"><a class="header" href="#hardware">Hardware</a></h1>
<p><img src="./images/rack/machines_at_rack.webp" alt="Machines at rack" /></p>
<p>Our primary goal is to deliver a high-performance and secure blockchain
infrastructure that fosters trust and reliability. We aim to achieve this by
focusing on the critical elements of blockchain technology - namely, ensuring
high single-thread performance for validator services, and low latency for RPC
services, among others.</p>
<p>Validator services in blockchain infrastructures demand high single-thread
performance due to the nature of their operations. Validators, in essence,
validate transactions and blocks within the blockchain. They act as the
arbitrators of the system, ensuring the veracity and accuracy of the
information being added to the blockchain. This is an intensive process that
involves complex computations and encryption, thus requiring a
high-performance, single-thread system to maintain efficiency.</p>
<p>The low latency required for our RPC services is another vital factor in our
hardware design. RPC, or Remote Procedure Call, is a protocol that allows a
computer program to execute a procedure in another address space, usually on
another network, without the programmer needing to explicitly code for this
functionality. In simpler terms, it's a way for systems to talk to each other.
Low latency in these operations is crucial to ensure a smooth and seamless
dialogue between various systems within the blockchain. A delay or a lag in
these communications can cause bottlenecks, leading to a slowdown in overall
operations.</p>
<p>The hardware components and their configurations we have selected are
specifically designed to address these needs. By leveraging advanced
technologies like the AMD Ryzen 9 7950X for its superior single-thread
performance, DDR5 memory for fast data retrieval, and NVMe SSDs for their
exceptional speed in data storage and retrieval, we aim to provide an
infrastructure that can effectively handle the demands of blockchain
technology.</p>
<p>Our infrastructure is also designed to ensure scalability and flexibility. As
the demands of the blockchain ecosystem grow, so too should our capacity to
handle these increasing demands. Hence, our hardware design also incorporates
elements that will allow us to easily scale up our operations when necessary.</p>
<p>In essence, our hardware is purpose-built to deliver high-performance
blockchain operations that are secure, reliable, and capable of scaling with
the demands of the evolving blockchain ecosystem.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rack"><a class="header" href="#rack">Rack</a></h1>
<p><img src="./images/rack/rack_front.webp" alt="Rack from front" /></p>
<p>At the heart of our operations is a meticulously designed server
infrastructure, securely housed within ten units of a top-tier 42U rack.
Providing approximately 230 liters of computational capacity, our setup is
powered by a robust dual 2kW, 220V power system that underlines our commitment
to delivering superior performance and steadfast availability.</p>
<p>Our server infrastructure is hosted within a carrier-neutral facility,
strategically enabling seamless and robust connections with a broad range of
service providers, ISPs, and cloud platforms. This network versatility fosters
enhanced performance and unyielding reliability, thus ensuring a consistently
superior user experience.</p>
<p>More than a mere assembly of servers, our setup is a comprehensively designed
ecosystem meticulously architected to achieve maximum efficiency. Leveraging
location flexibility, our infrastructure can be configured across multiple
strategic points to guarantee optimal network connectivity and minimized
latency.</p>
<p>Direct peering arrangements with major local and international internet
exchanges ensure broad bandwidth and unwavering connectivity. Coupled with
floor and inter-floor cross-connect cabling, we have fostered a well-connected
network capable of facilitating smooth data transfer between servers and racks.</p>
<p>Our infrastructure is further enhanced with a suite of cutting-edge networking
devices, including industry-leading routers and switches. Services such as KVM
over IP for remote server management, alongside on-site technical support and
smart hands as a service, amplify our operational efficiency.</p>
<p>To guarantee optimal performance and longevity of our hardware, a tightly
regulated environment is maintained. Our facility features controlled air
temperature and humidity, ensuring the hardware operates within optimal
conditions. Additionally, we have installed a UPS and backup power generators
to mitigate the risk of power interruptions.</p>
<p>Security is paramount. Our facility, with ISO 27001 certification, employs a
rigorous system of access control with logging and video surveillance, ensuring
a safe and secure environment for our infrastructure. Additional safety
measures such as fire alarms and smoke protection systems are in place to
protect our hardware. A dedicated network operations center, operational 24/7,
stands ready to promptly address any technical concerns.</p>
<p>Our setup also incorporates a raised floor design, an element that demonstrates
our meticulous attention to detail. This design improves air distribution and
cable management, leading to thermal efficiency and a well-organized
operational environment. </p>
<h3 id="links"><a class="header" href="#links">Links</a></h3>
<ul>
<li><a href="https://www.rittal.com/com-en/products/PG0900ZUBEHOER1/PG0919ZUBEHOER1">Rittal 42U</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bkk01---validator"><a class="header" href="#bkk01---validator">BKK01 - Validator</a></h1>
<p><img src="./images/bkk01/bkk01.webp" alt="BKK01" /></p>
<h2 id="cpu"><a class="header" href="#cpu">CPU</a></h2>
<p><a href="https://www.amd.com/en/products/cpu/amd-ryzen-5-5600g">AMD RYZEN 5 5600G 6-Core 3.7 GHz (4.6 GHz Max Boost) Socket AM4 65W</a></p>
<p>The heart of our operations, the 6-core AMD RYZEN 5 5600G, offers excellent
performance for blockchain applications. It provides robust and reliable
service even under demanding workloads.</p>
<h2 id="cpu-cooler"><a class="header" href="#cpu-cooler">CPU Cooler</a></h2>
<p><a href="https://aliexpress.com/item/1005004050053958.html">COOLSERVER P32 CPU Cooler</a></p>
<p>For managing the thermal performance of our CPU, we use the COOLSERVER P32 CPU
Cooler. It's equipped with high-quality heatpipes and can handle the Ryzen 5
5600G even under intensive workloads.</p>
<h2 id="ram"><a class="header" href="#ram">RAM</a></h2>
<p><a href="https://www.hynix.com/eng/products/drammodule.jsp">2x32GB Hynix DDR4 3200MHz</a></p>
<p>Our setup uses 2 modules of 32GB DDR4 RAM from Hynix, providing us with ample
bandwidth and ensuring smooth server operations.</p>
<h2 id="motherboard"><a class="header" href="#motherboard">Motherboard</a></h2>
<p><a href="https://www.msi.com/Motherboard/A550M-ITX-AC">MSI A550M-ITX/ac</a></p>
<p>The MSI A550M-ITX/ac motherboard is an engineering marvel that brings together
the performance of the consumer world with the dependability of server-grade
hardware. This motherboard supports the AMD Ryzen series CPUs and DDR4 memory,
promising speed, reliability, and scalability.</p>
<h2 id="storage"><a class="header" href="#storage">Storage</a></h2>
<p><a href="https://www.monsterdigital.com/">4x 2TB NVME Monster Storage 3D TLC SSD - R:7400Mb/s W:6,600MB/s</a></p>
<p>For storage, we use 4 Monster Storage 3D TLC NVMe SSDs, each of 2TB capacity.
These high-speed SSDs are known for their exceptional performance and
efficiency in data storage and retrieval.</p>
<h2 id="power-unit"><a class="header" href="#power-unit">Power unit</a></h2>
<p><a href="https://lazada.co.th/products/i4470266272-s18039576717.html">400W PSU</a></p>
<p>This second-hand case comes with an integrated 400W Power Supply Unit. The PSU
is essential for providing power to your internal components. It converts the
power from the wall outlet into a usable form for your computer's components.
Despite being second-hand, the PSU is in good condition and will provide a
reliable power source for your system.</p>
<h2 id="chassis"><a class="header" href="#chassis">Chassis</a></h2>
<p><a href="lazada.co.th/products/i4470266272-s18039576717.html">Mini-ITX 1U chassis</a></p>
<p>This second-hand case comes with an integrated 400W Power Supply Unit. The PSU
is essential for providing power to your internal components. It converts the
power from the wall outlet into a usable form for your computer's components.
Despite being second-hand, the PSU is in good condition and will provide a
reliable power source for your system.</p>
<h2 id="kvm"><a class="header" href="#kvm">KVM</a></h2>
<p><a href="https://aliexpress.com/item/1005003262886521.html">BliKVM v1 CM4 &quot;KVM over IP&quot; Raspberry Pi CM4 HDMI CSI PiKVM v3</a></p>
<p>A modern, highly secure, and programmable KVM solution running on Arch Linux,
which provides exceptional control over your server, akin to physical access.
With an easy build process, it boasts minimal video latency (about 100 ms) and
a lightweight Web UI accessible from any browser. It emulates mass storage
drives and allows ATX power management, secure data transmission with SSL, and
local Raspberry Pi health monitoring. You can also manage GPIO and USB relays
via its web interface. The PiKVM OS is production-ready, supports a read-only
filesystem to prevent memory card damage, offers extensible authorization
methods, and enables automation with macros.</p>
<h3 id="features-of-pikvm"><a class="header" href="#features-of-pikvm">Features of PiKVM:</a></h3>
<ul>
<li><strong>Fully-featured and modern IP-KVM:</strong> PiKVM is up-to-date with the latest KVM technologies.</li>
<li><strong>Easy to build:</strong> PiKVM offers ready-to-use OS images and a friendly build environment.</li>
<li><strong>Low video latency:</strong> With approximately 100 milliseconds of video latency, it provides
one of the smallest delays of all existing solutions.</li>
<li><strong>Lightweight Web UI and VNC:</strong> The user interface is accessible through any browser,
with no proprietary clients required. VNC is also supported.</li>
<li><strong>Mass Storage Drive Emulation:</strong> On Raspberry Pi 4 and ZeroW, PiKVM can emulate a virtual
CD-ROM or Flash Drive. A live image can be uploaded to boot the attached server.</li>
<li><strong>ATX power management:</strong> PiKVM supports simple circuits for controlling the power
button of the attached server.</li>
<li><strong>Security:</strong> PiKVM is designed with strong security, using SSL to protect traffic.</li>
<li><strong>Local monitoring:</strong> PiKVM monitors the health of the Raspberry Pi board and provides
warnings for potential issues.</li>
<li><strong>GPIO management:</strong> Control GPIO and USB relays via the web interface.</li>
<li><strong>Production-ready:</strong> PiKVM OS is based on Arch Linux ARM and can be customized for any needs.</li>
<li><strong>Read-only filesystem:</strong> The OS runs in read-only mode to prevent damage to the memory
card due to a sudden power outage.</li>
<li><strong>Extensible authorization methods:</strong> PiKVM supports integration into existing
authentication infrastructure.</li>
<li><strong>Macro scripts:</strong> Repetitive actions can be automated with keyboard &amp; mouse action macros.</li>
<li><strong>Open &amp; free:</strong> PiKVM is open-source software, released under the GPLv3.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bkk02---validator-2"><a class="header" href="#bkk02---validator-2">BKK02 - Validator 2</a></h1>
<p><img src="./images/bkk02/bkk02.webp" alt="BKK01" /></p>
<h2 id="cpu-1"><a class="header" href="#cpu-1">CPU</a></h2>
<p><a href="https://www.amd.com/en/products/cpu/amd-ryzen-5-5600g">AMD RYZEN 5 5600G 6-Core 3.7 GHz (4.6 GHz Max Boost) Socket AM4 65W</a></p>
<p>The heart of our operations, the 6-core AMD RYZEN 5 5600G, offers excellent
performance for blockchain applications. It provides robust and reliable
service even under demanding workloads.</p>
<h2 id="cpu-cooler-1"><a class="header" href="#cpu-cooler-1">CPU Cooler</a></h2>
<p><a href="https://aliexpress.com/item/1005004050053958.html">COOLSERVER P32 CPU Cooler</a></p>
<p>For managing the thermal performance of our CPU, we use the COOLSERVER P32 CPU
Cooler. It's equipped with high-quality heatpipes and can handle the Ryzen 5
5600G even under intensive workloads.</p>
<h2 id="ram-1"><a class="header" href="#ram-1">RAM</a></h2>
<p><a href="https://www.amazon.co.jp/-/en/v-color-Skywalker-PC4-25600-Heatsink-TO432G32D816ASPSXKN/dp/B08PPDDPFY">2x32GB Hynix DDR4 3200MHz</a></p>
<p>Our setup uses 2 modules of 32GB DDR4 RAM from Hynix, providing us with ample
bandwidth and ensuring smooth server operations.</p>
<h2 id="motherboard-1"><a class="header" href="#motherboard-1">Motherboard</a></h2>
<p><a href="https://www.msi.com/Motherboard/A520M-ITX-AC">MSI A520M-ITX/ac</a></p>
<p>The MSI A520M-ITX/ac motherboard is an engineering marvel that brings together
the performance of the consumer world with the dependability of server-grade
hardware. This motherboard supports the AMD Ryzen series CPUs and DDR4 memory,
promising speed, reliability, and scalability.</p>
<h2 id="storage-1"><a class="header" href="#storage-1">Storage</a></h2>
<p><a href="https://www.amazon.co.jp/-/en/dp/B0BZCVVKNY">4x 2TB NVME Monster Storage 3D TLC SSD - R:7400Mb/s W:6,600MB/s</a></p>
<p>For storage, we use 4 Monster Storage 3D TLC NVMe SSDs, each of 2TB capacity.
These high-speed SSDs are known for their exceptional performance and
efficiency in data storage and retrieval. Downside is that lacks DRAM for caching.</p>
<h2 id="power-unit-1"><a class="header" href="#power-unit-1">Power unit</a></h2>
<p><a href="https://lazada.co.th/products/i4470266272-s18039576717.html">400W PSU</a></p>
<p>This second-hand case comes with an integrated 400W Power Supply Unit. The PSU
is essential for providing power to your internal components. It converts the
power from the wall outlet into a usable form for your computer's components.
Despite being second-hand, the PSU is in good condition and will provide a
reliable power source for your system.</p>
<h2 id="chassis-1"><a class="header" href="#chassis-1">Chassis</a></h2>
<p><a href="lazada.co.th/products/i4470266272-s18039576717.html">Mini-ITX 1U chassis</a></p>
<p>This second-hand case comes with an integrated 400W Power Supply Unit. The PSU
is essential for providing power to your internal components. It converts the
power from the wall outlet into a usable form for your computer's components.
Despite being second-hand, the PSU is in good condition and will provide a
reliable power source for your system.</p>
<h2 id="kvm-1"><a class="header" href="#kvm-1">KVM</a></h2>
<p><a href="https://aliexpress.com/item/1005003262886521.html">BliKVM v1 CM4 &quot;KVM over IP&quot; Raspberry Pi CM4 HDMI CSI PiKVM v3</a></p>
<p>A modern, highly secure, and programmable KVM solution running on Arch Linux,
which provides exceptional control over your server, akin to physical access.
With an easy build process, it boasts minimal video latency (about 100 ms) and
a lightweight Web UI accessible from any browser. It emulates mass storage
drives and allows ATX power management, secure data transmission with SSL, and
local Raspberry Pi health monitoring. You can also manage GPIO and USB relays
via its web interface. The PiKVM OS is production-ready, supports a read-only
filesystem to prevent memory card damage, offers extensible authorization
methods, and enables automation with macros.</p>
<h3 id="features-of-pikvm-1"><a class="header" href="#features-of-pikvm-1">Features of PiKVM:</a></h3>
<ul>
<li><strong>Fully-featured and modern IP-KVM:</strong> PiKVM is up-to-date with the latest KVM technologies.</li>
<li><strong>Easy to build:</strong> PiKVM offers ready-to-use OS images and a friendly build environment.</li>
<li><strong>Low video latency:</strong> With approximately 100 milliseconds of video latency, it provides
one of the smallest delays of all existing solutions.</li>
<li><strong>Lightweight Web UI and VNC:</strong> The user interface is accessible through any browser,
with no proprietary clients required. VNC is also supported.</li>
<li><strong>Mass Storage Drive Emulation:</strong> On Raspberry Pi 4 and ZeroW, PiKVM can emulate a virtual
CD-ROM or Flash Drive. A live image can be uploaded to boot the attached server.</li>
<li><strong>ATX power management:</strong> PiKVM supports simple circuits for controlling the power
button of the attached server.</li>
<li><strong>Security:</strong> PiKVM is designed with strong security, using SSL to protect traffic.</li>
<li><strong>Local monitoring:</strong> PiKVM monitors the health of the Raspberry Pi board and provides
warnings for potential issues.</li>
<li><strong>GPIO management:</strong> Control GPIO and USB relays via the web interface.</li>
<li><strong>Production-ready:</strong> PiKVM OS is based on Arch Linux ARM and can be customized for any needs.</li>
<li><strong>Read-only filesystem:</strong> The OS runs in read-only mode to prevent damage to the memory
card due to a sudden power outage.</li>
<li><strong>Extensible authorization methods:</strong> PiKVM supports integration into existing
authentication infrastructure.</li>
<li><strong>Macro scripts:</strong> Repetitive actions can be automated with keyboard &amp; mouse action macros.</li>
<li><strong>Open &amp; free:</strong> PiKVM is open-source software, released under the GPLv3.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bkk03---bootnoderpc"><a class="header" href="#bkk03---bootnoderpc">BKK03 - Bootnode/RPC</a></h1>
<p><img src="./images/bkk03/bkk03_internals.webp" alt="BKK03" /></p>
<h2 id="cpu-amd-ryzen-9-7950x3d-16-core-32-thread-5nm"><a class="header" href="#cpu-amd-ryzen-9-7950x3d-16-core-32-thread-5nm">CPU: AMD Ryzen™ 9 7950X3D 16-Core 32-Thread 5NM</a></h2>
<h3 id="product-link"><a class="header" href="#product-link"><a href="https://www.amd.com/en/products/apu/amd-ryzen-9-7950x3d">Product Link</a></a></h3>
<p>The AMD Ryzen 9 7950X3D, with its 16-core 32-thread architecture, is the
driving force behind our server's high performance. The CPU's multi-core design
and high clock speeds are specifically optimized for blockchain applications,
ensuring efficient chain synchronization and reliable endpoint service.</p>
<p>Featuring advanced technologies like PCI Express® 5.0 and DDR5, the CPU
provides rapid data transfer, essential for low-latency blockchain
transactions. The large 128MB L3 cache further bolsters performance by
facilitating quick access to frequently used data, enhancing efficiency.</p>
<h2 id="cpu-cooling-system"><a class="header" href="#cpu-cooling-system">CPU Cooling System</a></h2>
<p><img src="./images/bkk03/am5socket.webp" alt="BKK03" /></p>
<h3 id="coolserver-p32-cpu-cooler"><a class="header" href="#coolserver-p32-cpu-cooler"><a href="https://aliexpress.com/item/1005004050053958.html">COOLSERVER P32 CPU Cooler</a></a></h3>
<h3 id="thermalright-aluminium-alloy-am5-frame"><a class="header" href="#thermalright-aluminium-alloy-am5-frame"><a href="https://aliexpress.com/item/1005004904430608.html">Thermalright aluminium alloy AM5 frame</a></a></h3>
<p>Cooling efficiency is paramount in maintaining stable performance. Our server
utilizes the COOLSERVER P32 AM5 Server CPU Cooler, in conjunction with the
Thermalright AM5 frame, to maximize cooling capabilities.</p>
<h2 id="motherboard-asrock-rack-b650d4u-2l2tbcmlga-1718-dual-10g-lan"><a class="header" href="#motherboard-asrock-rack-b650d4u-2l2tbcmlga-1718-dual-10g-lan">Motherboard: AsRock Rack B650D4U-2L2T/BCM(LGA 1718) Dual 10G LAN</a></h2>
<h3 id="product-link-1"><a class="header" href="#product-link-1"><a href="https://www.amazon.com/dp/B0BXRFHDQT">Product Link</a></a></h3>
<p>This Micro-ATX motherboard stands as a testament to AsRock's engineering
prowess, blending high-performance consumer technology with the robustness of
server-grade hardware. The board offers full PCIe 5.0 support and features up
to 7 M.2 slots for NVMe storage, enhancing data transfer speeds. Its
compatibility with DDR5 ECC UDIMM memory further underlines its suitability for
demanding server applications.</p>
<h2 id="memory-4x-32gb-micron-ddr5-udimmecc-4800mhz"><a class="header" href="#memory-4x-32gb-micron-ddr5-udimmecc-4800mhz">Memory: 4x 32GB MICRON DDR5 UDIMM/ECC 4800MHz</a></h2>
<h3 id="product-link-2"><a class="header" href="#product-link-2"><a href="https://www.amazon.com/Server-Memory-Module-4800MHz-MTC20C2085S1EC48BA1R">Product Link</a></a></h3>
<p>Our selection of server-grade DDR5 memory modules provides substantial
bandwidth for smooth server operations. Equipped with ECC technology, these
modules maintain data integrity, ensuring the reliability of our transactions.</p>
<h2 id="ssd-expansion-nvme-pcie-raid-adapter-4-ports-nvme-ssd-to-pci-e-40-x16"><a class="header" href="#ssd-expansion-nvme-pcie-raid-adapter-4-ports-nvme-ssd-to-pci-e-40-x16">SSD Expansion: NVMe PCIe RAID Adapter 4 Ports NVME SSD to PCI-E 4.0 X16</a></h2>
<p>This expansion card plays a vital role in our data management strategy by
enabling the integration of top-tier NVMe SSDs. It contributes to our server's
responsiveness by facilitating faster access to stored data.</p>
<h2 id="storage-5x-2tb-hanye-me70-nvme-pci-e40-7200mbs"><a class="header" href="#storage-5x-2tb-hanye-me70-nvme-pci-e40-7200mbs">Storage: 5x 2TB Hanye ME70 NVMe PCI-E4.0 7200mb/s</a></h2>
<h3 id="product-link-3"><a class="header" href="#product-link-3"><a href="https://www.amazon.co.jp/Hanye-%E3%80%90PS5%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E6%B8%88%E3%81%BF%E3%80%91-PCIe-Gen4x4-DRAM%E6%90%AD%E8%BC%89/dp/B0B58JXNXG">Product Link</a></a></h3>
<p>Our system's storage is equipped with 2TB High-Performance ME70 M.2 NVMe SSDs,
providing 12TB of high-speed storage. The SSDs' Gen4 PCIe tech and LDPC error
correction ensure quick data access and integrity.</p>
<h2 id="benchmarks"><a class="header" href="#benchmarks">Benchmarks</a></h2>
<pre><code>2023-07-31 13:55:08 Running machine benchmarks...
2023-07-31 13:55:34
+----------+----------------+-------------+-------------+-------------------+
| Category | Function       | Score       | Minimum     | Result            |
+===========================================================================+
| CPU      | BLAKE2-256     | 1.56 GiBs   | 783.27 MiBs | ✅ Pass (203.8 %) |
|----------+----------------+-------------+-------------+-------------------|
| CPU      | SR25519-Verify | 788.10 KiBs | 560.67 KiBs | ✅ Pass (140.6 %) |
|----------+----------------+-------------+-------------+-------------------|
| Memory   | Copy           | 27.73 GiBs  | 11.49 GiBs  | ✅ Pass (241.3 %) |
|----------+----------------+-------------+-------------+-------------------|
| Disk     | Seq Write      | 2.99 GiBs   | 950.00 MiBs | ✅ Pass (322.0 %) |
|----------+----------------+-------------+-------------+-------------------|
| Disk     | Rnd Write      | 1.29 GiBs   | 420.00 MiBs | ✅ Pass (313.4 %) |
+----------+----------------+-------------+-------------+-------------------+
From 5 benchmarks in total, 5 passed and 0 failed (10% fault tolerance).
2023-07-31 13:55:34 The hardware meets the requirements
Read Latency Statistics in nanoseconds:
-------------------------
Minimum: 520 ns
Maximum: 22540 ns
Mean: 914.595734 ns
Standard Deviation: 222.087316 ns
Read IOPS: 953140.861971
</code></pre>
<h2 id="chassis-1u-case-tgc-h1-400"><a class="header" href="#chassis-1u-case-tgc-h1-400">Chassis: 1U Case, TGC H1-400</a></h2>
<h3 id="product-link-4"><a class="header" href="#product-link-4"><a href="https://www.pcgallery.co.th/product/tgc-h1-400/">Product Link</a></a></h3>
<h2 id="power-supply-unit-400w-compuware-80-plus-platinum-psu"><a class="header" href="#power-supply-unit-400w-compuware-80-plus-platinum-psu">Power Supply Unit: 400W Compuware 80 PLUS Platinum PSU</a></h2>
<h3 id="vendor-link"><a class="header" href="#vendor-link"><a href="https://www.pcgallery.co.th/">Vendor Link</a></a></h3>
<h2 id="kvm-asrock-rack-bcmipmi"><a class="header" href="#kvm-asrock-rack-bcmipmi">KVM: Asrock Rack BCM/IPMI</a></h2>
<p>The AsRock Rack motherboard includes a BCM for remote control, offering robust
management capabilities.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="bkk04---bootnoderpc"><a class="header" href="#bkk04---bootnoderpc">BKK04 - Bootnode/RPC</a></h2>
<p><img src="./images/bkk04/bkk04_internals.webp" alt="BKK04" /></p>
<h3 id="cpu-2"><a class="header" href="#cpu-2">CPU</a></h3>
<p><strong>Model:</strong> <a href="https://www.amd.com/en/products/cpu/amd-ryzen-9-7950x">AMD Ryzen 9 7950X R9 7950X CPU Processor 16-Core 32-Thread 5NM L3=64M Socket AM5</a></p>
<ul>
<li><strong>Core Count:</strong> 16 cores</li>
<li><strong>Technology:</strong> 5NM process</li>
<li><strong>L3 Cache:</strong> 64MB</li>
<li><strong>PCI Express:</strong> 5.0</li>
<li><strong>Memory Support:</strong> DDR5</li>
</ul>
<p><strong>Capabilities:</strong> Designed to manage multiple tasks with ease, such as running
multiple networks simultaneously, efficient blockchain sync, and low latency
transactions.</p>
<h4 id="cpu-cooler-2"><a class="header" href="#cpu-cooler-2">CPU Cooler</a></h4>
<ul>
<li><strong>Model:</strong> <a href="https://aliexpress.com/item/1005004850411911.html">COOLSERVER R64 AM5 Server CPU Cooler</a></li>
<li><strong>Design:</strong> 4 high-quality heatpipes, 150W TDP, double ball bearing</li>
<li><strong>Enhancement:</strong> <a href="https://aliexpress.com/item/1005004904430608.html">Thermalright aluminium alloy AM5 frame</a></li>
</ul>
<h3 id="motherboard-2"><a class="header" href="#motherboard-2">Motherboard</a></h3>
<p><img src="./images/bkk04/bkk04_motherboard_new.webp" alt="Motherboard as new" />
<strong>Model:</strong> <a href="https://www.asrockrack.com/general/productdetail.asp?Model=B650D4U#Specifications">AsRock Rack B650D4U(LGA 1718)</a></p>
<ul>
<li><strong>Form Factor:</strong> Micro-ATX</li>
<li><strong>Memory Support:</strong> DDR5 ECC UDIMM</li>
<li><strong>PCIe Slots:</strong> Full PCIe 5.0 support, M.2 slot, x16 slot, and x4 slot</li>
<li><strong>Storage Support:</strong> Up to 7 M.2 slots</li>
</ul>
<h3 id="memory"><a class="header" href="#memory">Memory</a></h3>
<p><strong>Model:</strong> <a href="https://www.amazon.com/Server-Memory-Module-4800MHz-MTC20C2085S1EC48BA1R">4x Server Memory Module|MICRON|DDR5|32GB|UDIMM/ECC|4800MHz|CL 40|1.1V|MTC20C2085S1EC48BA1R</a></p>
<ul>
<li><strong>Capacity:</strong> 4 modules of 32GB DDR5 each</li>
<li><strong>Technology:</strong> ECC for increased data integrity</li>
<li><strong>Performance:</strong> Low-latency</li>
</ul>
<h3 id="ssd-expansion-cards"><a class="header" href="#ssd-expansion-cards">SSD Expansion Cards</a></h3>
<p><img src="./images/bkk04/bkk04_motherboard.webp" alt="Extension card" /></p>
<ul>
<li><strong>Model:</strong> NVMe SSD Expansion Card NVMe PCIe RAID Adapter 4 Ports NVME SSD To
PCI-E 4.0 X16 Expansion Card</li>
</ul>
<h3 id="storage-2"><a class="header" href="#storage-2">Storage</a></h3>
<ul>
<li><strong>Primary Storage:</strong> 6x 2TB Samsung SSD Pro 980</li>
<li><strong>Backup Storage:</strong> 3x 16TB disks in ZFS RAIDZ (32TB total)</li>
</ul>
<h3 id="benchmarks-1"><a class="header" href="#benchmarks-1">Benchmarks</a></h3>
<pre><code>``+----------+----------------+-------------+-------------+-------------------+
| Category | Function       | Score       | Minimum     | Result            |
+===========================================================================+
| CPU      | BLAKE2-256     | 1.65 GiBs   | 783.27 MiBs | ✅ Pass (215.8 %) |
|----------+----------------+-------------+-------------+-------------------|
| CPU      | SR25519-Verify | 832.82 KiBs | 560.67 KiBs | ✅ Pass (148.5 %) |
|----------+----------------+-------------+-------------+-------------------|
| Memory   | Copy           | 16.99 GiBs  | 11.49 GiBs  | ✅ Pass (147.9 %) |
|----------+----------------+-------------+-------------+-------------------|
| Disk     | Seq Write      | 2.09 GiBs   | 950.00 MiBs | ✅ Pass (225.3 %) |
|----------+----------------+-------------+-------------+-------------------|
| Disk     | Rnd Write      | 885.35 MiBs | 420.00 MiBs | ✅ Pass (210.8 %) |
+----------+----------------+-------------+-------------+-------------------+
From 5 benchmarks in total, 5 passed and 0 failed (10% fault tolerance).
2023-08-03 00:49:00 The hardware meets the requirements
Read Latency Statistics in nanoseconds:
-------------------------
Minimum: 460 ns
Maximum: 535014 ns
Mean: 968.885148 ns
Standard Deviation: 280.737214 ns
99.99th Percentile Read Latency: 350 ns
-------------------------
Read IOPS: 906996.500117

The read latency meets the 2000 ns and lower QoS requirement
</code></pre>
<h3 id="chassis-2"><a class="header" href="#chassis-2">Chassis</a></h3>
<ul>
<li><strong>Model:</strong> <a href="https://www.pcgallery.co.th/product/tgc-24550-3-0/">TGC-24550 2U</a></li>
<li><strong>Design:</strong> 2U rackmount, efficient airflow design</li>
</ul>
<h3 id="power-supply-unit"><a class="header" href="#power-supply-unit">Power Supply Unit</a></h3>
<ul>
<li><strong>Model:</strong> T.F.SKYWINDINTL 1U MINI Flex ATX Power Supply Unit 400W Modular
PSU</li>
<li><strong>Capacity:</strong> 400W</li>
<li><strong>Features:</strong> Built-in cooling fan, overcurrent, overvoltage, and
short-circuit protection</li>
</ul>
<h3 id="kvm-2"><a class="header" href="#kvm-2">KVM</a></h3>
<ul>
<li><strong>Model:</strong> Asrock Rack BCM/IPMI for remote control</li>
</ul>
<h3 id="summary"><a class="header" href="#summary">Summary</a></h3>
<p>The BKK04 Bootnode leverages a combination of cutting-edge components to
deliver high performance, reliability, and scalability. From the AMD Ryzen 9
7950X processor with 32 threads high core clock cycles to the efficient memory
and robust storage solutions, every part of this server is designed to handle
demanding server applications, particularly those related to blockchain
processing. The use of advanced cooling and power supply units ensures
long-term sustainability and stable operation. All components have been
chosen as well to be most energy efficient solutions that market can currently
provide.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="energy-consumption-and-carbon-offset"><a class="header" href="#energy-consumption-and-carbon-offset">Energy Consumption and Carbon Offset</a></h1>
<p><strong>Energy Consumption</strong></p>
<p>We meticulously engineer our server infrastructure, selecting the most
energy-efficient devices the market can provide for the amount of computation
required. Our approach is proven by the actual consumption rate, which is lower
than the manufacturer's estimates.</p>
<ul>
<li>
<p><strong>Processor Selection:</strong></p>
<ul>
<li>2x AMD Ryzen 5600G: 65W each</li>
<li>1x AMD Ryzen 5950X: 170W</li>
<li>1x AMD Ryzen 5950X3D: 120W</li>
<li>MikroTik CCR2004-16G-2S+: Max 35W</li>
</ul>
</li>
<li>
<p><strong>Monthly Energy Consumption Estimate:</strong></p>
<ul>
<li>Total Power: 2 * 65W (5600G) + 170W (5950X) + 120W (5950X3D) + 35W (router) = 455W</li>
<li>Monthly: 0.455 kW * 24 hours/day * 30 days/month = 327.6 kWh</li>
<li>CO2e Emissions (Thailand's 2021 average): 170.32 kg or 0.17 metric tons (mt)</li>
</ul>
</li>
</ul>
<p>Our selection of processors and devices, including the MikroTik
CCR2004-16G-2S+, ensures an optimal performance-to-power ratio. This innovative
approach to energy consumption highlights our dedication to sustainability and
our commitment to leading the way in energy-efficient computing.</p>
<p><strong>Carbon Offset</strong></p>
<p>To mitigate our environmental impact, we're offsetting our carbon emissions
through a monthly subscription with TerraPass, purchasing Renewable Energy
Certificates (RECs) for clean energy projects. These offsets, including
Landfill Gas Capture and Wind Farms, are under reputable standards like the
Climate Action Reserve (CAR).</p>
<p><strong>Moving Forward</strong></p>
<p>We're committed to transparent and accountable climate action, continuously
striving to reduce our environmental impact and informing stakeholders of our
efforts. Our goal transcends merely offsetting emissions; we're building a
resilient, sustainable organization contributing positively to our planet.</p>
<p><strong>Carbon Offset Plan</strong></p>
<p><img src="./images/carbon/terrapass-voucher.webp" alt="TerraPass certificate for month of August" /></p>
<p>Achieving sustainability requires active offsetting. We've partnered with
TerraPass, choosing their 1 MWh/month RECs subscription for £12.00 per MWh,
exceeding our estimated emissions of 0.166 mt of CO2e. This 'over-offsetting'
strategy supports renewable energy projects, reflecting our dedication to
environmental change.</p>
<p>In conclusion, our approach to energy consumption and carbon offsetting aligns
with our commitment to environmental responsibility and innovation. By actively
engaging in sustainable practices, we contribute not only to offsetting our
carbon emissions but to the broader goal of a cleaner, greener future.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="software-infrastructure"><a class="header" href="#software-infrastructure">Software Infrastructure</a></h1>
<p>Our infrastructure leverages several powerful
technologies and platforms to provide a robust and efficient environment for
our operations.</p>
<h2 id="debian"><a class="header" href="#debian">Debian</a></h2>
<p>Our servers run on Debian, a highly stable and reliable Linux-based operating
system. Debian provides a strong foundation for our operations, with its wide
array of packages, excellent package management system, and strong community
support. Its stability and robustness make it an excellent choice for our
server environments.</p>
<h2 id="proxmox-virtual-environment"><a class="header" href="#proxmox-virtual-environment">Proxmox Virtual Environment</a></h2>
<p>We utilize Proxmox, an open-source server virtualization management solution.
Proxmox allows us to manage virtual machines, containers, storage, virtualized
networks, and HA clustering from a single, integrated platform. This is crucial
in ensuring we have maximum control and efficiency in managing our various
server processes. We utilize linux 6.1 lts pve kernel.</p>
<h2 id="lxc-linux-containers"><a class="header" href="#lxc-linux-containers">LXC (Linux Containers)</a></h2>
<p>We leverage LXC (Linux Containers) to run multiple isolated Linux systems
(containers) on a single host. This containerization technology provides us
with lightweight, secure, and performant alternatives to full machine
virtualization.</p>
<h2 id="zfs"><a class="header" href="#zfs">ZFS</a></h2>
<p>ZFS, the Zettabyte File System, is an advanced filesystem and logical volume
manager. It was designed to overcome many of the major issues found in previous
designs and is used for storing data in our Proxmox environment. It provides
robust data protection, supporting high storage capacities and efficient data
compression, and allows us to create snapshots and clones of our filesystem.</p>
<h2 id="ansible"><a class="header" href="#ansible">Ansible</a></h2>
<p>We use Ansible for automation of our system configuration and management tasks.
Ansible enables us to define and deploy consistent configurations across
multiple servers, and automate routine maintenance tasks, thus increasing
efficiency and reducing the risk of errors.</p>
<h2 id="mikrotik-routeros"><a class="header" href="#mikrotik-routeros">MikroTik RouterOS</a></h2>
<p>Our network infrastructure relies on MikroTik RouterOS, a robust network
operating system. This system offers a variety of features such as routing,
firewall, bandwidth management, wireless access point, backhaul link, hotspot
gateway, VPN server, and more. This helps us ensure secure, efficient, and
reliable network operations.</p>
<p>All these technologies are intertwined, working together to support our
operations. They are chosen not just for their individual capabilities, but
also for their compatibility and interoperability, creating an integrated,
efficient, and reliable software infrastructure.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="firmware-updates"><a class="header" href="#firmware-updates">Firmware Updates</a></h1>
<h2 id="samsung-980pro-nvme"><a class="header" href="#samsung-980pro-nvme">Samsung 980Pro NVMe</a></h2>
<pre><code class="language-bash">wget https://semiconductor.samsung.com/resources/software-resources/Samsung_SSD_980_PRO_5B2QGXA7.iso
apt-get -y install gzip unzip wget cpio
mkdir /mnt/iso
sudo mount -o loop ./Samsung_SSD_980_PRO_5B2QGXA7.iso /mnt/iso/
mkdir /tmp/fwupdate
cd /tmp/fwupdate
gzip -dc /mnt/iso/initrd | cpio -idv --no-absolute-filenames
cd root/fumagician/
sudo ./fumagician
</code></pre>
<p>This .iso is for 980 Pro, if you have different model replace ISO with link on
https://semiconductor.samsung.com/consumer-storage/support/tools/</p>
<h2 id="asrock-rack-motherboard"><a class="header" href="#asrock-rack-motherboard">ASRock Rack Motherboard</a></h2>
<p>This guide outlines the steps to update the firmware on your ASRock Rack
motherboard. The update includes the BIOS, BMC (Baseboard Management
Controller), and the networking firmware.</p>
<p>Before starting, download the following files:</p>
<ul>
<li><a href="https://www.dropbox.com/s/01csce7jp2n18xm/B650D4U-2L2T-BCM_4.01.ROM?dl=0">BIOS L4.01</a></li>
<li><a href="https://www.dropbox.com/s/gwrmaowuxn8uvi5/B650D4U_2L2T-BCM_BMC4.01.00.zip?dl=0">BMC</a></li>
<li><a href="https://www.dropbox.com/s/ftuwqr9renu9lo9/Broadcom%2057416%20LAN%20Flashing%20FW%20EN.zip?dl=0">Broadcom 57416 LAN Flashing Firmware</a></li>
</ul>
<h2 id="bios-update"><a class="header" href="#bios-update">BIOS Update</a></h2>
<p>ASRock Rack provides a BIOS flash utility called ASRock Rack Instant Flash,
embedded in the Flash ROM, to make the BIOS update process simple and
straightforward.</p>
<ol>
<li>
<p><strong>Preparation</strong>: Format a USB flash drive with FAT32/16/12 file system and
save the new BIOS file to your USB flash drive.</p>
</li>
<li>
<p><strong>Access ASRock Rack Instant Flash</strong>: Restart the server and press the
<code>&lt;F6&gt;</code> key during the POST or the <code>&lt;F2&gt;</code> key to enter the BIOS setup menu.
From there, access the ASRock Rack Instant Flash utility.</p>
</li>
<li>
<p><strong>Update BIOS</strong>: Follow the instructions provided by the utility to update
the BIOS.</p>
</li>
</ol>
<h2 id="bmc-firmware-update"><a class="header" href="#bmc-firmware-update">BMC Firmware Update</a></h2>
<p>In order to keep your BMC firmware up-to-date and have the latest features and
improvements, regular updates are recommended. This guide provides step-by-step
instructions on how to update your BMC firmware. </p>
<ol>
<li>
<p><strong>Preparation</strong>: Download the correct BMC firmware update file from the
ASRock Rack website. Ensure the firmware version is later than the one
currently installed on your device. Save the firmware file on your local
system.</p>
</li>
<li>
<p><strong>Access BMC Maintenance Portal</strong>: Open your web browser and navigate to the
BMC maintenance portal using the IP address of the BMC. Typically, the URL
is https://[BMC IP Address]/#maintenance/firmware_update_wizard, for
instance, https://192.168.33.114/#maintenance/firmware_update_wizard.</p>
</li>
<li>
<p><strong>Login</strong>: Use your BMC username and password to log into the portal. </p>
</li>
<li>
<p><strong>Firmware Update Section</strong>: Navigate to the firmware update section.</p>
</li>
<li>
<p><strong>Upload Firmware Image</strong>: Click on &quot;Select Firmware Image&quot; and upload the
firmware file you downloaded earlier. The firmware files typically end with
<code>.ima</code>. For instance, <code>B650D4U_2L2T_4.01.00.ima</code>.</p>
</li>
<li>
<p><strong>Preserve Configuration</strong>: If you want to preserve all the current
configurations during the update, check the box &quot;Preserve all
Configuration&quot;. This will maintain all the settings irrespective of the
individual items marked as preserve/overwrite in the table below. </p>
</li>
<li>
<p><strong>Start Update</strong>: Click &quot;Firmware Update&quot;. The system will validate the
image and if successful, the update process will start. The progress will be
shown on the screen.</p>
</li>
<li>
<p><strong>Reboot</strong>: Once the update is completed, the system will reboot
automatically. </p>
</li>
</ol>
<blockquote>
<p><strong>WARNING</strong>: Please note that after entering the update mode, other web
pages, widgets, and services will not work. All the open widgets will be
automatically closed. If the update is cancelled in the middle of the
process, the device will be reset only for BMC BOOT, and APP components of
Firmware.</p>
</blockquote>
<blockquote>
<p><strong>NOTE</strong>: The IP address used in this guide is an example. Replace it with
the actual IP address of your BMC. Also, remember to use a reliable network
connection during the update process to prevent any interruption.</p>
</blockquote>
<h2 id="networking-firmware-update"><a class="header" href="#networking-firmware-update">Networking Firmware Update</a></h2>
<ol>
<li>
<p><strong>Preparation</strong>: Format a USB flash drive and copy the
&quot;bnxtmt-lite-uefi-221.0.117.0-x64&quot; folder from the downloaded Broadcom 57416
LAN Flashing Firmware onto it.</p>
</li>
<li>
<p><strong>Access UEFI Shell</strong>: Insert the USB flash drive into your ASRock Rack
server board, reboot the server, and hit F11 at the POST screen. Select
&quot;UEFI: Built-in EFI Shell&quot;. The USB flash drive should be named <code>FS0:</code>. Type
<code>FS0:</code> and press enter.</p>
<p><img src="images/firmware/image0.png" alt="UEFI Shell" /></p>
</li>
<li>
<p><strong>Verify Current Firmware Version</strong>: Execute <code>bnxtmt.efi</code> to display the
current firmware version.</p>
<p><img src="images/firmware/image1.png" alt="bnxtmt efi execution" /></p>
</li>
<li>
<p><strong>Erase the Flash</strong>: Navigate to the &quot;bnxtmt-lite-uefi-221.0.117.0-x64&quot;
folder and execute <code>bnxtmt.efi -sysop -none -no_swap –blank</code> to erase the
current firmware.</p>
<p><img src="images/firmware/image3.jpg" alt="Erase Flash" /></p>
</li>
<li>
<p><strong>Flash the Firmware</strong>: Execute <code>bnxtmt.efi -sysop -none -no_swap -fnvm ASRR57416-2T.PKG -log FW1.log</code> to flash the new firmware. Here,
<code>ASRR57416-2T.PKG</code> is the firmware file.</p>
<p><img src="images/firmware/image2.jpg" alt="Flash Firmware" /></p>
</li>
<li>
<p><strong>Verify Updated Firmware Version</strong>: Run <code>bnxtmt.efi</code> again to verify the
new firmware version.</p>
<p><img src="images/firmware/image4.jpg" alt="bnxtmt efi execution" /></p>
</li>
<li>
<p><strong>Flash LAN Ports' MAC Addresses</strong>: Execute <code>bnxtmt.efi -none –m -log MAC1.log</code>.</p>
<p><img src="images/firmware/image5.jpg" alt="Flash MAC" /></p>
</li>
<li>
<p><strong>Input MAC Addresses</strong>: Enter the MAC addresses of both LAN ports when
prompted. <em>Write down these addresses beforehand.</em></p>
<p><img src="images/firmware/image6.jpg" alt="Enter MAC Addresses" /></p>
</li>
<li>
<p><strong>Power Cycle</strong>: Turn off the system, power cycle the PSU, and then power
everything back on.</p>
</li>
</ol>
<blockquote>
<p>Note: The MAC addresses for your LAN ports are crucial. Write them down
before starting the update process as they need to be added during the
command at step 8.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="networking"><a class="header" href="#networking">Networking</a></h1>
<h2 id="bandwidth"><a class="header" href="#bandwidth">Bandwidth</a></h2>
<img src="images/networking/bandwidth.webp" alt="Scaling bandwidth" style="width: 100%; margin-top: 2em; object-fit: cover;">
<p>We operate a dedicated bandwidth connection providing up to 200Mbps for
international direct land-line and under-sea connections. This service extends
all the way to Singapore, ensuring latency below 30ms. This speed is critical
for RPC endpoint provider operations, where timely data transfer is a crucial
success factor. The provision to scale up our bandwidth capabilities offers
us the flexibility to match our growing needs without compromising on the
quality of service.</p>
<h2 id="router"><a class="header" href="#router">Router</a></h2>
<img src="images/networking/mikrotik.webp" alt="Mikrotik Cloud Core Router" style="width: 100%; margin-top: 2em; object-fit: cover;">
<p><a href="https://mikrotik.com/product/ccr2004_16g_2splus">MikroTik Cloud Core Router CCR2004-16G-2S+</a></p>
<p>We use the <a href="https://mikrotik.com/product/ccr2004_16g_2splus">MikroTik Cloud Core Router CCR2004-16G-2S+</a> for its
optimal low latency networking and high throughput capabilities.</p>
<ul>
<li><strong>Performance:</strong> The CCR2004 router uses the Annapurna Labs Alpine v2 CPU,
which has 4x 64-bit ARMv8-A Cortex-A57 cores for robust single-core
performance.</li>
<li><strong>Bandwidth:</strong> The router has 18 wired ports, including 16x Gigabit Ethernet
ports and two 10G SFP+ cages for high data traffic management.</li>
<li><strong>No Bottlenecks:</strong> Each group of 8 Gigabit Ethernet ports is connected to a
distinct Marvell Amethyst family switch-chip, each having a separate 10 Gbps
full-duplex line to the CPU for full wire speed operation.</li>
<li><strong>Single-Core Performance per Watt:</strong> The CCR2004 router offers the best
single-core performance per watt across all CCR devices.</li>
<li><strong>Reliability and Durability:</strong> The CCR2004 router, encased in a classic
white 1U rackmount, incorporates built-in dual redundant power supplies for
uninterrupted service.</li>
</ul>
<img src="images/networking/router-arch.png" alt="Mikrotik Cloud Core Router" style="width: 100%; margin-top: 2em; object-fit: cover;">
<h2 id="ipv4-configuration"><a class="header" href="#ipv4-configuration">IPv4 Configuration</a></h2>
<p>Our subnet, based on the CIDR notation of 255.255.255.248 (/29), provides us
with 6 usable IP addresses, from 27.131.160.105 to 27.131.160.110, out of a
total of 8. The first address, 27.131.160.104, is the network address, and the
last one, 27.131.160.111, is the broadcast address. They can't be used for
hosts (like our router or nodes). </p>
<p>We currently use the following configuration:</p>
<ul>
<li><strong>Network Address:</strong> 27.131.160.104</li>
<li><strong>Gateway (ISP's router):</strong> 27.131.160.105</li>
<li><strong>Our Router's WAN Interface:</strong> 27.131.160.106</li>
<li><strong>Usable addresses for nodes:</strong> 27.131.160.107 to 27.131.160.110</li>
<li><strong>Broadcast Address:</strong> 27.131.160.111</li>
</ul>
<p><img src="./images/networking/rack_back.webp" alt="Rack from the back with electricity sockets" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="proxmox-network-configuration-guide"><a class="header" href="#proxmox-network-configuration-guide">Proxmox Network Configuration Guide</a></h1>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>Networking in Proxmox is managed through the Debian network interface
configuration file at <code>/etc/network/interfaces</code>. This guide will walk you
through the process of configuring the network interfaces and creating a Linux
bridge for your Proxmox server.</p>
<h2 id="pre-requisites"><a class="header" href="#pre-requisites">Pre-requisites:</a></h2>
<p>Before we begin, you should have:</p>
<ol>
<li>A Proxmox VE installed and configured on your server.</li>
<li>Administrative or root access to your Proxmox VE server.</li>
</ol>
<h2 id="step-1-understand-proxmox-network-configuration-files"><a class="header" href="#step-1-understand-proxmox-network-configuration-files">Step 1: Understand Proxmox Network Configuration Files</a></h2>
<p>Proxmox network settings are mainly configured in two files:</p>
<ul>
<li><code>/etc/network/interfaces</code>: This file describes the network interfaces
available on your system and how to activate them. This file is critical for
setting up bridged networking or configuring network interfaces manually.</li>
<li><code>/etc/hosts</code>: This file contains IP address to hostname mappings.</li>
</ul>
<h2 id="step-2-configure-primary-network-interface"><a class="header" href="#step-2-configure-primary-network-interface">Step 2: Configure Primary Network Interface</a></h2>
<p>First, open the network interfaces configuration file for editing:
Set your primary network interface (e.g., <code>enp9s0</code>) to manual:</p>
<pre><code class="language-bash">nano /etc/network/interfaces
</code></pre>
<pre><code class="language-bash">auto enp9s0
iface enp9s0 inet manual
</code></pre>
<h2 id="step-3-configure-linux-bridge"><a class="header" href="#step-3-configure-linux-bridge">Step 3: Configure Linux Bridge</a></h2>
<p>Next, create a Linux bridge (<code>vmbr0</code>):</p>
<pre><code class="language-bash">auto vmbr0
iface vmbr0 inet static
    address 192.168.69.103
    netmask 255.255.255.0
    gateway 192.168.69.1
    bridge_ports enp9s0
    bridge_stp off
    bridge_fd 0
</code></pre>
<p>Make sure to replace the <code>address</code>, <code>netmask</code>, and <code>gateway</code> parameters with
the correct values for your network.</p>
<h2 id="step-4-apply-configuration"><a class="header" href="#step-4-apply-configuration">Step 4: Apply Configuration</a></h2>
<p>Save and exit the file, then restart the network service for the changes to
take effect:</p>
<pre><code class="language-bash">systemctl restart networking.service
</code></pre>
<h2 id="step-5-verify-configuration"><a class="header" href="#step-5-verify-configuration">Step 5: Verify Configuration</a></h2>
<p>Use the <code>ip a</code> command to verify that the bridge was created successfully:</p>
<pre><code class="language-bash">ip a
</code></pre>
<h2 id="step-6-configure-the-hosts-file"><a class="header" href="#step-6-configure-the-hosts-file">Step 6: Configure the Hosts File</a></h2>
<p>The <code>/etc/hosts</code> file maps network addresses to hostnames. Open this file in a
text editor:</p>
<pre><code class="language-bash">nano /etc/hosts
</code></pre>
<p>Then, define the IP address and corresponding FQDN and hostname for your
Proxmox server:</p>
<pre><code class="language-bash">127.0.0.1	localhost
192.168.69.103	bkk03.yourdomain.com	bkk03

# The following lines are desirable for IPv6 capable hosts
::1     localhost ip6-localhost ip6-loopback
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
</code></pre>
<p>Remember to replace <code>192.168.69.103</code>, <code>bkk03.yourdomain.com</code>, and <code>bkk03</code> with
your server's IP address, FQDN, and hostname, respectively.</p>
<p>After updating the <code>/etc/hosts</code> file, save and exit the editor.</p>
<p><strong>Important</strong>: Ensure the FQDN in your <code>/etc/hosts</code> matches the actual FQDN of
your server. This FQDN should be resolvable from the server itself and any
machines that will be accessing it. The Proxmox web interface uses this
hostname to generate SSL certificates for the HTTPS interface, so incorrect
resolution may lead to certificate issues.</p>
<p>By carefully following the instructions provided in this guide, administrators
can ensure a robust and secure networking setup for their Proxmox servers. This
guide should provide a good starting point for both new and experienced Proxmox
administrators to understand and manage the network settings of their servers
effectively.</p>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<p>If you run into issues during this process, you can use the following commands
to troubleshoot:</p>
<ul>
<li>
<p><code>systemctl status networking.service</code>: Displays the status of the networking
service.</p>
</li>
<li>
<p><code>journalctl -xeu networking.service</code>: Provides detailed logs for the
networking service.</p>
</li>
<li>
<p><code>ip addr flush dev &lt;interface&gt;</code> and <code>ip route flush dev &lt;interface&gt;</code>: Clears
IP addresses and routes on a given interface.</p>
</li>
<li>
<p><code>ip link delete &lt;bridge&gt;</code> and <code>ip link add name &lt;bridge&gt; type bridge</code>:
Deletes and recreates a bridge.</p>
</li>
<li>
<p><code>ip link set &lt;interface&gt; master &lt;bridge&gt;</code>: Assigns an interface to a bridge.</p>
</li>
<li>
<p><code>ip addr add &lt;ip&gt;/&lt;subnet&gt; dev &lt;bridge&gt;</code>: Assigns an IP address to a bridge.</p>
</li>
</ul>
<p>Remember to replace <code>&lt;interface&gt;</code>, <code>&lt;bridge&gt;</code>, <code>&lt;ip&gt;</code>, and <code>&lt;subnet&gt;</code> with the
appropriate values for your network.</p>
<p>For more detailed information about Proxmox networking, refer to the <a href="https://pve.proxmox.com/wiki/Network_Configuration">official
Proxmox documentation</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="routeros"><a class="header" href="#routeros">RouterOS</a></h1>
<p>RouterOS is an operating system designed specifically for routers and network
devices. Developed by the Latvian company MikroTik, it is used to turn standard
x86-64 architecture computers or MikroTik's own RouterBOARD hardware into fully
functional routers.</p>
<p>RouterOS provides all the core features expected in a router, such as routing,
firewalling, bandwidth management, VPN support, and more. Here's a brief
overview of some key features and aspects:</p>
<ol>
<li>
<p><strong>Routing</strong>: Supports various routing protocols such as BGP, OSPF, RIP, and
MPLS, allowing for robust and scalable network design.</p>
</li>
<li>
<p><strong>Firewall</strong>: RouterOS includes a powerful firewall to secure the network.
It allows for filtering by IP address, port, protocol, and other parameters.</p>
</li>
<li>
<p><strong>Quality of Service (QoS)</strong>: Bandwidth management is a strong feature in
RouterOS, enabling administrators to prioritize certain types of traffic,
limit bandwidth for specific users, or guarantee certain bandwidth levels for
specific services.</p>
</li>
<li>
<p><strong>Virtual Private Network (VPN) Support</strong>: RouterOS supports various VPN
protocols, including OpenVPN, L2TP, PPTP, and SSTP, allowing secure
connections to remote networks.</p>
</li>
<li>
<p><strong>Wireless Capabilities</strong>: It provides support for various wireless
standards, making it suitable for creating Wi-Fi hotspots or linking
locations wirelessly.</p>
</li>
<li>
<p><strong>User Management</strong>: RouterOS offers multiple user levels and authentication
methods, such as local database, RADIUS, and more.</p>
</li>
<li>
<p><strong>Hotspot Gateway</strong>: It allows the setup of a custom user login page,
authentication of users, and bandwidth limitation, particularly useful in
public Wi-Fi scenarios like hotels, airports, etc.</p>
</li>
<li>
<p><strong>Winbox</strong>: RouterOS can be managed through Winbox, a GUI application
provided by MikroTik, as well as through command line and web interfaces.
Winbox enables an easy-to-use interface for configuring and monitoring the
router.</p>
</li>
<li>
<p><strong>Scalability</strong>: Suitable for small home setups and also for large
enterprise networks. It provides robust features that can be tailored to fit
various network sizes and requirements.</p>
</li>
<li>
<p><strong>Licensing</strong>: RouterOS licensing is tiered, with higher-level licenses
unlocking additional features. This allows users to choose the level that
fits their specific needs and budget.</p>
</li>
<li>
<p><strong>Scripting</strong>: RouterOS includes a scripting language that lets
administrators automate various functions and operations.
Also SSL secured API available.</p>
</li>
<li>
<p><strong>Updates and Security</strong>: Regular updates are provided by MikroTik,
including security patches and feature enhancements.</p>
</li>
</ol>
<p>RouterOS makes a compelling choice for network professionals who need an
affordable and highly configurable operating system for their routers. It can
transform simple hardware into powerful network devices with an extensive range
of features. Whether deployed in small businesses, large enterprises, or ISPs,
RouterOS is a versatile solution to many networking needs.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="fasttracking"><a class="header" href="#fasttracking">FastTracking</a></h1>
<h2 id="efficient-routing-and-firewall-management-with-mikrotik-routers"><a class="header" href="#efficient-routing-and-firewall-management-with-mikrotik-routers"><strong>Efficient Routing and Firewall Management with MikroTik Routers</strong></a></h2>
<p>Efficiency in routing and firewall management is paramount in a network
environment, especially when tasked with handling substantial traffic volumes.
This document elucidates best practices for configuring MikroTik routers to
realize optimal performance, concentrating on FastTrack technology and
judicious firewall rule arrangement.</p>
<h2 id="fasttrack-configuration"><a class="header" href="#fasttrack-configuration"><strong>FastTrack Configuration</strong></a></h2>
<p>MikroTik routers offer FastTrack, a performance optimization feature that
enables specific packets to bypass various handling layers. The benefit of this
bypass is twofold: reduced CPU load and increased throughput.</p>
<h3 id="the-advantage-of-fasttrack"><a class="header" href="#the-advantage-of-fasttrack"><strong>The Advantage of FastTrack</strong></a></h3>
<p>FastTrack substantially lightens the burden on the router's CPU, thereby
accommodating more connections and amplifying throughput. This efficiency is
particularly invaluable for Peer-to-Peer (P2P) connections, such as those
utilized by Polkadot nodes.</p>
<h3 id="implementing-fasttrack"><a class="header" href="#implementing-fasttrack"><strong>Implementing FastTrack</strong></a></h3>
<p>FastTrack can be implemented with precision to enhance the performance of
Polkadot P2P ports.</p>
<ol>
<li>
<p><strong>Identify the Connections</strong>: Ascertain the connections you desire to
FastTrack. Typically, for Polkadot nodes, the FastTrack would be applied to
the P2P ports (e.g., <code>30333</code>) responsible for inter-node communication.</p>
</li>
<li>
<p><strong>Construct the FastTrack Rule</strong>: Position the FastTrack rule at the zenith
of the firewall filter rules. The following example demonstrates a FastTrack
rule for Polkadot P2P port <code>30333</code>, targeting the IP address <code>192.168.42.101</code>:</p>
<pre><code class="language-shell">/ip firewall filter add chain=forward action=fasttrack-connection dst-address=192.168.42.101 protocol=tcp dst-port=30333 connection-state=established,related
</code></pre>
</li>
<li>
<p><strong>Formulate a Corresponding Accept Rule</strong>: FastTracking a connection does
not automatically validate it, necessitating a corresponding 'accept' rule
subsequent to the FastTrack rule:</p>
<pre><code class="language-shell">/ip firewall filter add chain=forward action=accept dst-address=192.168.42.101 protocol=tcp dst-port=30333 connection-state=established,related
</code></pre>
</li>
<li>
<p><strong>Configure Port Forwarding</strong>: Accurate port forwarding is fundamental for
channeling traffic to the Polkadot node. An example of a Destination NAT
rule for directing traffic on port <code>30333</code> to the internal address
<code>192.168.42.101</code> is as follows:</p>
<pre><code class="language-shell">/ip firewall nat add chain=dstnat action=dst-nat to-addresses=192.168.42.101 to-ports=30333 protocol=tcp dst-address=27.131.160.106 dst-port=30333
</code></pre>
</li>
</ol>
<h2 id="ordering-firewall-rules"><a class="header" href="#ordering-firewall-rules"><strong>Ordering Firewall Rules</strong></a></h2>
<p>The sequencing of firewall rules is pivotal, as rules are processed linearly.
The advised general order is:</p>
<ol>
<li><strong>Essential Drop Rules</strong>: Intercept known malicious IPs or undesired
traffic.</li>
<li><strong>FastTrack Rules</strong>: As detailed above.</li>
<li><strong>General Allow and Deny Rules</strong>: These encompass standard protocols and
services either to be permitted or obstructed.</li>
</ol>
<h2 id="monitoring-and-refinement"><a class="header" href="#monitoring-and-refinement"><strong>Monitoring and Refinement</strong></a></h2>
<p>MikroTik offers diverse tools to observe your router's performance:</p>
<ul>
<li><strong>Resource Monitoring</strong>: Utilize <code>/system resource print</code> to inspect CPU and
memory usage.</li>
<li><strong>Connection Tracking</strong>: Examine FastTrack connections with <code>/ip firewall connection tracking print</code>.</li>
</ul>
<p>Consistent monitoring is instrumental in detecting performance restrictions and
avenues for further enhancement.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="filesystem"><a class="header" href="#filesystem">Filesystem</a></h1>
<p>The file system is perhaps the most underappreciated component in the
blockchain synchronization process, despite being pivotal. It's puzzling how
little attention this crucial element receives. Try seeking a single article
discussing the ideal record sizes for blockchain databases - you'll quickly
discover the dearth of literature on this subject. By offloading additional
tasks to the application users, we inadvertently make chains more difficult to
synchronize, an outcome that inadvertently centralizes those running the nodes.</p>
<p>Upon rigorous testing of various file systems - including mdraid (ext4), LVM,
mdraid, Btrfs, and ZFS - our findings suggest that ZFS stands out as the most
user-friendly and well-rounded solution. While LVM and Btrfs also has its
merits, its user interface tooling design seems to be more suitable for those
with a high tolerance for complexity.</p>
<h2 id="zfs-1"><a class="header" href="#zfs-1">ZFS</a></h2>
<p>ZFS offers incredibly easy client tool to use for setting up complex filesystem
setup with snapshots and quota management.</p>
<h3 id="installation"><a class="header" href="#installation">Installation</a></h3>
<p>execute as sudo on debian12/bookworm</p>
<pre><code class="language-bash">#!/bin/bash

# Create the backports file
echo &quot;deb http://deb.debian.org/debian bookworm-backports main contrib
deb-src http://deb.debian.org/debian bookworm-backports main contrib&quot; &gt; /etc/apt/sources.list.d/bookworm-backports.list

# Create the preferences file
echo &quot;Package: src:zfs-linux
Pin: release n=bookworm-backports
Pin-Priority: 990&quot; &gt; /etc/apt/preferences.d/90_zfs

# Update package lists
apt update

# Install necessary packages
apt install -y dpkg-dev linux-headers-$(uname -r) linux-image-$(uname -r)

# Set the environment variable DEBIAN_FRONTEND to noninteractive
# Install ZFS packages
DEBIAN_FRONTEND=noninteractive apt install -y zfs-dkms zfsutils-linux

# Verify the ZFS installation
modprobe zfs &amp;&amp; echo &quot;ZFS installed successfully&quot; || echo &quot;ZFS installation failed&quot;
</code></pre>
<h3 id="zfs-partitioning"><a class="header" href="#zfs-partitioning">ZFS partitioning</a></h3>
<pre><code class="language-bash">#!/bin/bash
# bkk03 zfs setup

# Array of disks to be used
disks=(&quot;nvme1n1&quot; &quot;nvme2n1&quot; &quot;nvme3n1&quot; &quot;nvme4n1&quot;)

# Size of the swap partition on each disk
swap_size=&quot;16G&quot;

# Create swap partition and ZFS partition on each disk
for disk in &quot;${disks[@]}&quot;; do
    echo &quot;Creating partitions on /dev/${disk}&quot;
    
    # Create the swap partition
    parted -s /dev/${disk} mklabel gpt
    parted -s /dev/${disk} mkpart primary linux-swap 1MiB ${swap_size}
    mkswap /dev/${disk}p1
    swap_uuid=$(blkid -s UUID -o value /dev/${disk}p1)

    # Add the swap partitions to /etc/fstab so they're used on startup
    echo &quot;UUID=${swap_uuid} none swap sw 0 0&quot; &gt;&gt; /etc/fstab

    # Enable the swap partition
    echo &quot;Enabling swap on /dev/${disk}p1&quot;
    swapon /dev/${disk}p1

    # Create the ZFS partition
    parted -s /dev/${disk} mkpart primary ${swap_size} 100%

    # Inform the OS of partition table changes
    partprobe /dev/${disk}
done

</code></pre>
<h3 id="zfs-optimized-for-blockchain"><a class="header" href="#zfs-optimized-for-blockchain">ZFS optimized for blockchain</a></h3>
<pre><code class="language-bash"># Now, create the ZFS pool with the remaining space
# TODO: add disk with  root installation to pool as well
disks=(&quot;nvme1n1&quot; &quot;nvme2n1&quot; &quot;nvme3n1&quot; &quot;nvme4n1&quot;)
zpool create -o ashift=12 tank $(for disk in &quot;${disks[@]}&quot;; do echo &quot;/dev/${disk}p2&quot;; done)

# Disable access time (atime) as it can negatively impact performance
zfs set atime=off tank
# Set recordsize to 16K as most values in the ParityDb are small and values over 16K are rare
zfs set recordsize=16k tank
# throughput safer than latency
zfs set logbias=throughput tank
# Set the primary cache to only metadata, as ParityDb relies on the OS page cache
zfs set primarycache=metadata tank
# Enable compression as it can provide both space and performance benefits
zfs set compression=lz4 tank
# Set redundant metadata to most to protect against data corruption
zfs set redundant_metadata=most tank
# Synchronous writes (sync) should be set to standard to ensure data integrity in case of an unexpected shutdown
zfs set sync=standard tank
# Enable snapshots for better data protection using crontab(zfs snapshot
# tank/subvol-101-disk-1@${date} # or use some better tooling for it
# like zfsnap

echo &quot;Finished setting up ZFS pool and swap partitions&quot;
</code></pre>
<p>bkk03 lsblk:</p>
<pre><code class="language-bash">NAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS
sda           8:0    1  28.7G  0 disk
├─sda1        8:1    1   1.9G  0 part /boot/efi
├─sda2        8:2    1   1.9G  0 part /boot
└─sda3        8:3    1  24.9G  0 part /media/user/489b6b9f-f615-4270-b2c9-9565b9516c00
nvme1n1     259:0    0   1.9T  0 disk
├─nvme1n1p2 259:7    0   1.8T  0 part
└─nvme1n1p1 259:8    0  14.9G  0 part [SWAP]
nvme2n1     259:1    0   1.9T  0 disk
├─nvme2n1p1 259:10   0  14.9G  0 part [SWAP]
└─nvme2n1p2 259:11   0   1.8T  0 part
nvme3n1     259:2    0   1.9T  0 disk
├─nvme3n1p1 259:12   0  14.9G  0 part [SWAP]
└─nvme3n1p2 259:13   0   1.8T  0 part
nvme4n1     259:3    0   1.9T  0 disk
├─nvme4n1p1 259:14   0  14.9G  0 part [SWAP]
└─nvme4n1p2 259:15   0   1.8T  0 part
nvme0n1     259:4    0   1.9T  0 disk
├─nvme0n1p1 259:5    0  59.6G  0 part [SWAP]
├─nvme0n1p2 259:6    0 126.7G  0 part /
└─nvme0n1p3 259:9    0   1.7T  0 part
</code></pre>
<h3 id="blockchains-on-hdd"><a class="header" href="#blockchains-on-hdd">Blockchains on HDD</a></h3>
<p>The NVMe drives themselves should provide high performance and low latency for
your ZFS pool, and a separate ZIL or L2ARC might not provide significant
benefits and could even add unnecessary complexity or costs. You can create
tank/slog and tank/L2ARC for performant read and write cache to reach
&quot;balanced disk&quot; like boosted performance. ZIL ~8GB and L2ARC ~128GB.
This can make huge difference in HDD capability of synchronizing Blockchains
when data is first written in NVMe.</p>
<p>We are using HDD purely for storing snapshots as backups due to using striping
raid for our NVMe:s.</p>
<p>Notice that if you running EVM blockchain with small blocks like Ethereum, it might 
be best option to set your recordsize 4K instead before starting syncing.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ansible-1"><a class="header" href="#ansible-1">Ansible</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="virtualization"><a class="header" href="#virtualization">Virtualization</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="team"><a class="header" href="#team">Team</a></h1>
<div style="display: flex; margin-bottom: 4em;">
<div style="display: flex; flex-direction: column; flex: 0 0 20%;">
<img src="images/team/tommi.webp" alt="Tommi" style="width: 100%; margin-top: 1em; object-fit: cover;">
<center><h3 id="tommi"><a class="header" href="#tommi">Tommi</a></h3></center>
</div> 
<div style="margin-left: 1em;">
<p>
Tommi is a symbol of the generation that mastered the qwerty keyboard even
before grasping the intricacies of handwriting. With over 20 years of
experience in building hardware, software, and managing servers during the
early stages of the internet, he demonstrates an exceptional commitment to
the digital world.
<p>Tommi's journey with Bitcoin started as early as 2008. He ran the first
version of Bitcoin on a Pentium D950 computer, only to lose the digital keys
within a few months. This experience gave him a first-hand insight into the
workings of the novel digital currency.</p>
<p>However, it wasn't until 2013, when Snowden's revelations and the growing
influence of anonymous online marketplaces came to light, that Tommi fully
grasped the importance of Bitcoin's proposition. The internet, once thought
of as a user-driven landscape, had allowed a mere ten companies to gain
majority control, leading to concerns about mass surveillance.</p>
<p>This eye-opening realization led to the creation of Rotko Network. This
initiative is based on the principle of creating an internet that is shaped
by its users, rather than dominated by a few profit-driven corporations. With
the dedication of a software enthusiast and the heart of a freedom-fighter,
standing at the helm of this mission. He is dedicated to end the data
slavery and reshaping the internet into a space that truly belongs to its
users.
wq!</p>
</p>
</div>
</div>
<!-- <div style="display: flex; margin-bottom: 4em;"> <div style="display: flex; -->
<!-- flex-direction: column; flex: 0 0 20%;"> <img src="images/team/dan.webp" -->
<!-- alt="Dan" style="width: 100%; margin-top: 1em; object-fit: cover;"> -->
<!-- <center><h3 id="dan"><a class="header" href="#dan">Dan</a></h3></center> </div> <div style="margin-left: 1em;"> <p> Meet -->
<!-- Dan, a bona fide wizard of programming who cut his teeth coding back in the -->
<!-- 90s, drawing inspiration from the music demoscene. With more than two decades -->
<!-- under his belt, he's a seasoned veteran who understands the ins and outs of the -->
<!-- game. -->
<!---->
<!-- Just like many of us old-timers, he has a deep appreciation for functional -->
<!-- programming and a penchant for clarity in code, with Rust being his go-to -->
<!-- tool. He's got this knack for building software that runs as close to the -->
<!-- metal as possible, extracting every bit of performance he can get.  -->
<!---->
<!-- One of his remarkable feats is constructing intricate drum machines entirely -->
<!-- from scratch, a testament to his understanding of complex systems and -->
<!-- algorithmic creativity. He’s not just a coder; he’s a craftsman. </p> </div> -->
<!-- </div> -->
<!---->
<div style="display: flex; margin-bottom: 4em;"> <div style="display: flex;
flex-direction: column; flex: 0 0 20%;"> <img src="images/team/mikko.webp"
alt="Mikko" style="width: 100%; margin-top: 1em; object-fit: cover;">
<center><h3 id="mikko"><a class="header" href="#mikko">Mikko</a></h3></center> </div> <div style="margin-left: 1em;"> <p> With
over 40 years of diverse and significant technical experience, Mikko is the
ideal advisor for creating Internet and networking infrastructure at Rotko
Networks. His expertise spans across all technical layers, from layer 1
hardware programming to layer 7 application interfaces, making him an essential
asset, especially considering the CEO's top-to-bottom learning path.
<p>His technical journey began in the mid-1980s at Nokia Mobile Phones, where he
hand-wrote UI with NEC's Assembly without a compiler, demonstrating a profound
understanding of low-level programming. His most notable achievement at Nokia
was the invention of the menu buttons on the display, a pioneering feature that
has become ubiquitous in mobile user interfaces.</p>
<p>One of the most noteworthy roles was serving as the IT Manager at the
University of Turku, where he was responsible for managing and upgrading the
entire IT infrastructure, including modern Data Center and network services. He
implemented crucial projects like Datacenter upgrades, WLAN enhancements,
network topology redesigns, and developed vital services such as private cloud
storage and learning platforms.</p>
<p>His profound knowledge of technologies like Novell NetWare, AD, MS Exchange,
backup and storage systems, IIS, ISA Firewall, DNS, and DHCP, coupled with his
broad understanding of both low-level and high-level systems, makes him a
tremendous asset for Rotko Networks. His broad and deep technical expertise
ensures he will provide significant guidance in building a robust and efficient
Internet and networking infrastructure. </p> </div> </div></p>
<style>
  h1 {text-align: center;}
  h3 {
      text-align: center;
      font-size: 1.2em;
      padding: 5px;
      margin: 10px;
  }
</style>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
