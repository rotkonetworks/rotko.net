<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Rotko Networks infrastructure</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Rotko Networks infrastructure</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>At Rotko Networks, our commitment to powering the development
and deployment of decentralized applications within the Web3 ecosystem is
unwavering. In achieving this, we are dedicated to providing an infrastructure
that encapsulates robust hardware, optimized to deliver top-tier performance
while ensuring minimal memory latency.</p>
<p>Our approach to building this infrastructure transcends the conventional focus
on computational capabilities. We place a similar, if not greater, emphasis on
storage solutions, integrating high-speed data access systems that boast
minimal latency. Furthermore, we integrate technology that guarantees data
integrity, adding another layer of trust to our operations.</p>
<p>Our server's network robustness is another aspect we can't overemphasize. It's
equipped with cutting-edge features that ensure seamless, swift, and efficient
data transfer. This is a key facet of our system, as it contributes
significantly to a smooth, unbroken service for end users.</p>
<p>Recognizing the heavy-duty nature of blockchain operations, we've carefully
selected components for our server that not only meet the demand for
resource-intensive applications but also have the capacity to exceed these
requirements.</p>
<p>In the following sections, we'll delve into the specifics of the hardware that
forms the backbone of our infrastructure, discussing their features,
capabilities, and the reasons they've been chosen for our server operations.</p>
<p>Join us as we take a detailed look at our server infrastructure, designed and
engineered to promote growth and foster innovation in the Web3 ecosystem.
Prepare for an insightful journey into the hardware specifics that power Rotko
Networks. Stay tuned!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hardware-infrastructure"><a class="header" href="#hardware-infrastructure">Hardware Infrastructure</a></h1>
<p><img src="./images/rack/rotko_rack_front.jpeg" alt="Machines at rack" /></p>
<p>Our primary goal is to deliver a high-performance and secure blockchain
infrastructure that fosters trust and reliability. We aim to achieve this by
focusing on the critical elements of blockchain technology - namely, ensuring
high single-thread performance for validator services, and low latency for RPC
services, among others.</p>
<h2 id="network-architecture"><a class="header" href="#network-architecture">Network Architecture</a></h2>
<p><img src="./images/hardware/network_topology.svg" alt="Network Diagram" /></p>
<p>For reference, our network topology includes the following components:</p>
<h3 id="upstream-providers"><a class="header" href="#upstream-providers">Upstream Providers</a></h3>
<ul>
<li>BKNIX, AMS-IX (Bangkok, Hong Kong, Europe)</li>
<li>HGC IPTX (Hong Kong, Singapore)</li>
<li>Backup circuits: HGC IPTX TH-HK and TH-SG</li>
</ul>
<h3 id="edge-routers"><a class="header" href="#edge-routers">Edge Routers</a></h3>
<ul>
<li>BKK00 (MikroTik CRR2216)</li>
<li>BKK20 (MikroTik CRR2216)</li>
</ul>
<h3 id="core-routers"><a class="header" href="#core-routers">Core Routers</a></h3>
<ul>
<li>BKK10 (MikroTik CRR2116) - VRRP Primary</li>
<li>BKK50 (MikroTik CCR2004) - VRRP Fallback</li>
</ul>
<h3 id="storage-infrastructure"><a class="header" href="#storage-infrastructure">Storage Infrastructure</a></h3>
<ul>
<li>High-speed switches: BKK30, BKK40 (100G)</li>
<li>Storage servers: BKK06 (EPYC 7713), BKK07 (EPYC 9654), BKK08 (EPYC 7742)</li>
<li>HA Quorum Network for redundancy</li>
</ul>
<h3 id="validator-nodes"><a class="header" href="#validator-nodes">Validator Nodes</a></h3>
<ul>
<li>BKK01, BKK02 (Ryzen 5600G)</li>
<li>BKK03 (Ryzen 7950X3D)</li>
<li>BKK04 (Ryzen 9950X)</li>
<li>BKK09 (Ryzen 7945HX)</li>
<li>BKK11, BKK13 (Ryzen 5950X)</li>
<li>BKK12 (Ryzen 7950X)</li>
</ul>
<h3 id="management"><a class="header" href="#management">Management</a></h3>
<ul>
<li>BKK60 (MikroTik CRS354) for IPMI access to all devices</li>
</ul>
<h2 id="performance-considerations"><a class="header" href="#performance-considerations">Performance Considerations</a></h2>
<p>Validator services in blockchain infrastructures demand high single-thread performance due to the nature of their operations. Validators, in essence, validate transactions and blocks within the blockchain. They act as the arbitrators of the system, ensuring the veracity and accuracy of the information being added to the blockchain. This is an intensive process that involves complex computations and encryption, thus requiring a high-performance, single-thread system to maintain efficiency.</p>
<p>The low latency required for our RPC services is another vital factor in our hardware design. RPC, or Remote Procedure Call, is a protocol that allows a computer program to execute a procedure in another address space, usually on another network, without the programmer needing to explicitly code for this functionality. In simpler terms, it's a way for systems to talk to each other. Low latency in these operations is crucial to ensure a smooth and seamless dialogue between various systems within the blockchain. A delay or a lag in these communications can cause bottlenecks, leading to a slowdown in overall operations.</p>
<h2 id="hardware-specifications"><a class="header" href="#hardware-specifications">Hardware Specifications</a></h2>
<p>The hardware components and their configurations we have selected are
specifically designed to address these needs. By leveraging advanced technologies
like the AMD Ryzen 9 7950X for its superior single-thread performance, DDR5
memory for fast data retrieval, and NVMe SSDs for their exceptional speed in
data storage and retrieval, we aim to provide an infrastructure that can
effectively handle the demands of blockchain technology.</p>
<h3 id="key-components"><a class="header" href="#key-components">Key Components</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Node Type</th><th>Processor</th><th>Memory</th><th>Storage</th><th>Purpose</th></tr></thead><tbody>
<tr><td>Validator</td><td>AMD Ryzen 7950X/5950X</td><td>DDR5</td><td>NVMe SSDs</td><td>Transaction validation</td></tr>
<tr><td>Storage</td><td>AMD EPYC 7713/9654/7742</td><td>High-capacity</td><td>Redundant arrays</td><td>Blockchain data storage</td></tr>
<tr><td>Edge</td><td>MikroTik CRR2216</td><td>-</td><td>-</td><td>Network edge routing</td></tr>
<tr><td>Core</td><td>MikroTik CRR2116/CCR2004</td><td>-</td><td>-</td><td>VRRP redundant core routing</td></tr>
</tbody></table>
</div>
<h2 id="scalability-and-resilience"><a class="header" href="#scalability-and-resilience">Scalability and Resilience</a></h2>
<p>Our infrastructure is also designed to ensure scalability and flexibility. As
the demands of the blockchain ecosystem grow, so too should our capacity to
handle these increasing demands. Hence, our hardware design also incorporates
elements that will allow us to easily scale up our operations when necessary.</p>
<p>The network features full redundancy with:</p>
<ul>
<li>Cross-connected edge routers with multiple upstream providers</li>
<li>Geographic diversity with connections to Hong Kong, Singapore, Bangkok, and Europe</li>
<li>Backup IPTX circuits for fallback connectivity</li>
<li>VRRP router redundancy for core routing</li>
<li>High-speed 100G storage networking</li>
<li>HA Quorum Network for storage resilience</li>
</ul>
<p>In essence, our hardware is purpose-built to deliver high-performance blockchain
operations that are secure, reliable, and capable of scaling with the demands of
the evolving blockchain ecosystem.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rack"><a class="header" href="#rack">Rack</a></h1>
<p><img src="./images/rack/rack_front.webp" alt="Rack from front" /></p>
<p>At the heart of our operations is a meticulously designed server
infrastructure, securely housed within ten units of a top-tier 42U rack.
Providing approximately 230 liters of computational capacity, our setup is
powered by a robust dual 2kW, 220V power system that underlines our commitment
to delivering superior performance and steadfast availability.</p>
<p>Our server infrastructure is hosted within a carrier-neutral facility,
strategically enabling seamless and robust connections with a broad range of
service providers, ISPs, and cloud platforms. This network versatility fosters
enhanced performance and unyielding reliability, thus ensuring a consistently
superior user experience.</p>
<p>More than a mere assembly of servers, our setup is a comprehensively designed
ecosystem meticulously architected to achieve maximum efficiency. Leveraging
location flexibility, our infrastructure can be configured across multiple
strategic points to guarantee optimal network connectivity and minimized
latency.</p>
<p>Direct peering arrangements with major local and international internet
exchanges ensure broad bandwidth and unwavering connectivity. Coupled with
floor and inter-floor cross-connect cabling, we have fostered a well-connected
network capable of facilitating smooth data transfer between servers and racks.</p>
<p>Our infrastructure is further enhanced with a suite of cutting-edge networking
devices, including industry-leading routers and switches. Services such as KVM
over IP for remote server management, alongside on-site technical support and
smart hands as a service, amplify our operational efficiency.</p>
<p>To guarantee optimal performance and longevity of our hardware, a tightly
regulated environment is maintained. Our facility features controlled air
temperature and humidity, ensuring the hardware operates within optimal
conditions. Additionally, we have installed a UPS and backup power generators
to mitigate the risk of power interruptions.</p>
<p>Security is paramount. Our facility, with ISO 27001 certification, employs a
rigorous system of access control with logging and video surveillance, ensuring
a safe and secure environment for our infrastructure. Additional safety
measures such as fire alarms and smoke protection systems are in place to
protect our hardware. A dedicated network operations center, operational 24/7,
stands ready to promptly address any technical concerns.</p>
<p>Our setup also incorporates a raised floor design, an element that demonstrates
our meticulous attention to detail. This design improves air distribution and
cable management, leading to thermal efficiency and a well-organized
operational environment.</p>
<h3 id="links"><a class="header" href="#links">Links</a></h3>
<ul>
<li><a href="https://www.rittal.com/com-en/products/PG0900ZUBEHOER1/PG0919ZUBEHOER1">Rittal 42U</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="networking-hardware-overview"><a class="header" href="#networking-hardware-overview">Networking Hardware Overview</a></h2>
<h3 id="edge-routers-1"><a class="header" href="#edge-routers-1">Edge Routers</a></h3>
<ul>
<li><strong>CRR2216 (bkk10)</strong>: Edge router for Bangkok site.</li>
<li><strong>CRR2116 (bkk20)</strong>: Edge router for Bangkok site.</li>
</ul>
<h3 id="core-routers-1"><a class="header" href="#core-routers-1">Core Routers</a></h3>
<ul>
<li><strong>CRR2004 (bkk50)</strong>: Core router for Bangkok site.</li>
</ul>
<h3 id="high-availability-ha-switches"><a class="header" href="#high-availability-ha-switches">High Availability (HA) Switches</a></h3>
<ul>
<li><strong>CSR504 (bkk30)</strong>: HA switch for Bangkok site.</li>
<li><strong>CSR504 (bkk40)</strong>: HA switch for Bangkok site.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bkk01---validator"><a class="header" href="#bkk01---validator">BKK01 - Validator</a></h1>
<p><img src="./images/bkk01/bkk01.webp" alt="BKK01" /></p>
<h2 id="cpu"><a class="header" href="#cpu">CPU</a></h2>
<p><a href="https://www.amd.com/en/products/cpu/amd-ryzen-5-5600g">AMD RYZEN 5 5600G 6-Core 3.7 GHz (4.6 GHz Max Boost) Socket AM4 65W</a></p>
<p>The heart of our operations, the 6-core AMD RYZEN 5 5600G, offers excellent
performance for blockchain applications. It provides robust and reliable
service even under demanding workloads.</p>
<h2 id="cpu-cooler"><a class="header" href="#cpu-cooler">CPU Cooler</a></h2>
<p><a href="https://aliexpress.com/item/1005004050053958.html">COOLSERVER P32 CPU Cooler</a></p>
<p>For managing the thermal performance of our CPU, we use the COOLSERVER P32 CPU
Cooler. It's equipped with high-quality heatpipes and can handle the Ryzen 5
5600G even under intensive workloads.</p>
<h2 id="ram"><a class="header" href="#ram">RAM</a></h2>
<p><a href="https://www.hynix.com/eng/products/drammodule.jsp">2x32GB Hynix DDR4 3200MHz</a></p>
<p>Our setup uses 2 modules of 32GB DDR4 RAM from Hynix, providing us with ample
bandwidth and ensuring smooth server operations.</p>
<h2 id="motherboard"><a class="header" href="#motherboard">Motherboard</a></h2>
<p><a href="https://www.msi.com/Motherboard/A550M-ITX-AC">MSI A550M-ITX/ac</a></p>
<p>The MSI A550M-ITX/ac motherboard is an engineering marvel that brings together
the performance of the consumer world with the dependability of server-grade
hardware. This motherboard supports the AMD Ryzen series CPUs and DDR4 memory,
promising speed, reliability, and scalability.</p>
<h2 id="storage"><a class="header" href="#storage">Storage</a></h2>
<p><a href="https://www.monsterdigital.com/">4x 2TB NVME Monster Storage 3D TLC SSD - R:7400Mb/s W:6,600MB/s</a></p>
<p>For storage, we use 4 Monster Storage 3D TLC NVMe SSDs, each of 2TB capacity.
These high-speed SSDs are known for their exceptional performance and
efficiency in data storage and retrieval.</p>
<h2 id="power-unit"><a class="header" href="#power-unit">Power unit</a></h2>
<p><a href="https://lazada.co.th/products/i4470266272-s18039576717.html">400W PSU</a></p>
<p>This second-hand case comes with an integrated 400W Power Supply Unit. The PSU
is essential for providing power to your internal components. It converts the
power from the wall outlet into a usable form for your computer's components.
Despite being second-hand, the PSU is in good condition and will provide a
reliable power source for your system.</p>
<h2 id="chassis"><a class="header" href="#chassis">Chassis</a></h2>
<p><a href="lazada.co.th/products/i4470266272-s18039576717.html">Mini-ITX 1U chassis</a></p>
<p>This second-hand case comes with an integrated 400W Power Supply Unit. The PSU
is essential for providing power to your internal components. It converts the
power from the wall outlet into a usable form for your computer's components.
Despite being second-hand, the PSU is in good condition and will provide a
reliable power source for your system.</p>
<h2 id="kvm"><a class="header" href="#kvm">KVM</a></h2>
<p><a href="https://aliexpress.com/item/1005003262886521.html">BliKVM v1 CM4 "KVM over IP" Raspberry Pi CM4 HDMI CSI PiKVM v3</a></p>
<p>A modern, highly secure, and programmable KVM solution running on Arch Linux,
which provides exceptional control over your server, akin to physical access.
With an easy build process, it boasts minimal video latency (about 100 ms) and
a lightweight Web UI accessible from any browser. It emulates mass storage
drives and allows ATX power management, secure data transmission with SSL, and
local Raspberry Pi health monitoring. You can also manage GPIO and USB relays
via its web interface. The PiKVM OS is production-ready, supports a read-only
filesystem to prevent memory card damage, offers extensible authorization
methods, and enables automation with macros.</p>
<h3 id="features-of-pikvm"><a class="header" href="#features-of-pikvm">Features of PiKVM:</a></h3>
<ul>
<li><strong>Fully-featured and modern IP-KVM:</strong> PiKVM is up-to-date with the latest KVM technologies.</li>
<li><strong>Easy to build:</strong> PiKVM offers ready-to-use OS images and a friendly build environment.</li>
<li><strong>Low video latency:</strong> With approximately 100 milliseconds of video latency, it provides
one of the smallest delays of all existing solutions.</li>
<li><strong>Lightweight Web UI and VNC:</strong> The user interface is accessible through any browser,
with no proprietary clients required. VNC is also supported.</li>
<li><strong>Mass Storage Drive Emulation:</strong> On Raspberry Pi 4 and ZeroW, PiKVM can emulate a virtual
CD-ROM or Flash Drive. A live image can be uploaded to boot the attached server.</li>
<li><strong>ATX power management:</strong> PiKVM supports simple circuits for controlling the power
button of the attached server.</li>
<li><strong>Security:</strong> PiKVM is designed with strong security, using SSL to protect traffic.</li>
<li><strong>Local monitoring:</strong> PiKVM monitors the health of the Raspberry Pi board and provides
warnings for potential issues.</li>
<li><strong>GPIO management:</strong> Control GPIO and USB relays via the web interface.</li>
<li><strong>Production-ready:</strong> PiKVM OS is based on Arch Linux ARM and can be customized for any needs.</li>
<li><strong>Read-only filesystem:</strong> The OS runs in read-only mode to prevent damage to the memory
card due to a sudden power outage.</li>
<li><strong>Extensible authorization methods:</strong> PiKVM supports integration into existing
authentication infrastructure.</li>
<li><strong>Macro scripts:</strong> Repetitive actions can be automated with keyboard &amp; mouse action macros.</li>
<li><strong>Open &amp; free:</strong> PiKVM is open-source software, released under the GPLv3.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bkk02---validator-2"><a class="header" href="#bkk02---validator-2">BKK02 - Validator 2</a></h1>
<p><img src="./images/bkk02/bkk02.webp" alt="BKK01" /></p>
<h2 id="cpu-1"><a class="header" href="#cpu-1">CPU</a></h2>
<p><a href="https://www.amd.com/en/products/cpu/amd-ryzen-5-5600g">AMD RYZEN 5 5600G 6-Core 3.7 GHz (4.6 GHz Max Boost) Socket AM4 65W</a></p>
<p>The heart of our operations, the 6-core AMD RYZEN 5 5600G, offers excellent
performance for blockchain applications. It provides robust and reliable
service even under demanding workloads.</p>
<h2 id="cpu-cooler-1"><a class="header" href="#cpu-cooler-1">CPU Cooler</a></h2>
<p><a href="https://aliexpress.com/item/1005004050053958.html">COOLSERVER P32 CPU Cooler</a></p>
<p>For managing the thermal performance of our CPU, we use the COOLSERVER P32 CPU
Cooler. It's equipped with high-quality heatpipes and can handle the Ryzen 5
5600G even under intensive workloads.</p>
<h2 id="ram-1"><a class="header" href="#ram-1">RAM</a></h2>
<p><a href="https://www.amazon.co.jp/-/en/v-color-Skywalker-PC4-25600-Heatsink-TO432G32D816ASPSXKN/dp/B08PPDDPFY">2x32GB Hynix DDR4 3200MHz</a></p>
<p>Our setup uses 2 modules of 32GB DDR4 RAM from Hynix, providing us with ample
bandwidth and ensuring smooth server operations.</p>
<h2 id="motherboard-1"><a class="header" href="#motherboard-1">Motherboard</a></h2>
<p><a href="https://www.msi.com/Motherboard/A520M-ITX-AC">MSI A520M-ITX/ac</a></p>
<p>The MSI A520M-ITX/ac motherboard is an engineering marvel that brings together
the performance of the consumer world with the dependability of server-grade
hardware. This motherboard supports the AMD Ryzen series CPUs and DDR4 memory,
promising speed, reliability, and scalability.</p>
<h2 id="storage-1"><a class="header" href="#storage-1">Storage</a></h2>
<p><a href="https://www.amazon.co.jp/-/en/dp/B0BZCVVKNY">4x 2TB NVME Monster Storage 3D TLC SSD - R:7400Mb/s W:6,600MB/s</a></p>
<p>For storage, we use 4 Monster Storage 3D TLC NVMe SSDs, each of 2TB capacity.
These high-speed SSDs are known for their exceptional performance and
efficiency in data storage and retrieval. Downside is that lacks DRAM for caching.</p>
<h2 id="power-unit-1"><a class="header" href="#power-unit-1">Power unit</a></h2>
<p><a href="https://lazada.co.th/products/i4470266272-s18039576717.html">400W PSU</a></p>
<p>This second-hand case comes with an integrated 400W Power Supply Unit. The PSU
is essential for providing power to your internal components. It converts the
power from the wall outlet into a usable form for your computer's components.
Despite being second-hand, the PSU is in good condition and will provide a
reliable power source for your system.</p>
<h2 id="chassis-1"><a class="header" href="#chassis-1">Chassis</a></h2>
<p><a href="lazada.co.th/products/i4470266272-s18039576717.html">Mini-ITX 1U chassis</a></p>
<p>This second-hand case comes with an integrated 400W Power Supply Unit. The PSU
is essential for providing power to your internal components. It converts the
power from the wall outlet into a usable form for your computer's components.
Despite being second-hand, the PSU is in good condition and will provide a
reliable power source for your system.</p>
<h2 id="kvm-1"><a class="header" href="#kvm-1">KVM</a></h2>
<p><a href="https://aliexpress.com/item/1005003262886521.html">BliKVM v1 CM4 "KVM over IP" Raspberry Pi CM4 HDMI CSI PiKVM v3</a></p>
<p>A modern, highly secure, and programmable KVM solution running on Arch Linux,
which provides exceptional control over your server, akin to physical access.
With an easy build process, it boasts minimal video latency (about 100 ms) and
a lightweight Web UI accessible from any browser. It emulates mass storage
drives and allows ATX power management, secure data transmission with SSL, and
local Raspberry Pi health monitoring. You can also manage GPIO and USB relays
via its web interface. The PiKVM OS is production-ready, supports a read-only
filesystem to prevent memory card damage, offers extensible authorization
methods, and enables automation with macros.</p>
<h3 id="features-of-pikvm-1"><a class="header" href="#features-of-pikvm-1">Features of PiKVM:</a></h3>
<ul>
<li><strong>Fully-featured and modern IP-KVM:</strong> PiKVM is up-to-date with the latest KVM technologies.</li>
<li><strong>Easy to build:</strong> PiKVM offers ready-to-use OS images and a friendly build environment.</li>
<li><strong>Low video latency:</strong> With approximately 100 milliseconds of video latency, it provides
one of the smallest delays of all existing solutions.</li>
<li><strong>Lightweight Web UI and VNC:</strong> The user interface is accessible through any browser,
with no proprietary clients required. VNC is also supported.</li>
<li><strong>Mass Storage Drive Emulation:</strong> On Raspberry Pi 4 and ZeroW, PiKVM can emulate a virtual
CD-ROM or Flash Drive. A live image can be uploaded to boot the attached server.</li>
<li><strong>ATX power management:</strong> PiKVM supports simple circuits for controlling the power
button of the attached server.</li>
<li><strong>Security:</strong> PiKVM is designed with strong security, using SSL to protect traffic.</li>
<li><strong>Local monitoring:</strong> PiKVM monitors the health of the Raspberry Pi board and provides
warnings for potential issues.</li>
<li><strong>GPIO management:</strong> Control GPIO and USB relays via the web interface.</li>
<li><strong>Production-ready:</strong> PiKVM OS is based on Arch Linux ARM and can be customized for any needs.</li>
<li><strong>Read-only filesystem:</strong> The OS runs in read-only mode to prevent damage to the memory
card due to a sudden power outage.</li>
<li><strong>Extensible authorization methods:</strong> PiKVM supports integration into existing
authentication infrastructure.</li>
<li><strong>Macro scripts:</strong> Repetitive actions can be automated with keyboard &amp; mouse action macros.</li>
<li><strong>Open &amp; free:</strong> PiKVM is open-source software, released under the GPLv3.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bkk03---bootnoderpc"><a class="header" href="#bkk03---bootnoderpc">BKK03 - Bootnode/RPC</a></h1>
<p><img src="./images/bkk03/bkk03_internals.webp" alt="BKK03" /></p>
<h2 id="cpu-amd-ryzen-9-7950x3d-16-core-32-thread-5nm"><a class="header" href="#cpu-amd-ryzen-9-7950x3d-16-core-32-thread-5nm">CPU: AMD Ryzen™ 9 7950X3D 16-Core 32-Thread 5NM</a></h2>
<h3 id="product-link"><a class="header" href="#product-link"><a href="https://www.amd.com/en/products/apu/amd-ryzen-9-7950x3d">Product Link</a></a></h3>
<p>The AMD Ryzen 9 7950X3D, with its 16-core 32-thread architecture, is the
driving force behind our server's high performance. The CPU's multi-core design
and high clock speeds are specifically optimized for blockchain applications,
ensuring efficient chain synchronization and reliable endpoint service.</p>
<p>Featuring advanced technologies like PCI Express® 5.0 and DDR5, the CPU
provides rapid data transfer, essential for low-latency blockchain
transactions. The large 128MB L3 cache further bolsters performance by
facilitating quick access to frequently used data, enhancing efficiency.</p>
<h2 id="cpu-cooling-system"><a class="header" href="#cpu-cooling-system">CPU Cooling System</a></h2>
<p><img src="./images/bkk03/am5socket.webp" alt="BKK03" /></p>
<h3 id="coolserver-p32-cpu-cooler"><a class="header" href="#coolserver-p32-cpu-cooler"><a href="https://aliexpress.com/item/1005004050053958.html">COOLSERVER P32 CPU Cooler</a></a></h3>
<h3 id="thermalright-aluminium-alloy-am5-frame"><a class="header" href="#thermalright-aluminium-alloy-am5-frame"><a href="https://aliexpress.com/item/1005004904430608.html">Thermalright aluminium alloy AM5 frame</a></a></h3>
<p>Cooling efficiency is paramount in maintaining stable performance. Our server
utilizes the COOLSERVER P32 AM5 Server CPU Cooler, in conjunction with the
Thermalright AM5 frame, to maximize cooling capabilities.</p>
<h2 id="motherboard-asrock-rack-b650d4u-2l2tbcmlga-1718-dual-10g-lan"><a class="header" href="#motherboard-asrock-rack-b650d4u-2l2tbcmlga-1718-dual-10g-lan">Motherboard: AsRock Rack B650D4U-2L2T/BCM(LGA 1718) Dual 10G LAN</a></h2>
<h3 id="product-link-1"><a class="header" href="#product-link-1"><a href="https://www.amazon.com/dp/B0BXRFHDQT">Product Link</a></a></h3>
<p>This Micro-ATX motherboard stands as a testament to AsRock's engineering
prowess, blending high-performance consumer technology with the robustness of
server-grade hardware. The board offers full PCIe 5.0 support and features up
to 7 M.2 slots for NVMe storage, enhancing data transfer speeds. Its
compatibility with DDR5 ECC UDIMM memory further underlines its suitability for
demanding server applications.</p>
<h2 id="memory-4x-32gb-micron-ddr5-udimmecc-4800mhz"><a class="header" href="#memory-4x-32gb-micron-ddr5-udimmecc-4800mhz">Memory: 4x 32GB MICRON DDR5 UDIMM/ECC 4800MHz</a></h2>
<h3 id="product-link-2"><a class="header" href="#product-link-2"><a href="https://www.amazon.com/Server-Memory-Module-4800MHz-MTC20C2085S1EC48BA1R">Product Link</a></a></h3>
<p>Our selection of server-grade DDR5 memory modules provides substantial
bandwidth for smooth server operations. Equipped with ECC technology, these
modules maintain data integrity, ensuring the reliability of our transactions.</p>
<h2 id="ssd-expansion-nvme-pcie-raid-adapter-4-ports-nvme-ssd-to-pci-e-40-x16"><a class="header" href="#ssd-expansion-nvme-pcie-raid-adapter-4-ports-nvme-ssd-to-pci-e-40-x16">SSD Expansion: NVMe PCIe RAID Adapter 4 Ports NVME SSD to PCI-E 4.0 X16</a></h2>
<p>This expansion card plays a vital role in our data management strategy by
enabling the integration of top-tier NVMe SSDs. It contributes to our server's
responsiveness by facilitating faster access to stored data.</p>
<h2 id="storage-5x-2tb-hanye-me70-nvme-pci-e40-7200mbs"><a class="header" href="#storage-5x-2tb-hanye-me70-nvme-pci-e40-7200mbs">Storage: 5x 2TB Hanye ME70 NVMe PCI-E4.0 7200mb/s</a></h2>
<h3 id="product-link-3"><a class="header" href="#product-link-3"><a href="https://www.amazon.co.jp/Hanye-%E3%80%90PS5%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E6%B8%88%E3%81%BF%E3%80%91-PCIe-Gen4x4-DRAM%E6%90%AD%E8%BC%89/dp/B0B58JXNXG">Product Link</a></a></h3>
<p>Our system's storage is equipped with 2TB High-Performance ME70 M.2 NVMe SSDs,
providing 12TB of high-speed storage. The SSDs' Gen4 PCIe tech and LDPC error
correction ensure quick data access and integrity.</p>
<h2 id="benchmarks"><a class="header" href="#benchmarks">Benchmarks</a></h2>
<pre><code>2023-07-31 13:55:08 Running machine benchmarks...
2023-07-31 13:55:34
+----------+----------------+-------------+-------------+-------------------+
| Category | Function       | Score       | Minimum     | Result            |
+===========================================================================+
| CPU      | BLAKE2-256     | 1.56 GiBs   | 783.27 MiBs | ✅ Pass (203.8 %) |
|----------+----------------+-------------+-------------+-------------------|
| CPU      | SR25519-Verify | 788.10 KiBs | 560.67 KiBs | ✅ Pass (140.6 %) |
|----------+----------------+-------------+-------------+-------------------|
| Memory   | Copy           | 27.73 GiBs  | 11.49 GiBs  | ✅ Pass (241.3 %) |
|----------+----------------+-------------+-------------+-------------------|
| Disk     | Seq Write      | 2.99 GiBs   | 950.00 MiBs | ✅ Pass (322.0 %) |
|----------+----------------+-------------+-------------+-------------------|
| Disk     | Rnd Write      | 1.29 GiBs   | 420.00 MiBs | ✅ Pass (313.4 %) |
+----------+----------------+-------------+-------------+-------------------+
From 5 benchmarks in total, 5 passed and 0 failed (10% fault tolerance).
2023-07-31 13:55:34 The hardware meets the requirements
Read Latency Statistics in nanoseconds:
-------------------------
Minimum: 520 ns
Maximum: 22540 ns
Mean: 914.595734 ns
Standard Deviation: 222.087316 ns
Read IOPS: 953140.861971
</code></pre>
<h2 id="chassis-1u-case-tgc-h1-400"><a class="header" href="#chassis-1u-case-tgc-h1-400">Chassis: 1U Case, TGC H1-400</a></h2>
<h3 id="product-link-4"><a class="header" href="#product-link-4"><a href="https://www.pcgallery.co.th/product/tgc-h1-400/">Product Link</a></a></h3>
<h2 id="power-supply-unit-400w-compuware-80-plus-platinum-psu"><a class="header" href="#power-supply-unit-400w-compuware-80-plus-platinum-psu">Power Supply Unit: 400W Compuware 80 PLUS Platinum PSU</a></h2>
<h3 id="vendor-link"><a class="header" href="#vendor-link"><a href="https://www.pcgallery.co.th/">Vendor Link</a></a></h3>
<h2 id="kvm-asrock-rack-bcmipmi"><a class="header" href="#kvm-asrock-rack-bcmipmi">KVM: Asrock Rack BCM/IPMI</a></h2>
<p>The AsRock Rack motherboard includes a BCM for remote control, offering robust
management capabilities.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="bkk04---bootnoderpc"><a class="header" href="#bkk04---bootnoderpc">BKK04 - Bootnode/RPC</a></h2>
<p><img src="./images/bkk04/bkk04_internals.webp" alt="BKK04" /></p>
<h3 id="cpu-2"><a class="header" href="#cpu-2">CPU</a></h3>
<p><strong>Model:</strong> <a href="https://www.amd.com/en/products/cpu/amd-ryzen-9-7950x">AMD Ryzen 9 7950X R9 7950X CPU Processor 16-Core 32-Thread 5NM L3=64M Socket AM5</a></p>
<ul>
<li><strong>Core Count:</strong> 16 cores</li>
<li><strong>Technology:</strong> 5NM process</li>
<li><strong>L3 Cache:</strong> 64MB</li>
<li><strong>PCI Express:</strong> 5.0</li>
<li><strong>Memory Support:</strong> DDR5</li>
</ul>
<p><strong>Capabilities:</strong> Designed to manage multiple tasks with ease, such as running
multiple networks simultaneously, efficient blockchain sync, and low latency
transactions.</p>
<h4 id="cpu-cooler-2"><a class="header" href="#cpu-cooler-2">CPU Cooler</a></h4>
<ul>
<li><strong>Model:</strong> <a href="https://aliexpress.com/item/1005004850411911.html">COOLSERVER R64 AM5 Server CPU Cooler</a></li>
<li><strong>Design:</strong> 4 high-quality heatpipes, 150W TDP, double ball bearing</li>
<li><strong>Enhancement:</strong> <a href="https://aliexpress.com/item/1005004904430608.html">Thermalright aluminium alloy AM5 frame</a></li>
</ul>
<h3 id="motherboard-2"><a class="header" href="#motherboard-2">Motherboard</a></h3>
<p><img src="./images/bkk04/bkk04_motherboard_new.webp" alt="Motherboard as new" />
<strong>Model:</strong> <a href="https://www.asrockrack.com/general/productdetail.asp?Model=B650D4U#Specifications">AsRock Rack B650D4U(LGA 1718)</a></p>
<ul>
<li><strong>Form Factor:</strong> Micro-ATX</li>
<li><strong>Memory Support:</strong> DDR5 ECC UDIMM</li>
<li><strong>PCIe Slots:</strong> Full PCIe 5.0 support, M.2 slot, x16 slot, and x4 slot</li>
<li><strong>Storage Support:</strong> Up to 7 M.2 slots</li>
</ul>
<h3 id="memory"><a class="header" href="#memory">Memory</a></h3>
<p><strong>Model:</strong> <a href="https://www.amazon.com/Server-Memory-Module-4800MHz-MTC20C2085S1EC48BA1R">4x Server Memory Module|MICRON|DDR5|32GB|UDIMM/ECC|4800MHz|CL 40|1.1V|MTC20C2085S1EC48BA1R</a></p>
<ul>
<li><strong>Capacity:</strong> 4 modules of 32GB DDR5 each</li>
<li><strong>Technology:</strong> ECC for increased data integrity</li>
<li><strong>Performance:</strong> Low-latency</li>
</ul>
<h3 id="ssd-expansion-cards"><a class="header" href="#ssd-expansion-cards">SSD Expansion Cards</a></h3>
<p><img src="./images/bkk04/bkk04_motherboard.webp" alt="Extension card" /></p>
<ul>
<li><strong>Model:</strong> NVMe SSD Expansion Card NVMe PCIe RAID Adapter 4 Ports NVME SSD To
PCI-E 4.0 X16 Expansion Card</li>
</ul>
<h3 id="storage-2"><a class="header" href="#storage-2">Storage</a></h3>
<ul>
<li><strong>Primary Storage:</strong> 6x 2TB Samsung SSD Pro 980</li>
<li><strong>Backup Storage:</strong> 3x 16TB disks in ZFS RAIDZ (32TB total)</li>
</ul>
<h3 id="benchmarks-1"><a class="header" href="#benchmarks-1">Benchmarks</a></h3>
<pre><code>``+----------+----------------+-------------+-------------+-------------------+
| Category | Function       | Score       | Minimum     | Result            |
+===========================================================================+
| CPU      | BLAKE2-256     | 1.65 GiBs   | 783.27 MiBs | ✅ Pass (215.8 %) |
|----------+----------------+-------------+-------------+-------------------|
| CPU      | SR25519-Verify | 832.82 KiBs | 560.67 KiBs | ✅ Pass (148.5 %) |
|----------+----------------+-------------+-------------+-------------------|
| Memory   | Copy           | 16.99 GiBs  | 11.49 GiBs  | ✅ Pass (147.9 %) |
|----------+----------------+-------------+-------------+-------------------|
| Disk     | Seq Write      | 2.09 GiBs   | 950.00 MiBs | ✅ Pass (225.3 %) |
|----------+----------------+-------------+-------------+-------------------|
| Disk     | Rnd Write      | 885.35 MiBs | 420.00 MiBs | ✅ Pass (210.8 %) |
+----------+----------------+-------------+-------------+-------------------+
From 5 benchmarks in total, 5 passed and 0 failed (10% fault tolerance).
2023-08-03 00:49:00 The hardware meets the requirements
Read Latency Statistics in nanoseconds:
-------------------------
Minimum: 460 ns
Maximum: 535014 ns
Mean: 968.885148 ns
Standard Deviation: 280.737214 ns
99.99th Percentile Read Latency: 350 ns
-------------------------
Read IOPS: 906996.500117

The read latency meets the 2000 ns and lower QoS requirement
</code></pre>
<h3 id="chassis-2"><a class="header" href="#chassis-2">Chassis</a></h3>
<ul>
<li><strong>Model:</strong> <a href="https://www.pcgallery.co.th/product/tgc-24550-3-0/">TGC-24550 2U</a></li>
<li><strong>Design:</strong> 2U rackmount, efficient airflow design</li>
</ul>
<h3 id="power-supply-unit"><a class="header" href="#power-supply-unit">Power Supply Unit</a></h3>
<ul>
<li><strong>Model:</strong> T.F.SKYWINDINTL 1U MINI Flex ATX Power Supply Unit 400W Modular
PSU</li>
<li><strong>Capacity:</strong> 400W</li>
<li><strong>Features:</strong> Built-in cooling fan, overcurrent, overvoltage, and
short-circuit protection</li>
</ul>
<h3 id="kvm-2"><a class="header" href="#kvm-2">KVM</a></h3>
<ul>
<li><strong>Model:</strong> Asrock Rack BCM/IPMI for remote control</li>
</ul>
<h3 id="summary"><a class="header" href="#summary">Summary</a></h3>
<p>The BKK04 Bootnode leverages a combination of cutting-edge components to
deliver high performance, reliability, and scalability. From the AMD Ryzen 9
7950X processor with 32 threads high core clock cycles to the efficient memory
and robust storage solutions, every part of this server is designed to handle
demanding server applications, particularly those related to blockchain
processing. The use of advanced cooling and power supply units ensures
long-term sustainability and stable operation. All components have been
chosen as well to be most energy efficient solutions that market can currently
provide.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bkk05-pioneering-risc-v-debian-webhosting"><a class="header" href="#bkk05-pioneering-risc-v-debian-webhosting">BKK05: Pioneering RISC-V Debian Webhosting</a></h1>
<h2 id="introduction-1"><a class="header" href="#introduction-1">Introduction</a></h2>
<p>Welcome to the frontier of web hosting with our BKK05 server, a trailblazing platform powered by the RISC-V Debian. This server represents not just a shift in technology but an experimental leap into the future of open-source computing.</p>
<p><img src="./images/bkk05/bkk05.webp" alt="BKK05" /></p>
<h2 id="technical-specifications"><a class="header" href="#technical-specifications">Technical Specifications</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Component</th><th>Specifications</th></tr></thead><tbody>
<tr><td><strong>Processor</strong></td><td>StarFive JH7100 64bit SoC with RV64GC, up to 1.5GHz</td></tr>
<tr><td><strong>Memory</strong></td><td>LPDDR4, Configurable up to 8GB</td></tr>
<tr><td><strong>Storage</strong></td><td>2TB Samsung 980 NVMe</td></tr>
<tr><td><strong>Networking</strong></td><td>Dual RJ45 Gigabit Ethernet</td></tr>
<tr><td><strong>Expansion</strong></td><td>M.2 M-Key for NVMe SSDs</td></tr>
<tr><td><strong>USB Ports</strong></td><td>2x USB 2.0 + 2x USB 3.0</td></tr>
<tr><td><strong>Video Out</strong></td><td>HDMI 2.0, supporting 4K resolution</td></tr>
</tbody></table>
</div>
<h2 id="performance"><a class="header" href="#performance">Performance</a></h2>
<p>The BKK05 server is equipped with a VisionFive 2 SBC at its core, featuring a StarFive JH7110 SoC. With 8GB of LPDDR4 RAM and a 2TB Samsung 980 NVMe drive, it's designed to handle web hosting and experimental server tasks with ease. Its RISC-V architecture ensures an open and versatile computing experience.</p>
<h2 id="risc-v-debian-the-new-era"><a class="header" href="#risc-v-debian-the-new-era">RISC-V Debian: The New Era</a></h2>
<p>RISC-V brings a breath of fresh air to the server landscape, offering an open ISA (Instruction Set Architecture) that fosters innovation. Debian's adoption of RISC-V for our BKK05 server underpins our commitment to pioneering technology and community-driven development.</p>
<h2 id="web-hosting-capabilities"><a class="header" href="#web-hosting-capabilities">Web Hosting Capabilities</a></h2>
<p>BKK05 runs Debian 12 (Bookworm), optimized for the RISC-V architecture. The server's configuration, which includes a robust 2TB NVMe drive, is particularly suited for web hosting, offering rapid data retrieval and ample storage for web applications.</p>
<h2 id="experimental-projects"><a class="header" href="#experimental-projects">Experimental Projects</a></h2>
<p>The open nature of RISC-V and Debian makes BKK05 the perfect candidate for experimental projects. Its platform is ideal for developers looking to explore the capabilities of RISC-V architecture and contribute to the growth of the ecosystem.</p>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>The BKK05 server is a testament to our commitment to embracing open and innovative technologies. By leveraging the power of RISC-V Debian, we provide a stable and forward-thinking web hosting service while also contributing to an exciting new chapter in computing.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="bkk06---bootnoderpc"><a class="header" href="#bkk06---bootnoderpc">BKK06 - Bootnode/RPC</a></h2>
<p><img src="./images/bkk06/bkk06.webp" alt="BKK06" /></p>
<h1 id="bkk06---high-performance-bootnoderpc-server"><a class="header" href="#bkk06---high-performance-bootnoderpc-server">BKK06 - High-Performance Bootnode/RPC Server</a></h1>
<p>The BKK06 server stands at the vanguard of our infrastructure, specifically
tailored to function as a bootnode and RPC server. It's built around the
AMD EPYC™ 7742 CPU and designed to deliver fine performance for RPC, bootnode
and computational tasks.</p>
<h3 id="cpu-3"><a class="header" href="#cpu-3">CPU</a></h3>
<p><strong>Model:</strong> <a href="https://www.amd.com/en/products/cpu/amd-epyc-7742">AMD EPYC™ 7742</a></p>
<ul>
<li><strong>Core Count:</strong> 64 cores</li>
<li><strong>Threads:</strong> 128</li>
<li><strong>Max. Boost Clock:</strong> Up to 3.4GHz</li>
<li><strong>Base Clock:</strong> 2.25GHz</li>
<li><strong>L3 Cache:</strong> 256MB</li>
<li><strong>TDP:</strong> 225W</li>
</ul>
<h4 id="cooler"><a class="header" href="#cooler">Cooler</a></h4>
<p><strong>Model:</strong> COOLSERVER AMD SP5 S21 Server CPU Cooler 350W 6 Copper Tubes</p>
<p><strong>Capabilities:</strong> Tailored to handle high-concurrency workloads, the EPYC™ 7742
is perfect for bootnode operations and RPC handling, offering rapid data
processing and low-latency networking.</p>
<h3 id="motherboard-3"><a class="header" href="#motherboard-3">Motherboard</a></h3>
<p><strong>Model:</strong> <a href="https://www.supermicro.com/en/products/motherboard/H11SSL-i">Supermicro H11SSL-i</a></p>
<ul>
<li><strong>Chipset:</strong> System on Chip</li>
<li><strong>Form Factor:</strong> E-ATX</li>
<li><strong>Memory Slots:</strong> 8 x DIMM slots supporting DDR4</li>
</ul>
<p><strong>Capabilities:</strong> With 8 memory channels and support for up to 8 DDR4 ECC memory
modules, the motherboard is currently populated with 8 x Micron 32GB ECC Registered
DDR4 memory modules, providing a total of 256GB of memory.</p>
<h3 id="memory-1"><a class="header" href="#memory-1">Memory</a></h3>
<p><strong>Model:</strong> Micron 32GB ECC Registered DDR4 3200</p>
<ul>
<li><strong>Capacity:</strong> 8 modules</li>
<li><strong>Technology:</strong> ECC Registered for increased reliability</li>
<li><strong>Speed:</strong> 3200MHz</li>
</ul>
<h3 id="storage-3"><a class="header" href="#storage-3">Storage</a></h3>
<p><strong>Primary Storage:</strong></p>
<ul>
<li>2x <a href="https://www.samsung.com/us/computing/memory-storage/solid-state-drives/980-pro-pcie-4-0-nvme-ssd-2tb-mz-v8p2t0b-am/">Samsung SSD 980 PRO 2TB NVMe</a> (Configured in RAID for boot/root)</li>
<li>4x <a href="https://www.samsung.com/us/computing/memory-storage/solid-state-drives/990-pro-pcie-4-0-nvme-ssd-4tb-mz-v9p4t0b-am/">Samsung SSD 990 PRO 4TB NVMe</a> (For data)</li>
</ul>
<p><strong>Capabilities:</strong> The Samsung 980 PRO drives ensure reliable boot and root
operations with RAID configuration, while the 990 PRO drives offer swift
read/write speeds and robust endurance for intensive data demands of a bootnode
and RPC server.</p>
<h3 id="connectivity"><a class="header" href="#connectivity">Connectivity</a></h3>
<p><strong>LAN:</strong></p>
<ul>
<li>eno1: 10Gb/s BASE-T LAN port</li>
<li>eno2: 10Gb/s BASE-T LAN port</li>
</ul>
<p><strong>Management Port:</strong> 1 x Dedicated management port</p>
<h3 id="board-management-controller-bmc"><a class="header" href="#board-management-controller-bmc">Board Management Controller (BMC)</a></h3>
<p><strong>BMC Model:</strong> Aspeed® AST2500</p>
<ul>
<li><strong>Capabilities:</strong> Integrated BMC with Aspeed® AST2500 GPU offers comprehensive remote management capabilities, including KVM over IP, enabling administrators to manage the server efficiently and securely.</li>
</ul>
<h3 id="chassis-and-power-supply-unit-psu"><a class="header" href="#chassis-and-power-supply-unit-psu">Chassis and Power Supply Unit (PSU)</a></h3>
<p><strong>Chassis:</strong> Supermicro Main Server Chassis
<strong>PSU:</strong> Greatwall Dual PSU 2U 1+1 CRPS redundant 800W</p>
<p>This updated configuration should accurately reflect the setup and capabilities
of your BKK06 - High-Performance Bootnode/RPC Server.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="bkk07---bootnoderpc"><a class="header" href="#bkk07---bootnoderpc">BKK07 - Bootnode/RPC</a></h2>
<p><img src="./images/BKK07/BKK07.webp" alt="BKK07" /></p>
<h1 id="bkk07---high-performance-bootnoderpc-server"><a class="header" href="#bkk07---high-performance-bootnoderpc-server">BKK07 - High-Performance Bootnode/RPC Server</a></h1>
<p>The BKK07 server stands at the vanguard of our infrastructure, specifically tailored to
function as a bootnode and RPC server. It's built around the AMD EPYC™ 9654 CPU and designed
to deliver unmatched performance for blockchain and high-computational tasks.</p>
<h3 id="cpu-4"><a class="header" href="#cpu-4">CPU</a></h3>
<p><strong>Model:</strong> <a href="https://www.amd.com/en/product/12191">AMD EPYC™ 9654</a></p>
<ul>
<li><strong>Core Count:</strong> 96 cores</li>
<li><strong>Threads:</strong> 192</li>
<li><strong>Max. Boost Clock:</strong> Up to 3.7GHz</li>
<li><strong>Base Clock:</strong> 2.4GHz</li>
<li><strong>L3 Cache:</strong> 384MB</li>
<li><strong>TDP:</strong> 360W (Configurable TDP 320-400W)</li>
</ul>
<h4 id="cooler-1"><a class="header" href="#cooler-1">Cooler</a></h4>
<p><em><strong>Model:</strong></em> COOLSERVER AMD SP5 S21 Server CPU Cooler 350W 6 Copper Tubes</p>
<p><strong>Capabilities:</strong> Tailored to handle high-concurrency workloads, the EPYC™ 9654 is perfect
for bootnode operations and RPC handling, offering rapid data processing and low-latency networking.</p>
<h3 id="motherboard-4"><a class="header" href="#motherboard-4">Motherboard</a></h3>
<p><strong>Model:</strong> <a href="https://www.supermicro.com/en/products/motherboard/h13ssl-n">Supermicro H13SSL-N</a></p>
<ul>
<li><strong>Chipset:</strong> System on Chip</li>
<li><strong>Form Factor:</strong> ATX</li>
<li><strong>Memory Slots:</strong> 12 x DIMM slots supporting DDR5</li>
</ul>
<p><strong>Capabilities:</strong> With 12 memory channels and support for up to 24 DDR5 ECC memory modules,
the motherboard is currently populated with 6 x SuperMicro 64GB ECC Registered DDR5 memory
modules in a 6-channel configuration, primed for an upgrade to a full 12-channel setup to
enhance data throughput and server responsiveness.</p>
<h3 id="memory-2"><a class="header" href="#memory-2">Memory</a></h3>
<p><strong>Model:</strong> SuperMicro 64GB ECC Registered DDR5 4800</p>
<ul>
<li><strong>Capacity:</strong> Currently 6 modules (to be expanded to 12)</li>
<li><strong>Technology:</strong> ECC Registered for increased reliability</li>
<li><strong>Speed:</strong> 4800MHz (running at 57600MHz for full 12-channel bandwidth)</li>
</ul>
<p><em><strong>Note:</strong></em> Under the SuperMicro brand, actual chip running is HMCG94MEBRA109N AA SKhynix DDR5 64GB SKhynix-Montage 2Rx4 1.1v 4800MHz ECC Registered 288-pin.</p>
<h3 id="storage-4"><a class="header" href="#storage-4">Storage</a></h3>
<p><strong>Primary Storage:</strong> 5x <a href="https://www.samsung.com/us/computing/memory-storage/solid-state-drives/990-pro-pcie-4-0-nvme-ssd-4tb-mz-v9p4t0b-am/">SAMSUNG 990 PRO M.2 2280 4TB NVMe</a></p>
<ul>
<li><strong>Sequential Read/Write Speeds:</strong> Up to 7,450/6,900 MB/s</li>
<li><strong>Random Read/Write Speeds (IOPS):</strong> Up to 1,600K/1,550K for 4TB</li>
<li><strong>Interface:</strong> PCI-Express Gen 4.0 x4</li>
<li><strong>Technology:</strong> NVMe 2.0 V-NAND</li>
<li><strong>Form Factor:</strong> M.2 2280</li>
</ul>
<p><strong>Capabilities:</strong> The Samsung 990 PRO drives are renowned for their swift read/write speeds
and robust endurance, making them ideal for the intensive data demands of a bootnode and
RPC server. +400K R/W IOPS per Terabyte is something ANY cloud provider ain't capable provide
for whatever price you were willing to pay.</p>
<h3 id="connectivity-1"><a class="header" href="#connectivity-1">Connectivity</a></h3>
<ul>
<li><strong>LAN:</strong> Dual 10Gb/s BASE-T LAN ports (Broadcom® BCM57416)</li>
<li><strong>Management Port:</strong> 1 x Dedicated management port</li>
</ul>
<h3 id="board-management-controller-bmc-1"><a class="header" href="#board-management-controller-bmc-1">Board Management Controller (BMC)</a></h3>
<ul>
<li><strong>BMC Model:</strong> Aspeed® AST2600</li>
<li><strong>Capabilities:</strong> Integrated BMC with Aspeed® AST2600 GPU offers comprehensive remote management
capabilities, including KVM over IP, enabling administrators to manage the server efficiently and securely.</li>
</ul>
<h3 id="chassis-and-power-supply-unit-psu-1"><a class="header" href="#chassis-and-power-supply-unit-psu-1">Chassis and Power Supply Unit (PSU)</a></h3>
<ul>
<li><strong>Chassis:</strong> Ultra Short 2U rackmount Server Chassis S24306 with six 2.5 ssd bays support eatx dual processor board</li>
<li><strong>PSU:</strong> Greatwall Dual PSU 2U 1+1 CRPS redundant 800W</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="bkk08---rpc"><a class="header" href="#bkk08---rpc">BKK08 - RPC</a></h2>
<p><img src="./images/BKK08/BKK08.webp" alt="BKK08" /></p>
<h1 id="bkk08---high-performance-bootnoderpc-server"><a class="header" href="#bkk08---high-performance-bootnoderpc-server">BKK08 - High-Performance Bootnode/RPC Server</a></h1>
<p>The BKK08 server stands at the vanguard of our infrastructure, specifically tailored to
function as a bootnode and RPC server.</p>
<h3 id="cpu-5"><a class="header" href="#cpu-5">CPU</a></h3>
<p><strong>Model:</strong> <a href="">AMD EPYC™ 7773X</a></p>
<h4 id="cooler-2"><a class="header" href="#cooler-2">Cooler</a></h4>
<p><em><strong>Model:</strong></em></p>
<h3 id="motherboard-5"><a class="header" href="#motherboard-5">Motherboard</a></h3>
<p><strong>Model:</strong> <a href="https://www.supermicro.com/en/products/motherboard/h13ssl-n">Supermicro NOTSURE</a></p>
<ul>
<li><strong>Chipset:</strong> System on Chip</li>
<li><strong>Form Factor:</strong> ATX</li>
<li><strong>Memory Slots:</strong> 8 x DIMM slots supporting DDR4</li>
</ul>
<p><strong>Capabilities:</strong> With 8 memory channels and supporting up to 256GB of DDR4 memory,
the Supermicro</p>
<h3 id="memory-3"><a class="header" href="#memory-3">Memory</a></h3>
<h3 id="storage-5"><a class="header" href="#storage-5">Storage</a></h3>
<p><strong>Primary Storage:</strong> 4x <a href="https://www.samsung.com/us/computing/memory-storage/solid-state-drives/990-pro-pcie-4-0-nvme-ssd-4tb-mz-v9p4t0b-am/">SAMSUNG 990 PRO M.2 2280 4TB NVMe</a></p>
<ul>
<li><strong>Sequential Read/Write Speeds:</strong> Up to 7,450/6,900 MB/s</li>
<li><strong>Random Read/Write Speeds (IOPS):</strong> Up to 1,600K/1,550K for 4TB</li>
<li><strong>Interface:</strong> PCI-Express Gen 4.0 x4</li>
<li><strong>Technology:</strong> NVMe 2.0 V-NAND</li>
<li><strong>Form Factor:</strong> M.2 2280</li>
</ul>
<p><strong>Capabilities:</strong> The</p>
<h3 id="connectivity-2"><a class="header" href="#connectivity-2">Connectivity</a></h3>
<ul>
<li><strong>NIC Card:</strong> Dual 100Gb/s ports NIC card</li>
<li><strong>LAN:</strong> Dual 10Gb/s BASE-T LAN ports (Broadcom® BCM57416)</li>
<li><strong>Management Port:</strong> 1 x Dedicated management port</li>
</ul>
<h3 id="board-management-controller-bmc-2"><a class="header" href="#board-management-controller-bmc-2">Board Management Controller (BMC)</a></h3>
<ul>
<li><strong>BMC Model:</strong> Aspeed® AST2500</li>
</ul>
<h3 id="chassis-and-power-supply-unit-psu-2"><a class="header" href="#chassis-and-power-supply-unit-psu-2">Chassis and Power Supply Unit (PSU)</a></h3>
<ul>
<li><strong>Chassis:</strong> Ultra Short 2U rackmount Server Chassis S24306 with six 2.5 ssd bays support eatx dual processor board</li>
<li><strong>PSU:</strong> Greatwall Dual PSU 2U 1+1 CRPS redundant 800W</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="software-infrastructure"><a class="header" href="#software-infrastructure">Software Infrastructure</a></h1>
<p>Our infrastructure leverages several powerful
technologies and platforms to provide a robust and efficient environment for
our operations.</p>
<h2 id="debian"><a class="header" href="#debian">Debian</a></h2>
<p>Our servers run on Debian, a highly stable and reliable Linux-based operating
system. Debian provides a strong foundation for our operations, with its wide
array of packages, excellent package management system, and strong community
support. Its stability and robustness make it an excellent choice for our
server environments.</p>
<h2 id="proxmox-virtual-environment"><a class="header" href="#proxmox-virtual-environment">Proxmox Virtual Environment</a></h2>
<p>We utilize Proxmox, an open-source server virtualization management solution.
Proxmox allows us to manage virtual machines, containers, storage, virtualized
networks, and HA clustering from a single, integrated platform. This is crucial
in ensuring we have maximum control and efficiency in managing our various
server processes. We utilize linux 6.1 lts pve kernel.</p>
<h2 id="lxc-linux-containers"><a class="header" href="#lxc-linux-containers">LXC (Linux Containers)</a></h2>
<p>We leverage LXC (Linux Containers) to run multiple isolated Linux systems
(containers) on a single host. This containerization technology provides us
with lightweight, secure, and performant alternatives to full machine
virtualization.</p>
<h2 id="zfs"><a class="header" href="#zfs">ZFS</a></h2>
<p>ZFS, the Zettabyte File System, is an advanced filesystem and logical volume
manager. It was designed to overcome many of the major issues found in previous
designs and is used for storing data in our Proxmox environment. It provides
robust data protection, supporting high storage capacities and efficient data
compression, and allows us to create snapshots and clones of our filesystem.</p>
<h2 id="ansible"><a class="header" href="#ansible">Ansible</a></h2>
<p>We use Ansible for automation of our system configuration and management tasks.
Ansible enables us to define and deploy consistent configurations across
multiple servers, and automate routine maintenance tasks, thus increasing
efficiency and reducing the risk of errors.</p>
<h2 id="mikrotik-routeros"><a class="header" href="#mikrotik-routeros">MikroTik RouterOS</a></h2>
<p>Our network infrastructure relies on MikroTik RouterOS, a robust network
operating system. This system offers a variety of features such as routing,
firewall, bandwidth management, wireless access point, backhaul link, hotspot
gateway, VPN server, and more. This helps us ensure secure, efficient, and
reliable network operations.</p>
<p>All these technologies are intertwined, working together to support our
operations. They are chosen not just for their individual capabilities, but
also for their compatibility and interoperability, creating an integrated,
efficient, and reliable software infrastructure.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="network-configuration-documentation"><a class="header" href="#network-configuration-documentation">Network Configuration Documentation</a></h1>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>This document outlines the BGP routing configuration for our multi-homed network
with connections to various internet exchanges and transit providers in Bangkok,
Hong Kong, Singapore, and Europe. Currently 3x 10G fibers are used for physical
uplinks.</p>
<h2 id="bandwidth"><a class="header" href="#bandwidth">Bandwidth</a></h2>
<img src="images/networking/bandwidth.webp" alt="Scaling bandwidth" style="width: 100%; margin-top: 2em; object-fit: cover;">
<h1 id="network-topology-diagram"><a class="header" href="#network-topology-diagram">Network Topology Diagram</a></h1>
<pre><code class="language-mermaid">graph TD
    BKK50((BKK50 Gateway Router&lt;br&gt;CCR2004-16G-2S+&lt;br&gt;ECMP with 10G connections))
    BKK50 --&gt; |10G| BKK20
    BKK50 --&gt; |10G| BKK10

    subgraph BKK20[BKK20 Edge Router&lt;br&gt;CCR2216-1G-12XS-2XQ]
        B20_AMSIX[AMSIX-LAG&lt;br&gt;10G Physical Port]
    end

    subgraph BKK10[BKK10 Edge Router&lt;br&gt;CCR2116-12G-4S+]
        B10_AMSIX[AMSIX-LAG&lt;br&gt;10G Physical Port]
        B10_BKNIX[BKNIX-LAG&lt;br&gt;10G Physical Port]
    end

    B20_AMSIX --&gt; |VLAN 911&lt;br&gt;1G| AMS_IX_BKK[AMS-IX Bangkok]
    B20_AMSIX --&gt; |VLAN 3994&lt;br&gt;200M| AMS_IX_HK[AMS-IX Hong Kong]
    B20_AMSIX ==&gt; |VLAN 2520&lt;br&gt;500M&lt;br&gt;Active| IPTX_SG[IPTX Singapore]
    B20_AMSIX -.-&gt; |VLAN 2517&lt;br&gt;500M&lt;br&gt;Passive| IPTX_HK[IPTX Hong Kong]

    B10_AMSIX ==&gt; |VLAN 2519&lt;br&gt;500M&lt;br&gt;Active| IPTX_HK
    B10_AMSIX -.-&gt; |VLAN 2518&lt;br&gt;500M&lt;br&gt;Passive| IPTX_SG
    B10_AMSIX --&gt; |VLAN 3995&lt;br&gt;100M| AMS_IX_EU[AMS-IX Europe]
    B10_BKNIX --&gt; |10G| BKNIX[BKNIX]

    AMS_IX_BKK --&gt; INTERNET((Internet))
    AMS_IX_HK --&gt; INTERNET
    AMS_IX_EU --&gt; INTERNET
    IPTX_SG --&gt; INTERNET
    IPTX_HK --&gt; INTERNET
    BKNIX --&gt; INTERNET

    classDef router fill:#1a5f7a,color:#ffffff,stroke:#333,stroke-width:2px;
    classDef ix fill:#4d3e3e,color:#ffffff,stroke:#333,stroke-width:2px;
    classDef internet fill:#0077be,color:#ffffff,stroke:#333,stroke-width:2px;
    classDef active stroke:#00ff00,stroke-width:4px;
    classDef passive stroke:#ff0000,stroke-dasharray: 5 5;

    class BKK50,INTERNET internet;
    class BKK20,BKK10 router;
    class AMS_IX_BKK,AMS_IX_HK,AMS_IX_EU,IPTX_SG,IPTX_HK,BKNIX ix;

    linkStyle default stroke:#ffffff,stroke-width:2px;
</code></pre>
<h2 id="routing-configuration"><a class="header" href="#routing-configuration">Routing Configuration</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Speed</th><th>Path Prepend</th><th>MED</th><th>Local Pref</th><th>External Communities</th><th>Description</th><th>Router</th></tr></thead><tbody>
<tr><td>BKNIX</td><td>10G</td><td>0</td><td>10</td><td>200</td><td>142108:1:764</td><td>Local IX</td><td>BKK10</td></tr>
<tr><td>AMS-IX Bangkok</td><td>1G</td><td>0</td><td>20</td><td>190</td><td>142108:1:764</td><td>Local IX</td><td>BKK20</td></tr>
<tr><td>IPTX Singapore-BKK10</td><td>500M</td><td>1</td><td>50</td><td>170</td><td>142108:2:35</td><td>Regional Transit</td><td>BKK10</td></tr>
<tr><td>IPTX Singapore-BKK20</td><td>500M</td><td>1</td><td>50</td><td>160</td><td>142108:2:35</td><td>Regional Transit</td><td>BKK20</td></tr>
<tr><td>AMS-IX Hong Kong</td><td>200M</td><td>2</td><td>100</td><td>150</td><td>142108:2:142</td><td>Regional IX</td><td>BKK20</td></tr>
<tr><td>IPTX HK-BKK20</td><td>500M</td><td>2</td><td>100</td><td>130</td><td>142108:2:142</td><td>Regional Transit</td><td>BKK20</td></tr>
<tr><td>IPTX HK-BKK10</td><td>500M</td><td>2</td><td>100</td><td>120</td><td>142108:2:142</td><td>Regional Transit</td><td>BKK10</td></tr>
<tr><td>AMS-IX EU</td><td>100M</td><td>3</td><td>200</td><td>100</td><td>142108:2:142</td><td>Remote IX</td><td>BKK10</td></tr>
</tbody></table>
</div>
<p>This way:</p>
<ol>
<li>We keep our internal communities for our own routing decisions</li>
<li>We share geographic information allowing peers to optimize their routing</li>
<li>Peers can make informed decisions about traffic paths to our network</li>
</ol>
<p>Would this be a useful approach?</p>
<h2 id="traffic-engineering-principles"><a class="header" href="#traffic-engineering-principles">Traffic Engineering Principles</a></h2>
<ol>
<li>Local Preference: Higher values indicate more preferred routes. Local routes are preferred over regional, which are preferred over remote routes.</li>
<li>MED (Multi-Exit Discriminator): Lower values are preferred. Used to influence inbound traffic when other attributes are equal.</li>
<li>AS Path Prepending: Increases AS path length to make a route less preferred. Used for coarse control of inbound traffic.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="firmware-updates"><a class="header" href="#firmware-updates">Firmware Updates</a></h1>
<h2 id="samsung-980pro-nvme"><a class="header" href="#samsung-980pro-nvme">Samsung 980Pro NVMe</a></h2>
<pre><code class="language-bash">wget https://semiconductor.samsung.com/resources/software-resources/Samsung_SSD_980_PRO_5B2QGXA7.iso
apt-get -y install gzip unzip wget cpio
mkdir /mnt/iso
sudo mount -o loop ./Samsung_SSD_980_PRO_5B2QGXA7.iso /mnt/iso/
mkdir /tmp/fwupdate
cd /tmp/fwupdate
gzip -dc /mnt/iso/initrd | cpio -idv --no-absolute-filenames
cd root/fumagician/
sudo ./fumagician
</code></pre>
<p>This .iso is for 980 Pro, if you have different model replace ISO with link on
https://semiconductor.samsung.com/consumer-storage/support/tools/</p>
<h2 id="asrock-rack-motherboard"><a class="header" href="#asrock-rack-motherboard">ASRock Rack Motherboard</a></h2>
<p>This guide outlines the steps to update the firmware on your ASRock Rack
motherboard. The update includes the BIOS, BMC (Baseboard Management
Controller), and the networking firmware.</p>
<p>Before starting, download the following files:</p>
<ul>
<li><a href="https://www.dropbox.com/s/01csce7jp2n18xm/B650D4U-2L2T-BCM_4.01.ROM?dl=0">BIOS L4.01</a></li>
<li><a href="https://www.dropbox.com/s/gwrmaowuxn8uvi5/B650D4U_2L2T-BCM_BMC4.01.00.zip?dl=0">BMC</a></li>
<li><a href="https://www.dropbox.com/s/ftuwqr9renu9lo9/Broadcom%2057416%20LAN%20Flashing%20FW%20EN.zip?dl=0">Broadcom 57416 LAN Flashing Firmware</a></li>
</ul>
<h2 id="bios-update"><a class="header" href="#bios-update">BIOS Update</a></h2>
<p>ASRock Rack provides a BIOS flash utility called ASRock Rack Instant Flash,
embedded in the Flash ROM, to make the BIOS update process simple and
straightforward.</p>
<ol>
<li>
<p><strong>Preparation</strong>: Format a USB flash drive with FAT32/16/12 file system and
save the new BIOS file to your USB flash drive.</p>
</li>
<li>
<p><strong>Access ASRock Rack Instant Flash</strong>: Restart the server and press the
<code>&lt;F6&gt;</code> key during the POST or the <code>&lt;F2&gt;</code> key to enter the BIOS setup menu.
From there, access the ASRock Rack Instant Flash utility.</p>
</li>
<li>
<p><strong>Update BIOS</strong>: Follow the instructions provided by the utility to update
the BIOS.</p>
</li>
</ol>
<h2 id="bmc-firmware-update"><a class="header" href="#bmc-firmware-update">BMC Firmware Update</a></h2>
<p>In order to keep your BMC firmware up-to-date and have the latest features and
improvements, regular updates are recommended. This guide provides step-by-step
instructions on how to update your BMC firmware.</p>
<ol>
<li>
<p><strong>Preparation</strong>: Download the correct BMC firmware update file from the
ASRock Rack website. Ensure the firmware version is later than the one
currently installed on your device. Save the firmware file on your local
system.</p>
</li>
<li>
<p><strong>Access BMC Maintenance Portal</strong>: Open your web browser and navigate to the
BMC maintenance portal using the IP address of the BMC. Typically, the URL
is https://[BMC IP Address]/#maintenance/firmware_update_wizard, for
instance, https://192.168.33.114/#maintenance/firmware_update_wizard.</p>
</li>
<li>
<p><strong>Login</strong>: Use your BMC username and password to log into the portal.</p>
</li>
<li>
<p><strong>Firmware Update Section</strong>: Navigate to the firmware update section.</p>
</li>
<li>
<p><strong>Upload Firmware Image</strong>: Click on "Select Firmware Image" and upload the
firmware file you downloaded earlier. The firmware files typically end with
<code>.ima</code>. For instance, <code>B650D4U_2L2T_4.01.00.ima</code>.</p>
</li>
<li>
<p><strong>Preserve Configuration</strong>: If you want to preserve all the current
configurations during the update, check the box "Preserve all
Configuration". This will maintain all the settings irrespective of the
individual items marked as preserve/overwrite in the table below.</p>
</li>
<li>
<p><strong>Start Update</strong>: Click "Firmware Update". The system will validate the
image and if successful, the update process will start. The progress will be
shown on the screen.</p>
</li>
<li>
<p><strong>Reboot</strong>: Once the update is completed, the system will reboot
automatically.</p>
</li>
</ol>
<blockquote>
<p><strong>WARNING</strong>: Please note that after entering the update mode, other web
pages, widgets, and services will not work. All the open widgets will be
automatically closed. If the update is cancelled in the middle of the
process, the device will be reset only for BMC BOOT, and APP components of
Firmware.</p>
</blockquote>
<blockquote>
<p><strong>NOTE</strong>: The IP address used in this guide is an example. Replace it with
the actual IP address of your BMC. Also, remember to use a reliable network
connection during the update process to prevent any interruption.</p>
</blockquote>
<h2 id="networking-firmware-update"><a class="header" href="#networking-firmware-update">Networking Firmware Update</a></h2>
<ol>
<li>
<p><strong>Preparation</strong>: Format a USB flash drive and copy the
"bnxtmt-lite-uefi-221.0.117.0-x64" folder from the downloaded Broadcom 57416
LAN Flashing Firmware onto it.</p>
</li>
<li>
<p><strong>Access UEFI Shell</strong>: Insert the USB flash drive into your ASRock Rack
server board, reboot the server, and hit F11 at the POST screen. Select
"UEFI: Built-in EFI Shell". The USB flash drive should be named <code>FS0:</code>. Type
<code>FS0:</code> and press enter.</p>
<p><img src="images/firmware/image0.png" alt="UEFI Shell" /></p>
</li>
<li>
<p><strong>Verify Current Firmware Version</strong>: Execute <code>bnxtmt.efi</code> to display the
current firmware version.</p>
<p><img src="images/firmware/image1.png" alt="bnxtmt efi execution" /></p>
</li>
<li>
<p><strong>Erase the Flash</strong>: Navigate to the "bnxtmt-lite-uefi-221.0.117.0-x64"
folder and execute <code>bnxtmt.efi -sysop -none -no_swap –blank</code> to erase the
current firmware.</p>
<p><img src="images/firmware/image3.jpg" alt="Erase Flash" /></p>
</li>
<li>
<p><strong>Flash the Firmware</strong>: Execute <code>bnxtmt.efi -sysop -none -no_swap -fnvm ASRR57416-2T.PKG -log FW1.log</code> to flash the new firmware. Here,
<code>ASRR57416-2T.PKG</code> is the firmware file.</p>
<p><img src="images/firmware/image2.jpg" alt="Flash Firmware" /></p>
</li>
<li>
<p><strong>Verify Updated Firmware Version</strong>: Run <code>bnxtmt.efi</code> again to verify the
new firmware version.</p>
<p><img src="images/firmware/image4.jpg" alt="bnxtmt efi execution" /></p>
</li>
<li>
<p><strong>Flash LAN Ports' MAC Addresses</strong>: Execute <code>bnxtmt.efi -none –m -log MAC1.log</code>.</p>
<p><img src="images/firmware/image5.jpg" alt="Flash MAC" /></p>
</li>
<li>
<p><strong>Input MAC Addresses</strong>: Enter the MAC addresses of both LAN ports when
prompted. <em>Write down these addresses beforehand.</em></p>
<p><img src="images/firmware/image6.jpg" alt="Enter MAC Addresses" /></p>
</li>
<li>
<p><strong>Power Cycle</strong>: Turn off the system, power cycle the PSU, and then power
everything back on.</p>
</li>
</ol>
<blockquote>
<p>Note: The MAC addresses for your LAN ports are crucial. Write them down
before starting the update process as they need to be added during the
command at step 8.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="proxmox-network-configuration-guide"><a class="header" href="#proxmox-network-configuration-guide">Proxmox Network Configuration Guide</a></h1>
<h2 id="overview-1"><a class="header" href="#overview-1">Overview</a></h2>
<p>Networking in Proxmox is managed through the Debian network interface
configuration file at <code>/etc/network/interfaces</code>. This guide will walk you
through the process of configuring the network interfaces and creating a Linux
bridge for your Proxmox server.</p>
<h2 id="pre-requisites"><a class="header" href="#pre-requisites">Pre-requisites:</a></h2>
<p>Before we begin, you should have:</p>
<ol>
<li>A Proxmox VE installed and configured on your server.</li>
<li>Administrative or root access to your Proxmox VE server.</li>
</ol>
<h2 id="step-1-understand-proxmox-network-configuration-files"><a class="header" href="#step-1-understand-proxmox-network-configuration-files">Step 1: Understand Proxmox Network Configuration Files</a></h2>
<p>Proxmox network settings are mainly configured in two files:</p>
<ul>
<li><code>/etc/network/interfaces</code>: This file describes the network interfaces
available on your system and how to activate them. This file is critical for
setting up bridged networking or configuring network interfaces manually.</li>
<li><code>/etc/hosts</code>: This file contains IP address to hostname mappings.</li>
</ul>
<h2 id="step-2-configure-primary-network-interface"><a class="header" href="#step-2-configure-primary-network-interface">Step 2: Configure Primary Network Interface</a></h2>
<p>First, open the network interfaces configuration file for editing:
Set your primary network interface (e.g., <code>enp9s0</code>) to manual:</p>
<pre><code class="language-bash">nano /etc/network/interfaces
</code></pre>
<pre><code class="language-bash">auto enp9s0
iface enp9s0 inet manual
</code></pre>
<h2 id="step-3-configure-linux-bridge"><a class="header" href="#step-3-configure-linux-bridge">Step 3: Configure Linux Bridge</a></h2>
<p>Next, create a Linux bridge (<code>vmbr0</code>):</p>
<pre><code class="language-bash">auto vmbr0
iface vmbr0 inet static
    address 192.168.69.103
    netmask 255.255.255.0
    gateway 192.168.69.1
    bridge_ports enp9s0
    bridge_stp off
    bridge_fd 0
</code></pre>
<p>Make sure to replace the <code>address</code>, <code>netmask</code>, and <code>gateway</code> parameters with
the correct values for your network.</p>
<h2 id="step-4-apply-configuration"><a class="header" href="#step-4-apply-configuration">Step 4: Apply Configuration</a></h2>
<p>Save and exit the file, then restart the network service for the changes to
take effect:</p>
<pre><code class="language-bash">systemctl restart networking.service
</code></pre>
<h2 id="step-5-verify-configuration"><a class="header" href="#step-5-verify-configuration">Step 5: Verify Configuration</a></h2>
<p>Use the <code>ip a</code> command to verify that the bridge was created successfully:</p>
<pre><code class="language-bash">ip a
</code></pre>
<h2 id="step-6-configure-the-hosts-file"><a class="header" href="#step-6-configure-the-hosts-file">Step 6: Configure the Hosts File</a></h2>
<p>The <code>/etc/hosts</code> file maps network addresses to hostnames. Open this file in a
text editor:</p>
<pre><code class="language-bash">nano /etc/hosts
</code></pre>
<p>Then, define the IP address and corresponding FQDN and hostname for your
Proxmox server:</p>
<pre><code class="language-bash">127.0.0.1	localhost
192.168.69.103	bkk03.yourdomain.com	bkk03

# The following lines are desirable for IPv6 capable hosts
::1     localhost ip6-localhost ip6-loopback
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
</code></pre>
<p>Remember to replace <code>192.168.69.103</code>, <code>bkk03.yourdomain.com</code>, and <code>bkk03</code> with
your server's IP address, FQDN, and hostname, respectively.</p>
<p>After updating the <code>/etc/hosts</code> file, save and exit the editor.</p>
<p><strong>Important</strong>: Ensure the FQDN in your <code>/etc/hosts</code> matches the actual FQDN of
your server. This FQDN should be resolvable from the server itself and any
machines that will be accessing it. The Proxmox web interface uses this
hostname to generate SSL certificates for the HTTPS interface, so incorrect
resolution may lead to certificate issues.</p>
<p>By carefully following the instructions provided in this guide, administrators
can ensure a robust and secure networking setup for their Proxmox servers. This
guide should provide a good starting point for both new and experienced Proxmox
administrators to understand and manage the network settings of their servers
effectively.</p>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<p>If you run into issues during this process, you can use the following commands
to troubleshoot:</p>
<ul>
<li>
<p><code>systemctl status networking.service</code>: Displays the status of the networking
service.</p>
</li>
<li>
<p><code>journalctl -xeu networking.service</code>: Provides detailed logs for the
networking service.</p>
</li>
<li>
<p><code>ip addr flush dev &lt;interface&gt;</code> and <code>ip route flush dev &lt;interface&gt;</code>: Clears
IP addresses and routes on a given interface.</p>
</li>
<li>
<p><code>ip link delete &lt;bridge&gt;</code> and <code>ip link add name &lt;bridge&gt; type bridge</code>:
Deletes and recreates a bridge.</p>
</li>
<li>
<p><code>ip link set &lt;interface&gt; master &lt;bridge&gt;</code>: Assigns an interface to a bridge.</p>
</li>
<li>
<p><code>ip addr add &lt;ip&gt;/&lt;subnet&gt; dev &lt;bridge&gt;</code>: Assigns an IP address to a bridge.</p>
</li>
</ul>
<p>Remember to replace <code>&lt;interface&gt;</code>, <code>&lt;bridge&gt;</code>, <code>&lt;ip&gt;</code>, and <code>&lt;subnet&gt;</code> with the
appropriate values for your network.</p>
<p>For more detailed information about Proxmox networking, refer to the <a href="https://pve.proxmox.com/wiki/Network_Configuration">official
Proxmox documentation</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="filesystem"><a class="header" href="#filesystem">Filesystem</a></h1>
<p>Blockchain nodes, such as validators and archive nodes, require a highly reliable and efficient filesystem to operate effectively. The choice of filesystem can significantly affect the performance and reliability of these nodes. In light of performance concerns with ZFS, especially in ParityDB workloads as discussed in <a href="https://github.com/paritytech/polkadot-sdk/pull/1792">paritytech/polkadot-sdk/pull/1792</a>, this guide provides a detailed approach to configuring a robust filesystem in Proxmox.</p>
<h2 id="filesystem-choices-and-their-impact"><a class="header" href="#filesystem-choices-and-their-impact">Filesystem Choices and Their Impact</a></h2>
<p>The extensive use of I/O operations by blockchain nodes means the filesystem must manage write and read operations efficiently. CoW filesystems, while feature-rich and robust, introduce overhead that can degrade performance, as evidenced by the cited benchmarks.</p>
<h3 id="why-not-zfs-or-btrfs-for-blockchain-nodes"><a class="header" href="#why-not-zfs-or-btrfs-for-blockchain-nodes">Why Not ZFS or Btrfs for Blockchain Nodes?</a></h3>
<ul>
<li><strong>ZFS</strong>: While ZFS is revered for its data integrity, the added overhead from features like snapshotting, checksums, and the dynamic block size can significantly slow down write operations crucial for blockchain databases.</li>
<li><strong>Btrfs</strong>: Similar to ZFS, Btrfs offers advanced features such as snapshotting and volume management. However, its CoW nature means it can suffer from fragmentation and performance degradation over time, which is less than ideal for write-intensive blockchain operations.</li>
</ul>
<p>Given these insights, a move towards a more traditional, performant, and linear filesystem is recommended.</p>
<h3 id="recommended-setup-lvm-thin-with-ext4"><a class="header" href="#recommended-setup-lvm-thin-with-ext4">Recommended Setup: LVM-thin with ext4</a></h3>
<p>For high I/O workloads such as those handled by blockchain validators and archive nodes, <code>LVM-thin</code> provisioned with <code>ext4</code> stands out:</p>
<ul>
<li><strong>ext4</strong>: Offers a stable and linear write performance, which is critical for the high transaction throughput of blockchain applications.</li>
<li><strong>LVM-thin</strong>: Allows for flexible disk space allocation, providing the benefits of thin provisioning such as snapshotting and easier resizing without the CoW overhead.</li>
</ul>
<h2 id="strategic-partitioning-for-maximum-reliability-and-performance"><a class="header" href="#strategic-partitioning-for-maximum-reliability-and-performance">Strategic Partitioning for Maximum Reliability and Performance</a></h2>
<p>A well-thought-out partitioning scheme is crucial for maintaining data integrity and ensuring high availability.</p>
<h3 id="raid-1-configuration-for-the-root-partition"><a class="header" href="#raid-1-configuration-for-the-root-partition">RAID 1 Configuration for the Root Partition</a></h3>
<p>Using a RAID 1 setup for the root partition provides mirroring of data across two disks, thus ensuring that the system can continue to operate even if one disk fails.</p>
<h4 id="implementing-raid-1"><a class="header" href="#implementing-raid-1">Implementing RAID 1:</a></h4>
<ol>
<li>
<p><strong>Disk Preparation:</strong></p>
<ul>
<li>Select two identical disks (e.g., <code>/dev/sda</code> and <code>/dev/sdb</code>).</li>
<li>Partition both disks with an identical layout, reserving space for the root partition.</li>
</ul>
</li>
<li>
<p><strong>RAID Array Creation:</strong></p>
<ul>
<li>Execute the command to create the RAID 1 array:
<pre><code class="language-bash">mdadm --create --verbose /dev/md0 --level=1 --raid-devices=2 /dev/sda1 /dev/sdb1
</code></pre>
</li>
<li>Format the RAID array with a resilient filesystem like ext4:
<pre><code class="language-bash">mkfs.ext4 /dev/md0
</code></pre>
</li>
<li>Mount the RAID array at the root mount point during the Proxmox installation or manually afterward.</li>
</ul>
</li>
</ol>
<h3 id="boot-partition-configuration"><a class="header" href="#boot-partition-configuration">Boot Partition Configuration</a></h3>
<p>Having two separate boot partitions provides redundancy, ensuring the system remains bootable in the event of a primary boot partition failure.</p>
<h4 id="configuring-boot-partitions"><a class="header" href="#configuring-boot-partitions">Configuring Boot Partitions:</a></h4>
<ul>
<li>
<p><strong>Primary Boot Partition:</strong></p>
<ul>
<li>On the first disk, create a boot partition (e.g., <code>/dev/sda2</code>).</li>
<li>Install the bootloader and kernel images here.</li>
</ul>
</li>
<li>
<p><strong>Fallback Boot Partition:</strong></p>
<ul>
<li>Mirror the primary boot partition to a second disk (e.g., <code>/dev/sdb2</code>).</li>
<li>Configure the bootloader to fall back to this partition if the primary boot fails.</li>
</ul>
</li>
</ul>
<h3 id="lvm-thin-provisioning-on-data-disks"><a class="header" href="#lvm-thin-provisioning-on-data-disks">LVM-Thin Provisioning on Data Disks</a></h3>
<p>LVM-thin provisioning is recommended for managing data disks. It allows for efficient disk space utilization by provisioning "thin" volumes that can be expanded dynamically as needed.</p>
<h4 id="steps-for-lvm-thin-provisioning"><a class="header" href="#steps-for-lvm-thin-provisioning">Steps for LVM-Thin Provisioning:</a></h4>
<ol>
<li>
<p><strong>Initialize LVM Physical Volumes:</strong></p>
<ul>
<li>Use the <code>pvcreate</code> command on the designated data disks:
<pre><code class="language-bash">pvcreate /dev/nvme1n1 /dev/nvme2n1 /dev/nvme3n1
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Create a Volume Group:</strong></p>
<ul>
<li>Group the initialized disks into a volume group:
<pre><code class="language-bash">vgcreate vg_data /dev/nvme1n1 /dev/nvme2n1 /dev/nvme3n1
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Establish a Thin Pool:</strong></p>
<ul>
<li>Create a thin pool within the volume group to hold the thin volumes:
<pre><code class="language-bash">lvcreate --size 100G --thinpool data_tpool vg_data
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Provision Thin Volumes:</strong></p>
<ul>
<li>Create thin volumes from the pool as needed for containers or virtual machines: ```bash
lvcreate --virtualsize 500G --thin data_tpool --name data_volume
<pre><code>
</code></pre>
</li>
</ul>
</li>
<li>
<p><strong>Format and Mount Thin Volumes:</strong></p>
<ul>
<li>Format the volumes with a filesystem, such as ext4, and mount them:
<pre><code class="language-bash">mkfs.ext4 /dev/vg_data/data_volume
mount /dev/vg_data/data_volume /mnt/data_volume
</code></pre>
</li>
</ul>
</li>
</ol>
<h2 id="integrating-lvm-thin-volumes-with-proxmox"><a class="header" href="#integrating-lvm-thin-volumes-with-proxmox">Integrating LVM-Thin Volumes with Proxmox</a></h2>
<p>Proxmox's <code>pct</code> command-line tool can manage container storage by mapping LVM-thin volumes to container mount points.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="unlabored"><a class="header" href="#unlabored">Unlabored</a></h1>
<p>Effortless Proxmox Infrastructure is deployed using comprehensive collection of
rolebooks use to deploy complete infrastructure as a code can be found now in
<a href="https://github.com/rotkonetworks/unlabored/">Github</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="minimizing-our-carbon-footprint"><a class="header" href="#minimizing-our-carbon-footprint">Minimizing Our Carbon Footprint</a></h1>
<p>In the relentless march of blockchain technology, we've chosen a path less
trodden. Our commitment isn't just to innovation, but to the delicate balance
between progress and planetary health.</p>
<h2 id="polkadot"><a class="header" href="#polkadot">Polkadot</a></h2>
<p>We've anchored our on-chain operations to the Polkadot network. It's not merely
a blockchain; it's a testament to what's possible when brilliant minds converge
on the problem of sustainable computation. Polkadot doesn't just process
transactions—it redefines the very notion of blockchain efficiency.</p>
<h2 id="the-migration-to-conscious-computing"><a class="header" href="#the-migration-to-conscious-computing">The Migration to Conscious Computing</a></h2>
<p>Our servers have found a new home in STT's cutting-edge data center. It's more
than a facility; it's a bold statement against the status quo of energy-hungry
tech. By 2030, it aims to erase its carbon footprint entirely. Today, it already
neutralizes 100% of its emissions—a rare beacon of responsibility in our industry.</p>
<h3 id="the-numbers-dont-lie"><a class="header" href="#the-numbers-dont-lie">The Numbers Don't Lie</a></h3>
<p>Our current rack sip a mere 595.1 kWh monthly. In Thailand's energy landscape,
that translates to 335 kg of CO2 equivalent. It's a number we're not satisfied
with, but one we're actively working to drive down to zero.</p>
<h2 id="the-road-ahead"><a class="header" href="#the-road-ahead">The Road Ahead</a></h2>
<p>Our journey with STT and Polkadot isn't just about ticking boxes or greenwashing
our image. It's a fundamental shift in how we view the relationship between
technology and our planet. We're not waiting for regulations or market
pressures—we're driving change from within.</p>
<p><img src="./images/carbon/terrapass-voucher.webp" alt="First TerraPass certificate" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="team"><a class="header" href="#team">Team</a></h1>
<div style="display: flex; margin-bottom: 4em;">
<div style="display: flex; flex-direction: column; flex: 0 0 20%;">
<img src="images/team/tommi.webp" alt="Tommi" style="width: 100%; margin-top: 1em; object-fit: cover;">
<center><h3 id="tommi"><a class="header" href="#tommi">Tommi</a></h3></center>
<center><h4 id="founder"><a class="header" href="#founder">Founder</a></h4></center>
</div> 
<div style="margin-left: 1em;">
<p>
Tommi, the founder of Rotko Network, represents a generation that mastered the
QWERTY keyboard before perfecting handwriting. With over two decades of
experience in building hardware, software, and managing servers, Tommi's
journey through the digital landscape is as old as the commercial internet
itself.
<p>His adventure with Bitcoin began in 2008, running the first version on a
Pentium D950. However, it wasn't until 2013, when Snowden's revelations
confirmed his most paranoid thoughts about mass surveillance, that Tommi fully
grasped the importance of decentralized systems. He realized that the
internet, once a user-driven landscape, had fallen under the control of a
handful of corporations, compromising user privacy and freedom.</p>
<p>This eye-opening realization led to the creation of Rotko Network. Tommi's
mission is to reshape the internet into a space truly owned by its users,
where privacy is fundamental and centralized control is minimized. With the
dedication of a seasoned software enthusiast and the heart of a digital
freedom fighter, Tommi stands at the helm of this initiative, working to end
data exploitation and build a user-centric, user-owned internet infrastructure.</p>
</p>
</div>
</div>
<div style="display: flex; margin-bottom: 4em;">
<div style="display: flex; flex-direction: column; flex: 0 0 20%;">
<img src="images/team/dan.webp" alt="Dan" style="width: 100%; margin-top: 1em; object-fit: cover;">
<center><h3 id="dan"><a class="header" href="#dan">Dan</a></h3></center>
<center><h4 id="rust-dev"><a class="header" href="#rust-dev">Rust dev</a></h4></center>
</div>
<div style="margin-left: 1em;">
<p>
Meet Dan, a bona fide wizard of programming who cut his teeth coding back in the
90s, drawing inspiration from the music demoscene. With more than two decades
under his belt, he's a seasoned veteran who understands the ins and outs of the
game.
<p>Just like many of us old-timers, he has a deep appreciation for functional
programming and a penchant for clarity in code, with Rust being his go-to
tool. He's got this knack for building software that runs as close to the
metal as possible, extracting every bit of performance he can get.</p>
<p>One of his remarkable feats is constructing intricate drum machines entirely
from scratch, a testament to his understanding of complex systems and
algorithmic creativity. He's not just a coder; he's a craftsman.</p>
</p>
</div>
</div>
<div style="display: flex; margin-bottom: 4em;">
<div style="display: flex; flex-direction: column; flex: 0 0 20%;">
<img src="images/team/al.webp" alt="Al" style="width: 100%; margin-top: 1em; object-fit: cover;">
<center><h3 id="al"><a class="header" href="#al">Al</a></h3></center>
<center><h4 id="devopsnoc"><a class="header" href="#devopsnoc">DevOps/NOC</a></h4></center>
</div>
<div style="margin-left: 1em;">
<p>
Meet Al, our SEA timezone DevOps maestro, whose journey from pure mathematics
to the world of backend development and deployment is as fascinating as a
well-optimized algorithm. With a fresh master's degree in mathematics, Al's
love affair with Linux was the plot twist that redirected his career path from
abstract theorems to applied math in from of the code.
<p>While his classmates were wrestling with complex integrals, Al was falling
head over heels for the elegance of Linux systems. His setup is a
masterpiece of minimalism and functionality, reflecting the same precision he
once applied to mathematical proofs. You might catch him explaining load
balancing algorithms with the same enthusiasm he once reserved for discussing
the Riemann hypothesis.</p>
<p>But it's in the realm of deployment where Al truly shines. He treats our
infrastructure like a complex equation, constantly seeking the most elegant
solution. His latest obsession? Exploring how NixOS can bring the
immutability and reproducibility of mathematical constants to our systems.
Al's unique background brings a fresh perspective to our team, proving that
in the world of tech, a solid foundation in mathematical thinking is an
invaluable variable in the equation of success.</p>
</p>
</div>
</div>
<div style="display: flex; margin-bottom: 4em;">
<div style="display: flex; flex-direction: column; flex: 0 0 20%;">
<img src="images/team/walt.webp" alt="Walt" style="width: 100%; margin-top: 1em; object-fit: cover;">
<center><h3 id="walt"><a class="header" href="#walt">Walt</a></h3></center>
<center><h4 id="devopsnoc-1"><a class="header" href="#devopsnoc-1">DevOps/NOC</a></h4></center>
</div>
<div style="margin-left: 1em;">
<p>
Walt, our Americas timezone NOC virtuoso, is the digital equivalent of a
Swiss Army knife - versatile, reliable, and always ready to tackle the
unexpected. With a rich background in full-stack development and systems
administration, Walt brings a unique perspective that bridges the often
treacherous gap between application development and infrastructure management.
His expertise is a tapestry woven from threads of Linux wizardry, Docker
sorcery, and cloud platform mastery, creating a skillset that's as diverse as
it is deep.
<p>In the realm of automation, Walt is nothing short of a maestro. Armed with
Python and Bash as his instruments, he orchestrates symphonies of scripts that
turn complex, time-consuming tasks into elegant, efficient processes. But
Walt's true superpower lies in his approach to problem-solving. Where others
see insurmountable obstacles, Walt sees puzzles waiting to be solved, often
conjuring creative solutions that leave the rest of the team wondering if he's
secretly a tech wizard in disguise.</p>
</p>
</div>
</div>
<div style="display: flex; margin-bottom: 4em;">
<div style="display: flex; flex-direction: column; flex: 0 0 20%;">
<img src="images/team/mikko.webp" alt="Mikko" style="width: 100%; margin-top: 1em; object-fit: cover;">
<center><h3 id="mikko"><a class="header" href="#mikko">Mikko</a></h3></center>
<center><h4 id="advisor"><a class="header" href="#advisor">Advisor</a></h4></center>
</div>
<div style="margin-left: 1em;">
<p>
With over 40 years of diverse and significant technical experience, Mikko is the
ideal advisor for creating Internet and networking infrastructure at Rotko
Networks. His expertise spans across all technical layers, from layer 1
hardware programming to layer 7 application interfaces, making him an essential
asset, especially considering the CEO's top-to-bottom learning path.
<p>His technical journey began in the mid-1980s at Nokia Mobile Phones, where he
hand-wrote UI with NEC's Assembly without a compiler, demonstrating a profound
understanding of low-level programming. His most notable achievement at Nokia
was the invention of the menu buttons on the display, a pioneering feature that
has become ubiquitous in mobile user interfaces.</p>
<p>One of the most noteworthy roles was serving as the IT Manager at the
University of Turku, where he was responsible for managing and upgrading the
entire IT infrastructure, including modern Data Center and network services. He
implemented crucial projects like Datacenter upgrades, WLAN enhancements,
network topology redesigns, and developed vital services such as private cloud
storage and learning platforms.</p>
<p>His profound knowledge of technologies like Novell NetWare, AD, MS Exchange,
backup and storage systems, IIS, ISA Firewall, DNS, and DHCP, coupled with his
broad understanding of both low-level and high-level systems, makes him a
tremendous asset for Rotko Networks. His broad and deep technical expertise
ensures he will provide significant guidance in building a robust and efficient
Internet and networking infrastructure.</p>
</p>
</div>
</div>
<style>
  h1 {text-align: center;}
  h3 {
      text-align: center;
      font-size: 1.2em;
      padding: 5px;
      margin: 10px;
  }
</style>
<div style="break-before: page; page-break-before: always;"></div><h2 id="resources"><a class="header" href="#resources">Resources</a></h2>
<h3 id="monitoring"><a class="header" href="#monitoring">Monitoring</a></h3>
<ul>
<li><a href="https://github.com/showwin/speedtest-go">speedtest-go</a> - A simple command line interface for testing internet bandwidth globally</li>
<li><a href="https://github.com/20c/vaping">vaping</a> - A vaping monitoring framework written in Python</li>
<li><a href="https://oss.oetiker.ch/smokeping/">smokeping</a> - Latency Monitor &amp; Packet Loss Tracker</li>
<li><a href="https://bird.network.cz/">bird</a> - BIRD Internet Routing Daemon</li>
<li><a href="https://github.com/RIPE-NCC/ripe-atlas-software-probe">Atlas Probe</a> - RIPE Atlas Software Probe</li>
<li><a href="https://github.com/TwinProduction/gatus">gatus</a> - Service health dashboard</li>
</ul>
<h3 id="alerts"><a class="header" href="#alerts">Alerts</a></h3>
<ul>
<li><a href="https://pushover.net/">pushover</a> - Multidevice Real-time notifications/alerts</li>
<li><a href="https://github.com/rotkonetworks/snitch">snitch</a> - Watchdog for prometheus alerts</li>
</ul>
<h3 id="web-tools"><a class="header" href="#web-tools">Web Tools</a></h3>
<ul>
<li><a href="https://williamyaps.github.io/wlmjavascript/servercli.html">Speedtest server list</a></li>
<li><a href="https://opengeofeed.org/validator">Geofeed Validator</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="post-mortems"><a class="header" href="#post-mortems">Post Mortems</a></h1>
<h2 id="why-we-write-postmortems"><a class="header" href="#why-we-write-postmortems">Why We Write Postmortems</a></h2>
<p>At Rotko Network, we believe in radical transparency. While it's common in our
industry to see providers minimize their technical issues or deflect blame onto
others, we choose a different path. Every failure is an opportunity to learn
and improve - not just for us, but for the broader network engineering community.</p>
<p>We've observed a concerning trend where major providers often:</p>
<ul>
<li>Minimize the scope of incidents</li>
<li>Provide vague technical details</li>
<li>Deflect responsibility to third parties</li>
<li>Hide valuable learning opportunities</li>
</ul>
<p>A prime example of this behavior can be seen in the <a href="https://blog.cloudflare.com/ovhcloud-outage-route-leak-october-2024">October 2024 OVHcloud incident</a>,
where their initial response blamed a "peering partner" without acknowledging
the underlying architectural(basic filtering) vulnerabilities that allowed
the route leak to cause such significant impact.</p>
<p>In contrast, our postmortems:</p>
<ul>
<li>Provide detailed technical analysis</li>
<li>Acknowledge our mistakes openly</li>
<li>Share our learnings</li>
<li>Document both immediate fixes and longer-term improvements</li>
<li>Include specific timeline data for accountability</li>
<li>Reference relevant RFCs and technical standards</li>
</ul>
<h2 id="directory"><a class="header" href="#directory">Directory</a></h2>
<h3 id="2024"><a class="header" href="#2024">2024</a></h3>
<ul>
<li><a href="network_outage_pm_241219.html">2024-12-19: Edge Router Configuration Incident</a>
<ul>
<li>Impact: 95-minute connectivity loss affecting AMSIX, BKNIX, and HGC Hong Kong IPTx</li>
<li>Root Cause: Misconceptions about router-id uniqueness requirements and OSPF behavior</li>
<li>Status: Partial resolution, follow-up planned for 2025</li>
</ul>
</li>
</ul>
<h3 id="2025"><a class="header" href="#2025">2025</a></h3>
<ul>
<li><a href="network_outage_pm_250306.html">2025-3-6: Router Misconfiguration Incident</a>
<ul>
<li>Impact: 18-minute network outage affecting lower era points for validator and RPC nodes downtime</li>
<li>Root Cause: Misconfiguration between a router and switch.</li>
<li>Status: Fully recover</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="network-outage-postmortem-2024-12-1920"><a class="header" href="#network-outage-postmortem-2024-12-1920">Network Outage Postmortem (2024-12-19/20)</a></h1>
<h2 id="summary-1"><a class="header" href="#summary-1">Summary</a></h2>
<p>A planned intervention to standardize router-id configurations across our edge
routing infrastructure resulted in an unexpected connectivity loss affecting our
AMSIX Amsterdam, BKNIX, and HGC Hong Kong IPTx peering sessions. The incident
lasted approximately 95 minutes (23:55 UTC to 01:30 UTC) and impacted our validator
performance on both Kusama and Polkadot networks. Specifically, this resulted in
missed votes during Kusama Session 44,359 at Era 7,496 and Polkadot Session
10,010 at Era 1,662 with a 0.624 MVR (missed vote ratio).</p>
<p><img src="./images/postmortem/rotko_old_upstream.webp" alt="Misconfguration illustrated" /></p>
<h2 id="technical-details"><a class="header" href="#technical-details">Technical Details</a></h2>
<p>The root cause was traced to an attempt to resolve a pre-existing routing anomaly
where our edge routers were operating with multiple router-ids across different
uplink connections and iBGP sessions. The heterogeneous router-id configuration
had been causing nexthop resolution failures and inability to transit in our
BGP infrastructure.</p>
<p>The original misconfiguration stemmed from an incorrect assumption that router-ids
needed to be publicly unique at Internet exchange points. This is not the case - router-ids
only need to be unique within our Interior Gateway Protocol (IGP)
domain. This misunderstanding led to the implementation of multiple router-ids
in loopback interfaces, creating unnecessary complexity in our routing
infrastructure.</p>
<p>During the remediation attempt to standardize OSPF router-ids to a uniform
value across the infrastructure, we encountered an unexpected failure mode
that propagated through our second edge router, resulting in a total loss of
connectivity regardless of router&amp;&amp;uplink redundancy. The exact mechanism of
the secondary failure remains under investigation - the cascade effect that
caused our redundant edge router to lose connectivity suggests an underlying
architectural vulnerability in our BGP session management.</p>
<h2 id="response-timeline"><a class="header" href="#response-timeline">Response Timeline</a></h2>
<ul>
<li>23:55 UTC: Initiated planned router-id standardization</li>
<li>~23:56 UTC: Primary connectivity loss detected</li>
<li>~23:56 UTC: Secondary edge router unexpectedly lost connectivity</li>
<li>01:30 UTC: Full service restored via configuration rollback</li>
</ul>
<h2 id="mitigation"><a class="header" href="#mitigation">Mitigation</a></h2>
<p>Recovery was achieved through an onsite restoration of backed-up router
configurations. While this approach was successful, the 95-minute resolution
time indicates a need for more robust rollback procedures and most of all
precaution during network configuration.</p>
<h2 id="impact"><a class="header" href="#impact">Impact</a></h2>
<ul>
<li>Kusama validator session 44,359 experienced degraded performance with MVR 1 in Era 7,496 and missed votes in Era 7,495</li>
<li>Polkadot validator session 10,010 experienced degraded performance with 0.624 MVR in Era 1,662</li>
<li>Temporary loss of peering sessions with AMSIX, BKNIX, and HGC Hong Kong IPTx</li>
</ul>
<p><img src="./images/postmortem/rotko_upstream.webp" alt="Correct connectivity" /></p>
<h2 id="current-status-and-future-plans"><a class="header" href="#current-status-and-future-plans">Current Status and Future Plans</a></h2>
<p>The underlying routing issue (multiple router-ids in loopback) remains unresolved.
Due to the maintenance freeze in internet exchanges during the holiday period,
the resolution has been postponed until next year. To ensure higher redundancy
during the next maintenance window, we plan to install a third edge router
before attempting the configuration standardization again.</p>
<h2 id="future-work"><a class="header" href="#future-work">Future Work</a></h2>
<ol>
<li>Implementation of automated configuration validation testing</li>
<li>Enforce usage of Safe Mode during remote maintenance to prevent cascading failures</li>
<li>Investigation into BGP session interdependencies between edge routers</li>
<li>Read <a href="https://www.ietf.org/rfc/rfc2328.txt">RFC 2328</a> to understand actual
protocol and how vendor implementation differ</li>
<li>Installation and configuration of third edge router to provide N+2 redundancy
during upcoming maintenance</li>
<li>Study route reflector architechture to move route management from edge
routers to centralized route server like birdc that is known for correctness
in implementation of RFC specs.</li>
<li>Implementation of <a href="https://www.rfc-editor.org/rfc/rfc8195.html">RFC 8195</a> for improved traffic steering via large BGP communities</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="network-outage-postmortem-2025-3-6"><a class="header" href="#network-outage-postmortem-2025-3-6">Network Outage Postmortem (2025-3-6)</a></h1>
<h2 id="summary-2"><a class="header" href="#summary-2">Summary</a></h2>
<p>On March 6, 2025, at approximately 09:31 UTC, a network misconfiguration on router caused an outage,
rendering the router and other dependent infrastructure unreachable. Reversing the misconfiguration did not
immediately restore network connectivity, leading to an 18-minute downtime until a router reboot resolved the issue.
The outage impacted a lower era points for our validators, while our RPC nodes SLA allows ~40 mins of weekly downtime.</p>
<h2 id="technical-details-1"><a class="header" href="#technical-details-1">Technical Details</a></h2>
<p>The issue arose when configuring our router &amp; switch infra. Approximately 1-3 minutes later after doing the suspected cause
the infra is not reachable using ssh and our proxy for ssh is inside the infra. And after tried to use WireGuard, we can ssh
into the router and reverse the changes. However, this reversal did not take effect immediately, leaving the router in a stuck
state where SSH access was unreachable. This situation persisted until a manual reboot restored proper functionality.</p>
<h2 id="response-timeline-1"><a class="header" href="#response-timeline-1">Response Timeline</a></h2>
<ul>
<li>09:31 UTC: Network outage occurred &amp; connectivity loss detected</li>
<li>~09:37 UTC: Connectivity with WireGuard established</li>
<li>~09:38 UTC: Reversal of the root cause, but not solve the problem</li>
<li>~09:47 UTC: Decision to reboot the router</li>
<li>09:49 UTC: Service restored after rebooting the router</li>
</ul>
<h2 id="mitigation-1"><a class="header" href="#mitigation-1">Mitigation</a></h2>
<p>The immediate resolution was to reboot bkk50, which restored its functionality as the network gateway. However, this incident highlighted
the lack of a fully redundant infrastructure.</p>
<h2 id="impact-1"><a class="header" href="#impact-1">Impact</a></h2>
<ul>
<li>Network downtime lasted approximately 18 minutes, affecting internal infrastructure.</li>
<li>No major disruption to services, but some validators experienced mildly lower era points in Era 7801 for <a href="https://apps.turboflakes.io/?chain=kusama#/validator/ESSZefozpZYVLbLF1vaGtabthQYg8PVXiTytVm6YiiwAnee?mode=history">Kusama</a> and Era 1738 for <a href="https://apps.turboflakes.io/#/validator/1ArdZJtNUrZsfidfn1t69xHaSWwzf6PQNdLEUpcnVmbkZc5?mode=history">Polkadot</a>.</li>
<li>No impact on RPC services, which remain within SLA allowances (weekly downtime limit: 40 minutes).</li>
</ul>
<h2 id="current-status-and-future-plans-1"><a class="header" href="#current-status-and-future-plans-1">Current Status and Future Plans</a></h2>
<p>The network is now fully operational. However, this incident underscores the need for more robust redundancy and streamlined access to critical infrastructure.</p>
<h2 id="future-work-1"><a class="header" href="#future-work-1">Future Work</a></h2>
<h3 id="identified-problems"><a class="header" href="#identified-problems">Identified Problems:</a></h3>
<ul>
<li>Lack of a redundant fallback mechanism for critical routers.</li>
<li>Current proxy method for router access relies on internal infrastructure instead of an external jump server.</li>
<li>Forced reliance on WireGuard VPN for emergency access, which can be cumbersome.</li>
</ul>
<h3 id="improvement-plan"><a class="header" href="#improvement-plan">Improvement Plan:</a></h3>
<p>Jump Server Access: Configure external jump server access, allowing:</p>
<ul>
<li>Simple SSH access via ssh router_name@jump.rotko.net.</li>
<li>Users to have pre-configured jump configurations on their machines.</li>
<li>Access management via per-user SSH authorized_keys file.</li>
</ul>
<p>Network Redundancy:</p>
<ul>
<li>Improving infra setup to have more redundancy.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ipv6-protocol"><a class="header" href="#ipv6-protocol">IPv6 Protocol</a></h1>
<h2 id="basic-ipv6-header-structure"><a class="header" href="#basic-ipv6-header-structure">Basic IPv6 Header Structure</a></h2>
<h3 id="fixed-header-format-40-bytes"><a class="header" href="#fixed-header-format-40-bytes">Fixed Header Format (40 bytes)</a></h3>
<pre><code> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Version| Traffic Class |           Flow Label                  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Payload Length        |  Next Header  |   Hop Limit   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                                                               +
|                                                               |
+                         Source Address                        +
|                                                               |
+                                                               +
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                                                               +
|                                                               |
+                      Destination Address                      +
|                                                               |
+                                                               +
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</code></pre>
<h3 id="header-fields-explained"><a class="header" href="#header-fields-explained">Header Fields Explained</a></h3>
<p><strong>Version (4 bits)</strong></p>
<pre><code>Value: 6 (0110 in binary)
Purpose: Identifies IPv6 packets
</code></pre>
<p><strong>Traffic Class (8 bits)</strong></p>
<pre><code>Bits 0-5: DSCP (Differentiated Services Code Point)
Bits 6-7: ECN (Explicit Congestion Notification)
Purpose: QoS and congestion control
</code></pre>
<p><strong>Flow Label (20 bits)</strong></p>
<pre><code>Range: 0x00000 to 0xFFFFF
Purpose: Identifies flows for QoS handling
Usage: Same value for all packets in a flow
</code></pre>
<p><strong>Payload Length (16 bits)</strong></p>
<pre><code>Range: 0-65,535 bytes
Includes: Extension headers + data
Note: Jumbograms use Hop-by-Hop extension
</code></pre>
<p><strong>Next Header (8 bits)</strong></p>
<pre><code>Common values:
0: Hop-by-Hop Options
6: TCP
17: UDP
43: Routing Header
44: Fragment Header
50: ESP (IPsec)
51: AH (IPsec)
58: ICMPv6
59: No Next Header
60: Destination Options
</code></pre>
<p><strong>Hop Limit (8 bits)</strong></p>
<pre><code>Range: 0-255
Purpose: Prevents routing loops (like IPv4 TTL)
Decremented: By 1 at each hop
</code></pre>
<p><strong>Source/Destination Address (128 bits each)</strong></p>
<pre><code>Format: 8 groups of 4 hex digits
Example: 2001:0db8:0000:0000:0000:0000:0000:0001
Compressed: 2001:db8::1
</code></pre>
<h2 id="ipv6-extension-headers"><a class="header" href="#ipv6-extension-headers">IPv6 Extension Headers</a></h2>
<h3 id="extension-header-chain"><a class="header" href="#extension-header-chain">Extension Header Chain</a></h3>
<pre><code>IPv6 Header → Extension Header 1 → Extension Header 2 → Upper Layer
     ↓                    ↓                    ↓
Next Header = 43    Next Header = 44    Next Header = 6 (TCP)
</code></pre>
<h3 id="hop-by-hop-options-header-type-0"><a class="header" href="#hop-by-hop-options-header-type-0">Hop-by-Hop Options Header (Type 0)</a></h3>
<pre><code>+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Next Header  |  Hdr Ext Len  |                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
|                                                               |
.                            Options                            .
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

Common Options:
- Pad1 (Type 0): 1-byte padding
- PadN (Type 1): N-byte padding
- Router Alert (Type 5): MLD, RSVP
- Jumbo Payload (Type 194): Packets &gt; 65,535 bytes
</code></pre>
<h3 id="routing-header-type-43"><a class="header" href="#routing-header-type-43">Routing Header (Type 43)</a></h3>
<pre><code>Types:
- Type 0: Source routing (deprecated - security risk)
- Type 2: Mobile IPv6
- Type 3: RPL (IoT routing)
- Type 4: Segment Routing (SRv6)
</code></pre>
<h3 id="fragment-header-type-44"><a class="header" href="#fragment-header-type-44">Fragment Header (Type 44)</a></h3>
<pre><code>+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Next Header  |   Reserved    |      Fragment Offset    |Res|M|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Identification                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

M flag: More fragments (1) or last fragment (0)
Offset: In 8-byte units
ID: Same for all fragments of a packet
</code></pre>
<h3 id="destination-options-header-type-60"><a class="header" href="#destination-options-header-type-60">Destination Options Header (Type 60)</a></h3>
<pre><code>Purpose: Options for destination only
Format: Same as Hop-by-Hop
Common use: Mobile IPv6 Home Address
</code></pre>
<h3 id="authentication-header-type-51"><a class="header" href="#authentication-header-type-51">Authentication Header (Type 51)</a></h3>
<pre><code>+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Next Header  |  Payload Len  |          RESERVED             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                 Security Parameters Index (SPI)               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Sequence Number Field                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                Integrity Check Value (ICV)                    +
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</code></pre>
<h3 id="esp-header-type-50"><a class="header" href="#esp-header-type-50">ESP Header (Type 50)</a></h3>
<pre><code>Encrypts payload and optionally authenticates
Used for IPsec VPNs
</code></pre>
<h2 id="ipv6-address-types-and-formats"><a class="header" href="#ipv6-address-types-and-formats">IPv6 Address Types and Formats</a></h2>
<h3 id="address-categories"><a class="header" href="#address-categories">Address Categories</a></h3>
<p><strong>Unicast Addresses</strong></p>
<pre><code>Global Unicast: 2000::/3 (2000:: to 3fff::)
Unique Local: fc00::/7 (fc00:: to fdff::)
Link-Local: fe80::/10
Loopback: ::1/128
Unspecified: ::/128
IPv4-mapped: ::ffff:0:0/96
</code></pre>
<p><strong>Multicast Addresses</strong></p>
<pre><code>Format: ff00::/8
Flags (4 bits) + Scope (4 bits) + Group ID (112 bits)

Common Scopes:
ff01:: - Interface-local
ff02:: - Link-local
ff05:: - Site-local
ff0e:: - Global

Well-known:
ff02::1 - All nodes
ff02::2 - All routers
ff02::5 - OSPF routers
ff02::6 - OSPF DRs
ff02::1:2 - DHCP agents
ff02::1:ff00:0/104 - Solicited-node
</code></pre>
<p><strong>Anycast Addresses</strong></p>
<pre><code>No special format - any unicast can be anycast
Common: Subnet-Router anycast (all zeros host part)
</code></pre>
<h2 id="practical-examples"><a class="header" href="#practical-examples">Practical Examples</a></h2>
<h3 id="1-viewing-ipv6-headers-with-tcpdump"><a class="header" href="#1-viewing-ipv6-headers-with-tcpdump">1. Viewing IPv6 Headers with tcpdump:</a></h3>
<pre><code class="language-bash"># Show IPv6 headers
tcpdump -i eth0 -n -vv ip6

# Show specific next header
tcpdump -i eth0 'ip6[6] == 58'  # ICMPv6
tcpdump -i eth0 'ip6[6] == 6'   # TCP
tcpdump -i eth0 'ip6[6] == 17'  # UDP

# Show IPv6 with extension headers
tcpdump -i eth0 'ip6[6] == 44'  # Fragment header
</code></pre>
<h3 id="2-common-wireshark-filters"><a class="header" href="#2-common-wireshark-filters">2. Common Wireshark Filters:</a></h3>
<pre><code>ipv6.version == 6
ipv6.tclass == 0x00           # Traffic class
ipv6.flow == 0x12345          # Flow label
ipv6.nxt == 58                # Next header ICMPv6
ipv6.hlim &lt; 255               # Hop limit
ipv6.src == 2001:db8::1       # Source address
ipv6.dst == ff02::1           # Destination address
</code></pre>
<h3 id="3-linux-ipv6-commands"><a class="header" href="#3-linux-ipv6-commands">3. Linux IPv6 Commands:</a></h3>
<pre><code class="language-bash"># Show IPv6 addresses
ip -6 addr show

# Show IPv6 routes
ip -6 route show

# Show IPv6 neighbors
ip -6 neigh show

# Enable IPv6 forwarding
sysctl -w net.ipv6.conf.all.forwarding=1
</code></pre>
<h2 id="security-considerations"><a class="header" href="#security-considerations">Security Considerations</a></h2>
<h3 id="mikrotik-ipv6-header-filtering"><a class="header" href="#mikrotik-ipv6-header-filtering">MikroTik IPv6 Header Filtering:</a></h3>
<pre><code class="language-mikrotik"># Filter invalid IPv6 headers
/ipv6 firewall raw
# Drop packets with routing header type 0
add chain=prerouting protocol=6 ipv6-header=routing-type0 action=drop comment="Deprecated RH0"

# Drop fragments to critical services
add chain=prerouting protocol=6 ipv6-header=fragment dst-port=22,179,443 action=drop

# Protect against tiny fragments
add chain=prerouting protocol=6 ipv6-header=fragment fragment-offset=0-7 action=drop

# Drop packets with too many extension headers
add chain=prerouting hop-limit=less-than:2 action=drop comment="Too many hops consumed"
</code></pre>
<h3 id="extension-header-order"><a class="header" href="#extension-header-order">Extension Header Order:</a></h3>
<pre><code>Recommended order (RFC 8200):
1. Hop-by-Hop Options
2. Destination Options (for routing header)
3. Routing Header
4. Fragment Header
5. Authentication Header
6. ESP Header
7. Destination Options (for final destination)
8. Upper-layer header

Each header should appear at most once (except Destination Options)
</code></pre>
<p><strong>Key Points:</strong></p>
<ul>
<li>IPv6 header is simpler than IPv4 (no checksum, fixed size)</li>
<li>Extension headers provide flexibility</li>
<li>Always process headers in order</li>
<li>Some extension headers have security implications</li>
<li>Fragmentation only by source (no router fragmentation)</li>
<li>Minimum MTU is 1280 bytes (vs 68 for IPv4)</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="icmpv6-structure-and-types"><a class="header" href="#icmpv6-structure-and-types">ICMPv6 Structure and Types</a></h2>
<h3 id="basic-icmpv6-header-structure"><a class="header" href="#basic-icmpv6-header-structure">Basic ICMPv6 Header Structure</a></h3>
<pre><code> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Type      |     Code      |          Checksum             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                         Message Body                          +
|                                                               |
</code></pre>
<h3 id="icmpv6-message-types"><a class="header" href="#icmpv6-message-types">ICMPv6 Message Types</a></h3>
<h4 id="error-messages-types-1-127"><a class="header" href="#error-messages-types-1-127">Error Messages (Types 1-127)</a></h4>
<p><strong>Type 1: Destination Unreachable</strong></p>
<pre><code>Code 0: No route to destination
Code 1: Communication administratively prohibited
Code 2: Beyond scope of source address
Code 3: Address unreachable
Code 4: Port unreachable
Code 5: Source address failed ingress/egress policy
Code 6: Reject route to destination
Code 7: Error in Source Routing Header
</code></pre>
<p><strong>Type 2: Packet Too Big</strong></p>
<pre><code>Code: 0 (always)
Body includes: MTU (4 bytes) + As much of original packet as possible
</code></pre>
<p><strong>Type 3: Time Exceeded</strong></p>
<pre><code>Code 0: Hop limit exceeded in transit
Code 1: Fragment reassembly time exceeded
</code></pre>
<p><strong>Type 4: Parameter Problem</strong></p>
<pre><code>Code 0: Erroneous header field encountered
Code 1: Unrecognized Next Header type encountered
Code 2: Unrecognized IPv6 option encountered
Body includes: Pointer (4 bytes) indicating error location
</code></pre>
<h4 id="informational-messages-types-128-255"><a class="header" href="#informational-messages-types-128-255">Informational Messages (Types 128-255)</a></h4>
<p><strong>Type 128: Echo Request</strong></p>
<pre><code>Code: 0
Used by: ping6
Body: Identifier + Sequence Number + Data
</code></pre>
<p><strong>Type 129: Echo Reply</strong></p>
<pre><code>Code: 0
Response to: Echo Request
Body: Same as Echo Request
</code></pre>
<p><strong>Type 133: Router Solicitation (RS)</strong></p>
<pre><code>Code: 0
Source: Host seeking routers
Destination: ff02::2 (all-routers)
Options: Source Link-Layer Address
</code></pre>
<p><strong>Type 134: Router Advertisement (RA)</strong></p>
<pre><code>Code: 0
Source: Router
Destination: ff02::1 (all-nodes) or unicast
Flags: M|O|H|Prf|P|R
Options: 
- Prefix Information
- MTU
- Source Link-Layer Address
- Route Information
- DNS Information (RFC 8106)
</code></pre>
<p><strong>Type 135: Neighbor Solicitation (NS)</strong></p>
<pre><code>Code: 0
Purpose: Address resolution, DAD, NUD
Target: Solicited IPv6 address
Options: Source Link-Layer Address
</code></pre>
<p><strong>Type 136: Neighbor Advertisement (NA)</strong></p>
<pre><code>Code: 0
Flags: R|S|O (Router|Solicited|Override)
Target: IPv6 address being advertised
Options: Target Link-Layer Address
</code></pre>
<p><strong>Type 137: Redirect</strong></p>
<pre><code>Code: 0
Source: Router only
Purpose: Inform host of better next-hop
Body: Target Address + Destination Address
</code></pre>
<h3 id="multicast-listener-discovery-mld"><a class="header" href="#multicast-listener-discovery-mld">Multicast Listener Discovery (MLD)</a></h3>
<p><strong>Type 130: Multicast Listener Query</strong></p>
<pre><code>Code: 0
Versions: MLDv1 (RFC 2710), MLDv2 (RFC 3810)
</code></pre>
<p><strong>Type 131: Multicast Listener Report (MLDv1)</strong></p>
<pre><code>Code: 0
</code></pre>
<p><strong>Type 132: Multicast Listener Done</strong></p>
<pre><code>Code: 0
</code></pre>
<p><strong>Type 143: Multicast Listener Report (MLDv2)</strong></p>
<pre><code>Code: 0
</code></pre>
<h3 id="secure-neighbor-discovery-send"><a class="header" href="#secure-neighbor-discovery-send">Secure Neighbor Discovery (SEND)</a></h3>
<p><strong>Type 148: Certification Path Solicitation</strong>
<strong>Type 149: Certification Path Advertisement</strong></p>
<h3 id="other-important-types"><a class="header" href="#other-important-types">Other Important Types</a></h3>
<p><strong>Type 138: Router Renumbering</strong></p>
<pre><code>Code 0: Router Renumbering Command
Code 1: Router Renumbering Result
Code 255: Sequence Number Reset
</code></pre>
<p><strong>Type 139: Node Information Query</strong>
<strong>Type 140: Node Information Response</strong></p>
<p><strong>Type 141: Inverse ND Solicitation</strong>
<strong>Type 142: Inverse ND Advertisement</strong></p>
<h3 id="mobile-ipv6-types"><a class="header" href="#mobile-ipv6-types">Mobile IPv6 Types</a></h3>
<p><strong>Type 144: Home Agent Address Discovery Request</strong>
<strong>Type 145: Home Agent Address Discovery Reply</strong>
<strong>Type 146: Mobile Prefix Solicitation</strong>
<strong>Type 147: Mobile Prefix Advertisement</strong></p>
<h3 id="rpl-routing-protocol-for-low-power"><a class="header" href="#rpl-routing-protocol-for-low-power">RPL (Routing Protocol for Low-Power)</a></h3>
<p><strong>Type 155: RPL Control Message</strong></p>
<h2 id="practical-examples-1"><a class="header" href="#practical-examples-1">Practical Examples</a></h2>
<h3 id="1-capturing-icmpv6-with-tcpdump"><a class="header" href="#1-capturing-icmpv6-with-tcpdump">1. Capturing ICMPv6 with tcpdump:</a></h3>
<pre><code class="language-bash"># All ICMPv6
tcpdump -i eth0 icmp6

# Specific types
tcpdump -i eth0 'icmp6 and icmp6[0] == 134'  # Router Advertisements
tcpdump -i eth0 'icmp6 and icmp6[0] == 135'  # Neighbor Solicitations
</code></pre>
<h3 id="2-generating-icmpv6-messages"><a class="header" href="#2-generating-icmpv6-messages">2. Generating ICMPv6 Messages:</a></h3>
<pre><code class="language-bash"># Echo Request
ping6 2001:db8::1

# Router Solicitation
rdisc6 eth0

# Neighbor Discovery
ndisc6 2001:db8::1 eth0
</code></pre>
<h3 id="3-common-wireshark-filters"><a class="header" href="#3-common-wireshark-filters">3. Common Wireshark Filters:</a></h3>
<pre><code>icmpv6.type == 1              # Destination Unreachable
icmpv6.type == 134            # Router Advertisement
icmpv6.type == 135            # Neighbor Solicitation
icmpv6.code == 0              # Specific code
icmpv6.nd.flag.router         # RA with Router flag
</code></pre>
<h2 id="security-considerations-1"><a class="header" href="#security-considerations-1">Security Considerations</a></h2>
<h3 id="icmpv6-filtering-firewall-best-practices"><a class="header" href="#icmpv6-filtering-firewall-best-practices">ICMPv6 Filtering Firewall Best Practices:</a></h3>
<pre><code class="language-mikrotik"># Core router (firewall)
/ipv6 firewall raw
add chain=prerouting protocol=icmpv6 icmp-options=135:0 action=accept comment="Type 135: Neighbor Solicitation"
add chain=prerouting protocol=icmpv6 icmp-options=136:0 action=accept comment="Type 136: Neighbor Advertisement"
add chain=prerouting protocol=icmpv6 icmp-options=2:0 action=accept comment="Type 2: Packet Too Big"
add chain=prerouting protocol=icmpv6 icmp-options=3:0-1 action=accept comment="Type 3: Time Exceeded"
add chain=prerouting protocol=icmpv6 icmp-options=4:0-2 action=accept comment="Type 4: Parameter Problem"
add chain=prerouting protocol=icmpv6 icmp-options=133:0 action=accept comment="Type 133: Router Solicitation"
add chain=prerouting protocol=icmpv6 icmp-options=134:0 action=accept comment="Type 134: Router Advertisement"
add chain=prerouting protocol=icmpv6 icmp-options=128:0 limit=10,5:packet action=accept comment="Type 128: Echo Request"
add chain=prerouting protocol=icmpv6 icmp-options=129:0 action=accept comment="Type 129: Echo Reply"
add chain=prerouting protocol=icmpv6 action=drop comment="Drop all other ICMPv6"
</code></pre>
<h3 id="icmpv6-filtering-ix-facing-edge-router-best-practices"><a class="header" href="#icmpv6-filtering-ix-facing-edge-router-best-practices">ICMPv6 Filtering IX-facing Edge Router Best Practices:</a></h3>
<pre><code class="language-mikrotik"># Edge router (IX-facing interface protection)
/ipv6 firewall raw
# PREROUTING (Ingress from IX)
add chain=prerouting in-interface=sfp-sfpplus1 protocol=icmpv6 icmp-options=133:0-137:0 hop-limit=not-equal:255 action=drop
add chain=prerouting in-interface=sfp-sfpplus1 protocol=icmpv6 icmp-options=134:0 action=drop
add chain=prerouting in-interface=sfp-sfpplus1 protocol=icmpv6 icmp-options=137:0 action=drop
add chain=prerouting protocol=icmpv6 icmp-options=2:0 action=accept
add chain=prerouting protocol=icmpv6 icmp-options=3:0-1 limit=50,20:packet action=accept
add chain=prerouting protocol=icmpv6 icmp-options=4:0-2 limit=50,20:packet action=accept
add chain=prerouting protocol=icmpv6 icmp-options=1:0-4 limit=50,20:packet action=accept
add chain=prerouting protocol=icmpv6 icmp-options=135:0 action=accept
add chain=prerouting protocol=icmpv6 icmp-options=136:0 action=accept
add chain=prerouting protocol=icmpv6 icmp-options=128:0 limit=5,2:packet action=accept
add chain=prerouting protocol=icmpv6 icmp-options=129:0 action=accept
add chain=prerouting protocol=icmpv6 action=drop

# OUTPUT (Egress to IX)
add chain=output out-interface=sfp-sfpplus1 protocol=icmpv6 icmp-options=134:0 action=drop
add chain=output out-interface=sfp-sfpplus1 protocol=icmpv6 icmp-options=137:0 action=drop
add chain=output out-interface=sfp-sfpplus1 protocol=icmpv6 icmp-options=1:0-7 limit=50,20:packet action=accept
add chain=output out-interface=sfp-sfpplus1 protocol=icmpv6 icmp-options=3:0-1 limit=50,20:packet action=accept
add chain=output out-interface=sfp-sfpplus1 protocol=icmpv6 icmp-options=129:0 limit=5,2:packet action=accept
add chain=output protocol=icmpv6 action=accept comment="Allow other ICMPv6 output"
</code></pre>
<p><strong>Key Points:</strong></p>
<ul>
<li>ICMPv6 is mandatory for IPv6 operation (unlike ICMP in IPv4)</li>
<li>Never block all ICMPv6 - it breaks IPv6</li>
<li>Types 1-127 are errors, 128-255 are informational</li>
<li>Neighbor Discovery (Types 133-137) is critical for IPv6</li>
<li>Path MTU Discovery relies on Type 2 (Packet Too Big)</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ipv6-address-generation"><a class="header" href="#ipv6-address-generation">IPv6 Address Generation</a></h1>
<h2 id="overview-of-ipv6-address-types"><a class="header" href="#overview-of-ipv6-address-types">Overview of IPv6 Address Types</a></h2>
<h3 id="address-hierarchy"><a class="header" href="#address-hierarchy">Address Hierarchy</a></h3>
<pre><code>Link-Local (fe80::/10) → Always first, mandatory
     ↓
Global/ULA → Generated after link-local
     ↓
Temporary/Privacy → Optional privacy addresses
</code></pre>
<h2 id="link-local-address-generation"><a class="header" href="#link-local-address-generation">Link-Local Address Generation</a></h2>
<h3 id="eui-64-method-traditional"><a class="header" href="#eui-64-method-traditional">EUI-64 Method (Traditional)</a></h3>
<p><strong>Step 1: Start with MAC address</strong></p>
<pre><code>MAC: 00:50:56:ab:cd:ef
</code></pre>
<p><strong>Step 2: Insert FFFE in the middle</strong></p>
<pre><code>00:50:56:FF:FE:ab:cd:ef
</code></pre>
<p><strong>Step 3: Flip the 7th bit (U/L bit)</strong></p>
<pre><code>00 = 00000000 → 00000010 = 02
Result: 02:50:56:FF:FE:ab:cd:ef
</code></pre>
<p><strong>Step 4: Add link-local prefix</strong></p>
<pre><code>fe80::0250:56ff:feab:cdef/64
</code></pre>
<h3 id="stable-privacy-addresses-rfc-8064"><a class="header" href="#stable-privacy-addresses-rfc-8064">Stable Privacy Addresses (RFC 8064)</a></h3>
<p><strong>Modern method using hash function:</strong></p>
<pre><code>Interface_ID = Hash(Prefix, Net_Iface, Network_ID, Secret_Key)

Where:
- Prefix = fe80::/64
- Net_Iface = Interface index
- Network_ID = Interface name/type
- Secret_Key = Random value

Result: fe80::8b0a:55e1:7dd0:d5be/64
</code></pre>
<h2 id="global-address-generation"><a class="header" href="#global-address-generation">Global Address Generation</a></h2>
<h3 id="stateless-address-autoconfiguration-slaac"><a class="header" href="#stateless-address-autoconfiguration-slaac">Stateless Address Autoconfiguration (SLAAC)</a></h3>
<p><strong>Step 1: Router Advertisement provides prefix</strong></p>
<pre><code>Router Advertisement contains:
- Prefix: 2001:db8:abc::/64
- Valid Lifetime: 2592000 seconds (30 days)
- Preferred Lifetime: 604800 seconds (7 days)
- A-flag: 1 (use for SLAAC)
- L-flag: 1 (on-link)
</code></pre>
<p><strong>Step 2: Host combines prefix with Interface ID</strong></p>
<p>Method 1 - EUI-64:</p>
<pre><code>Prefix:        2001:db8:abc::/64
Interface ID:  0250:56ff:feab:cdef
Result:        2001:db8:abc::250:56ff:feab:cdef/64
</code></pre>
<p>Method 2 - Stable Privacy:</p>
<pre><code>Prefix:        2001:db8:abc::/64  
Interface ID:  c3b:84cd:dc09:6d91
Result:        2001:db8:abc:0:c3b:84cd:dc09:6d91/64
</code></pre>
<h3 id="privacytemporary-addresses-rfc-4941"><a class="header" href="#privacytemporary-addresses-rfc-4941">Privacy/Temporary Addresses (RFC 4941)</a></h3>
<p><strong>Generate random Interface ID:</strong></p>
<pre><code>1. Generate random 64-bit value
2. Set universal/local bit to 0 (local)
3. Ensure not duplicate on link

Example: 2001:db8:abc:0:c8f9:5d72:3289:fee5/64

Properties:
- Valid lifetime: From RA
- Preferred lifetime: Shorter (typically 1 day)
- Regenerated before expiry
</code></pre>
<h2 id="complete-address-generation-process"><a class="header" href="#complete-address-generation-process">Complete Address Generation Process</a></h2>
<h3 id="1-interface-initialization"><a class="header" href="#1-interface-initialization">1. Interface Initialization</a></h3>
<pre><code>Interface comes up
     ↓
Generate link-local address
     ↓
Perform DAD on link-local
     ↓
Join multicast groups:
- ff02::1 (all-nodes)
- ff02::1:ffXX:XXXX (solicited-node)
</code></pre>
<h3 id="2-router-discovery"><a class="header" href="#2-router-discovery">2. Router Discovery</a></h3>
<pre><code>Send Router Solicitation to ff02::2
     ↓
Receive Router Advertisement
     ↓
Process prefix information
</code></pre>
<h3 id="3-global-address-configuration"><a class="header" href="#3-global-address-configuration">3. Global Address Configuration</a></h3>
<pre><code>For each prefix with A-flag:
     ↓
Generate Interface ID (EUI-64/Privacy/Stable)
     ↓
Combine with prefix
     ↓
Perform DAD
     ↓
Configure address if DAD succeeds
</code></pre>
<h3 id="4-address-states"><a class="header" href="#4-address-states">4. Address States</a></h3>
<pre><code>Tentative → During DAD
     ↓
Valid/Preferred → Normal use
     ↓
Valid/Deprecated → Preferred lifetime expired
     ↓
Invalid → Valid lifetime expired
</code></pre>
<h2 id="duplicate-address-detection-dad"><a class="header" href="#duplicate-address-detection-dad">Duplicate Address Detection (DAD)</a></h2>
<h3 id="dad-process"><a class="header" href="#dad-process">DAD Process</a></h3>
<pre><code>1. Set address as tentative
2. Join solicited-node multicast
3. Send NS with:
   - Source: ::
   - Destination: ff02::1:ffXX:XXXX
   - Target: Tentative address
4. Wait for response (default 1 second)
5. If no NA received → Address is unique
6. If NA received → DAD failed
</code></pre>
<h3 id="dad-example-packet-flow"><a class="header" href="#dad-example-packet-flow">DAD Example Packet Flow</a></h3>
<pre><code>Host → ff02::1:ff09:6d91: NS for 2001:db8:abc:0:c3b:84cd:dc09:6d91
(No response)
Host configures: 2001:db8:abc:0:c3b:84cd:dc09:6d91/64
</code></pre>
<h2 id="practical-examples-2"><a class="header" href="#practical-examples-2">Practical Examples</a></h2>
<h3 id="linux-address-configuration"><a class="header" href="#linux-address-configuration">Linux Address Configuration</a></h3>
<p><strong>View address generation methods:</strong></p>
<pre><code class="language-bash"># Check current settings
sysctl net.ipv6.conf.eth0.addr_gen_mode
# 0 = EUI-64
# 1 = Stable privacy
# 2 = Random

# Set stable privacy mode
sysctl -w net.ipv6.conf.eth0.addr_gen_mode=1

# Disable privacy extensions
sysctl -w net.ipv6.conf.eth0.use_tempaddr=0
</code></pre>
<p><strong>Monitor address generation:</strong></p>
<pre><code class="language-bash"># Watch addresses being configured
ip -6 monitor address

# Show all addresses with states
ip -6 addr show dev eth0
</code></pre>
<h3 id="mikrotik-address-configuration"><a class="header" href="#mikrotik-address-configuration">MikroTik Address Configuration</a></h3>
<pre><code class="language-mikrotik"># Configure interface for SLAAC
/ipv6 address
add interface=ether1 from-pool=dhcp-pool advertise=yes

# Set EUI-64 mode
/ipv6 settings
set addr-gen-mode=eui-64

# Enable/disable privacy addresses
/interface ethernet
set ether1 ipv6-address-generation-mode=stable-privacy
</code></pre>
<h2 id="address-generation-timeline"><a class="header" href="#address-generation-timeline">Address Generation Timeline</a></h2>
<pre><code>T+0s:   Interface UP
T+0s:   Generate fe80::xxxx:xxxx:xxxx:xxxx (link-local)
T+0-1s: DAD for link-local
T+1s:   Link-local address active
T+1s:   Send RS to ff02::2
T+1-2s: Receive RA with prefix 2001:db8:abc::/64
T+2s:   Generate 2001:db8:abc::xxxx:xxxx:xxxx:xxxx
T+2-3s: DAD for global address
T+3s:   Global address active
T+3s:   Generate temporary address (if enabled)
T+3-4s: DAD for temporary address
T+4s:   All addresses configured
</code></pre>
<h2 id="security-considerations-2"><a class="header" href="#security-considerations-2">Security Considerations</a></h2>
<h3 id="address-scanning-implications"><a class="header" href="#address-scanning-implications">Address Scanning Implications</a></h3>
<p><strong>EUI-64 addresses reveal:</strong></p>
<ul>
<li>MAC address (vendor identification)</li>
<li>Device tracking possibility</li>
<li>Predictable patterns</li>
</ul>
<p><strong>Privacy addresses provide:</strong></p>
<ul>
<li>No MAC correlation</li>
<li>Harder to scan/track</li>
<li>Changes over time</li>
</ul>
<h3 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h3>
<pre><code class="language-mikrotik"># Configure secure defaults
/ipv6 settings
set addr-gen-mode=stable-privacy
set accept-router-advertisements=yes-if-forwarding-disabled

# Limit address generation
/interface ethernet
set ether1 ipv6-nd-managed-address-config=no
set ether1 ipv6-nd-other-config=yes
</code></pre>
<h2 id="troubleshooting-address-generation"><a class="header" href="#troubleshooting-address-generation">Troubleshooting Address Generation</a></h2>
<h3 id="common-issues"><a class="header" href="#common-issues">Common Issues</a></h3>
<p><strong>No link-local address:</strong></p>
<pre><code class="language-bash"># Check IPv6 is enabled
sysctl net.ipv6.conf.eth0.disable_ipv6
# Should be 0

# Force regeneration
ip link set eth0 down
ip link set eth0 up
</code></pre>
<p><strong>No global address:</strong></p>
<pre><code class="language-bash"># Check for RAs
tcpdump -i eth0 -n icmp6 and ip6[40] == 134

# Check RA settings
rdisc6 eth0
</code></pre>
<p><strong>DAD failures:</strong></p>
<pre><code class="language-bash"># Check for duplicates
ip -6 neigh show | grep -i failed

# Monitor DAD process
tcpdump -i eth0 -n 'icmp6 and (ip6[40] == 135 or ip6[40] == 136)'
</code></pre>
<p><strong>Key Points:</strong></p>
<ul>
<li>Link-local is always generated first</li>
<li>Global addresses depend on Router Advertisements</li>
<li>Multiple addresses per interface are normal</li>
<li>Privacy addresses rotate periodically</li>
<li>Modern systems prefer stable-privacy over EUI-64</li>
<li>DAD ensures address uniqueness</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ipv6-neighbor-discovery-protocol-ndp"><a class="header" href="#ipv6-neighbor-discovery-protocol-ndp">IPv6 Neighbor Discovery Protocol (NDP)</a></h1>
<h2 id="overview-2"><a class="header" href="#overview-2">Overview</a></h2>
<p>NDP replaces ARP and provides additional functionality for IPv6 networks. It uses ICMPv6 messages (types 133-137) and operates over link-local scope.</p>
<h3 id="key-functions"><a class="header" href="#key-functions">Key Functions</a></h3>
<pre><code>1. Address Resolution (like ARP)
2. Router Discovery
3. Prefix Discovery
4. Parameter Discovery
5. Next-hop Determination
6. Neighbor Unreachability Detection (NUD)
7. Duplicate Address Detection (DAD)
8. Redirect
</code></pre>
<h2 id="ndp-message-types"><a class="header" href="#ndp-message-types">NDP Message Types</a></h2>
<h3 id="router-solicitation-rs---type-133"><a class="header" href="#router-solicitation-rs---type-133">Router Solicitation (RS) - Type 133</a></h3>
<pre><code>Purpose: Host requests router information
Source: Host's link-local or ::
Destination: ff02::2 (all-routers)
When: Boot up, interface up

Message Format:
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Type=133  |     Code=0    |          Checksum             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                            Reserved                           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Options: Source Link-Layer Address (if not from ::)        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</code></pre>
<h3 id="router-advertisement-ra---type-134"><a class="header" href="#router-advertisement-ra---type-134">Router Advertisement (RA) - Type 134</a></h3>
<pre><code>Purpose: Router announces presence and configuration
Source: Router's link-local
Destination: ff02::1 (all-nodes) or unicast response
When: Periodically or responding to RS

Message Format:
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Type=134  |     Code=0    |          Checksum             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Cur Hop Limit |M|O|H|Prf|Resvd|       Router Lifetime         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Reachable Time                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                          Retrans Timer                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Options: Prefix Info, MTU, Source Link-Layer Address        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

Flags:
M = Managed address configuration (DHCPv6 for address)
O = Other configuration (DHCPv6 for DNS, etc.)
H = Home Agent (Mobile IPv6)
Prf = Default Router Preference
</code></pre>
<h3 id="neighbor-solicitation-ns---type-135"><a class="header" href="#neighbor-solicitation-ns---type-135">Neighbor Solicitation (NS) - Type 135</a></h3>
<pre><code>Purpose: Address resolution, DAD, NUD
Source: Interface address or :: (for DAD)
Destination: Solicited-node multicast or unicast
When: Need MAC address, verify reachability

Message Format:
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Type=135  |     Code=0    |          Checksum             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           Reserved                            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                       Target Address                          +
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Options: Source Link-Layer Address (not for DAD)           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</code></pre>
<h3 id="neighbor-advertisement-na---type-136"><a class="header" href="#neighbor-advertisement-na---type-136">Neighbor Advertisement (NA) - Type 136</a></h3>
<pre><code>Purpose: Response to NS, announce address change
Source: Interface address
Destination: Solicited source or ff02::1
When: Responding to NS, proactive update

Message Format:
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Type=136  |     Code=0    |          Checksum             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|R|S|O|                     Reserved                            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                       Target Address                          +
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Options: Target Link-Layer Address                          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

Flags:
R = Router flag
S = Solicited flag
O = Override flag
</code></pre>
<h3 id="redirect---type-137"><a class="header" href="#redirect---type-137">Redirect - Type 137</a></h3>
<pre><code>Purpose: Inform host of better next-hop
Source: Router's link-local
Destination: Source of packet being redirected
When: Suboptimal routing detected

Includes:
- Target Address (better next-hop)
- Destination Address (ultimate destination)
</code></pre>
<h2 id="ndp-operations"><a class="header" href="#ndp-operations">NDP Operations</a></h2>
<h3 id="address-resolution-replacing-arp"><a class="header" href="#address-resolution-replacing-arp">Address Resolution (Replacing ARP)</a></h3>
<pre><code>Host A (2001:db8::1) wants to reach Host B (2001:db8::2)

1. Host A → ff02::1:ff00:2: NS
   Target: 2001:db8::2
   Source: 2001:db8::1
   Option: Source Link-Layer Address

2. Host B → 2001:db8::1: NA
   Target: 2001:db8::2
   Flags: S=1, O=1
   Option: Target Link-Layer Address

3. Host A caches the mapping
</code></pre>
<h3 id="duplicate-address-detection-dad-1"><a class="header" href="#duplicate-address-detection-dad-1">Duplicate Address Detection (DAD)</a></h3>
<pre><code>1. Address in tentative state
2. Host → ff02::1:ff00:X: NS
   Source: ::
   Target: Tentative address
   No options

3. Wait (default 1 second)
4. If no NA received → Address unique
5. If NA received → DAD failed
</code></pre>
<h3 id="neighbor-unreachability-detection-nud"><a class="header" href="#neighbor-unreachability-detection-nud">Neighbor Unreachability Detection (NUD)</a></h3>
<pre><code>States: REACHABLE → STALE → DELAY → PROBE → UNREACHABLE

1. Entry becomes STALE after timeout
2. When sending, enter DELAY (5 seconds)
3. If no confirmation, enter PROBE
4. Send unicast NS (3 attempts)
5. If no response → UNREACHABLE
</code></pre>
<h3 id="router-discovery-process"><a class="header" href="#router-discovery-process">Router Discovery Process</a></h3>
<pre><code>1. Host → ff02::2: RS
2. Router → ff02::1: RA
   - Prefix information
   - Router lifetime
   - Flags (M/O)
   - Options (MTU, DNS)
3. Host configures addresses
4. Host adds default route
</code></pre>
<h2 id="solicited-node-multicast"><a class="header" href="#solicited-node-multicast">Solicited-Node Multicast</a></h2>
<h3 id="address-format"><a class="header" href="#address-format">Address Format</a></h3>
<pre><code>ff02::1:ff00:0/104 + last 24 bits of IPv6 address

Example:
IPv6: 2001:db8::abc:def1
Solicited-node: ff02::1:ffbc:def1
</code></pre>
<h3 id="purpose"><a class="header" href="#purpose">Purpose</a></h3>
<ul>
<li>Efficient address resolution</li>
<li>Replaces broadcast in ARP</li>
<li>Only interested nodes process</li>
</ul>
<h2 id="ndp-options"><a class="header" href="#ndp-options">NDP Options</a></h2>
<h3 id="common-option-types"><a class="header" href="#common-option-types">Common Option Types</a></h3>
<pre><code>Type 1: Source Link-Layer Address
Type 2: Target Link-Layer Address
Type 3: Prefix Information
Type 5: MTU
Type 25: Recursive DNS Server
Type 31: DNS Search List
</code></pre>
<h3 id="prefix-information-option"><a class="header" href="#prefix-information-option">Prefix Information Option</a></h3>
<pre><code>+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Type=3    |    Length=4   | Prefix Length |L|A| Reserved1 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Valid Lifetime                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Preferred Lifetime                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           Reserved2                           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                            Prefix                             +
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

L = On-link flag
A = Autonomous address-configuration flag
</code></pre>
<h2 id="practical-examples-3"><a class="header" href="#practical-examples-3">Practical Examples</a></h2>
<h3 id="linux-ndp-commands"><a class="header" href="#linux-ndp-commands">Linux NDP Commands</a></h3>
<pre><code class="language-bash"># Show neighbor cache
ip -6 neigh show

# Show router list
ip -6 route show | grep default

# Send RS manually
rdisc6 eth0

# Send NS manually
ndisc6 2001:db8::1 eth0

# Monitor NDP traffic
tcpdump -i eth0 -n icmp6 and \
  '(ip6[40] == 133 or ip6[40] == 134 or ip6[40] == 135 or ip6[40] == 136)'
</code></pre>
<h3 id="mikrotik-ndp-configuration"><a class="header" href="#mikrotik-ndp-configuration">MikroTik NDP Configuration</a></h3>
<pre><code class="language-mikrotik"># View NDP status
/ipv6 neighbor print
/ipv6 route print where gateway-type=link

# Configure RA parameters
/ipv6 nd
set [ find interface=ether1 ] \
  advertise-dns=yes \
  advertise-mac-address=yes \
  managed-address-configuration=no \
  other-configuration=yes \
  ra-interval=30s-1m \
  ra-lifetime=30m

# Configure prefix advertisement
/ipv6 nd prefix
add interface=ether1 prefix=2001:db8::/64 \
  autonomous=yes \
  on-link=yes \
  preferred-lifetime=1w \
  valid-lifetime=4w
</code></pre>
<h2 id="security-considerations-3"><a class="header" href="#security-considerations-3">Security Considerations</a></h2>
<h3 id="ndp-vulnerabilities"><a class="header" href="#ndp-vulnerabilities">NDP Vulnerabilities</a></h3>
<p><strong>Attack vectors:</strong></p>
<ul>
<li>Rogue Router Advertisements</li>
<li>NS/NA spoofing</li>
<li>DAD denial of service</li>
<li>Redirect attacks</li>
<li>NDP exhaustion</li>
</ul>
<h3 id="mikrotik-ndp-security"><a class="header" href="#mikrotik-ndp-security">MikroTik NDP Security</a></h3>
<pre><code class="language-mikrotik"># RA Guard
/ipv6 firewall filter
add chain=input in-interface=ether2 \
  protocol=icmpv6 icmp-options=134:0 \
  action=drop comment="Block RA on client ports"

# Protect against NDP exhaustion
/ipv6 settings
set max-neighbor-entries=2048

# Strict source validation
/ipv6 firewall raw
add chain=prerouting in-interface=ether2 \
  src-address=!fe80::/10 protocol=icmpv6 \
  icmp-options=133:0-137:0 action=drop \
  comment="NDP must use link-local"

# Hop limit validation
add chain=prerouting protocol=icmpv6 \
  icmp-options=133:0-137:0 hop-limit=not-equal:255 \
  action=drop comment="NDP requires hop limit 255"
</code></pre>
<h2 id="ndp-vs-arp-comparison"><a class="header" href="#ndp-vs-arp-comparison">NDP vs ARP Comparison</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Feature</th><th>ARP (IPv4)</th><th>NDP (IPv6)</th></tr></thead><tbody>
<tr><td>Protocol</td><td>Separate</td><td>ICMPv6</td></tr>
<tr><td>Broadcast</td><td>Yes</td><td>No (multicast)</td></tr>
<tr><td>Router Discovery</td><td>No</td><td>Yes</td></tr>
<tr><td>Address Autoconfiguration</td><td>No</td><td>Yes</td></tr>
<tr><td>Neighbor Unreachability</td><td>No</td><td>Yes</td></tr>
<tr><td>Redirect</td><td>ICMP</td><td>Integrated</td></tr>
<tr><td>Security</td><td>Limited</td><td>SEND capable</td></tr>
</tbody></table>
</div>
<h2 id="troubleshooting-ndp"><a class="header" href="#troubleshooting-ndp">Troubleshooting NDP</a></h2>
<h3 id="common-issues-1"><a class="header" href="#common-issues-1">Common Issues</a></h3>
<p><strong>No Router Advertisements:</strong></p>
<pre><code class="language-bash"># Check RA receipt
rdisc6 -1 eth0

# Verify IPv6 forwarding on router
sysctl net.ipv6.conf.all.forwarding
</code></pre>
<p><strong>Address Resolution Failures:</strong></p>
<pre><code class="language-bash"># Clear neighbor cache
ip -6 neigh flush dev eth0

# Check multicast membership
ip -6 maddr show dev eth0
</code></pre>
<p><strong>DAD Failures:</strong></p>
<pre><code class="language-bash"># Check for conflicts
journalctl -u NetworkManager | grep "DAD"

# Disable DAD (testing only)
sysctl -w net.ipv6.conf.eth0.dad_transmits=0
</code></pre>
<p><strong>Key Points:</strong></p>
<ul>
<li>NDP is essential for IPv6 operation</li>
<li>Uses link-local addresses for all messages</li>
<li>Hop limit must be 255 (security)</li>
<li>Replaces multiple IPv4 protocols</li>
<li>Vulnerable without proper filtering</li>
<li>Multicast-based efficiency</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ipv6-subnetting-and-prefix-delegation"><a class="header" href="#ipv6-subnetting-and-prefix-delegation">IPv6 Subnetting and Prefix Delegation</a></h1>
<h2 id="ipv6-address-structure-review"><a class="header" href="#ipv6-address-structure-review">IPv6 Address Structure Review</a></h2>
<h3 id="standard-allocation-hierarchy"><a class="header" href="#standard-allocation-hierarchy">Standard Allocation Hierarchy</a></h3>
<pre><code>/32 → ISP allocation from RIR
/48 → Customer site assignment
/56 → Alternative for residential
/64 → Single subnet (LAN)
/128 → Host address

Example breakdown:
2001:db8:1234:5678::/64
└──┘ └─┘ └──┘ └──┘
 Global  Site  Subnet  Interface ID (64 bits)
 Prefix  (/48) (/64)
</code></pre>
<h2 id="subnetting-fundamentals"><a class="header" href="#subnetting-fundamentals">Subnetting Fundamentals</a></h2>
<h3 id="why-64-for-lans"><a class="header" href="#why-64-for-lans">Why /64 for LANs?</a></h3>
<pre><code>- SLAAC requires exactly 64 bits for Interface ID
- EUI-64 addressing expects 64-bit host portion
- Privacy extensions assume 64-bit space
- Neighbor Discovery optimized for /64
</code></pre>
<h3 id="planning-a-48-allocation"><a class="header" href="#planning-a-48-allocation">Planning a /48 Allocation</a></h3>
<pre><code>2001:db8:abcd::/48 provides:
- 65,536 possible /64 subnets (2^16)
- Subnet bits: 48 to 64 (16 bits)

Subnet examples:
2001:db8:abcd:0000::/64 → First subnet
2001:db8:abcd:0001::/64 → Second subnet
2001:db8:abcd:ffff::/64 → Last subnet
</code></pre>
<h3 id="hierarchical-design-example"><a class="header" href="#hierarchical-design-example">Hierarchical Design Example</a></h3>
<pre><code>2001:db8:abcd::/48 (Company allocation)
    │
    ├── 2001:db8:abcd:0000::/52 (Building A - 4096 subnets)
    │   ├── 2001:db8:abcd:0000::/64 (Floor 1 VLAN 10)
    │   ├── 2001:db8:abcd:0001::/64 (Floor 1 VLAN 20)
    │   └── 2001:db8:abcd:000f::/64 (Floor 1 VLAN 160)
    │
    ├── 2001:db8:abcd:1000::/52 (Building B - 4096 subnets)
    │
    └── 2001:db8:abcd:f000::/52 (Reserved/Future)
</code></pre>
<h2 id="subnet-calculation-methods"><a class="header" href="#subnet-calculation-methods">Subnet Calculation Methods</a></h2>
<h3 id="binary-method"><a class="header" href="#binary-method">Binary Method</a></h3>
<pre><code>Base prefix: 2001:db8:abcd::/48
Need: 8 subnets (requires 3 bits)

Binary:
0000 = 2001:db8:abcd:0000::/64
0001 = 2001:db8:abcd:0001::/64
0010 = 2001:db8:abcd:0002::/64
...
0111 = 2001:db8:abcd:0007::/64
</code></pre>
<h3 id="nibble-aligned-method-recommended"><a class="header" href="#nibble-aligned-method-recommended">Nibble-Aligned Method (Recommended)</a></h3>
<pre><code>Work on 4-bit boundaries for readability:

/48 to /52 = 1 hex digit (16 subnets)
/48 to /56 = 2 hex digits (256 subnets)  
/48 to /60 = 3 hex digits (4,096 subnets)

Example:
2001:db8:abcd:XY00::/56
Where X and Y are variable hex digits
</code></pre>
<h2 id="dhcpv6-prefix-delegation-pd"><a class="header" href="#dhcpv6-prefix-delegation-pd">DHCPv6 Prefix Delegation (PD)</a></h2>
<h3 id="how-dhcpv6-pd-works"><a class="header" href="#how-dhcpv6-pd-works">How DHCPv6-PD Works</a></h3>
<pre><code>ISP Router (Delegating Router)          Customer Router (Requesting Router)
    │                                              │
    │←────────── DHCPv6 Solicit ──────────────────│
    │            (IA_PD option)                    │
    │                                              │
    │─────────── DHCPv6 Advertise ────────────────→│
    │         (Available prefix)                   │
    │                                              │
    │←────────── DHCPv6 Request ──────────────────│
    │         (Request specific prefix)            │
    │                                              │
    │─────────── DHCPv6 Reply ────────────────────→│
    │         (Delegated: 2001:db8:1234::/56)     │
    │                                              │
    └──────────────────────────────────────────────┘
</code></pre>
<h3 id="dhcpv6-pd-message-flow"><a class="header" href="#dhcpv6-pd-message-flow">DHCPv6-PD Message Flow</a></h3>
<pre><code>1. CPE sends Solicit with IA_PD
2. ISP sends Advertise with available prefix
3. CPE sends Request for prefix
4. ISP sends Reply with delegated prefix
5. CPE subdivides prefix for local networks
</code></pre>
<h2 id="practical-configuration"><a class="header" href="#practical-configuration">Practical Configuration</a></h2>
<h3 id="mikrotik-as-dhcpv6-pd-client"><a class="header" href="#mikrotik-as-dhcpv6-pd-client">MikroTik as DHCPv6-PD Client</a></h3>
<pre><code class="language-mikrotik"># Configure DHCPv6 client to request prefix
/ipv6 dhcp-client
add interface=ether1-wan request=prefix pool-name=isp-pool \
    add-default-route=yes use-peer-dns=yes

# View received prefix
/ipv6 dhcp-client print detail

# Automatically assign /64s from pool
/ipv6 address
add interface=bridge-lan from-pool=isp-pool
add interface=guest-vlan from-pool=isp-pool
add interface=iot-vlan from-pool=isp-pool
</code></pre>
<h3 id="mikrotik-as-dhcpv6-pd-server"><a class="header" href="#mikrotik-as-dhcpv6-pd-server">MikroTik as DHCPv6-PD Server</a></h3>
<pre><code class="language-mikrotik"># Configure prefix pool for delegation
/ipv6 pool
add name=customer-pd prefix=2001:db8::/32 prefix-length=56

# Configure DHCPv6 server
/ipv6 dhcp-server
add name=pd-server interface=ether2-customers \
    address-pool=static-only

# Create binding for specific customer
/ipv6 dhcp-server binding
add address=2001:db8:abcd::/56 duid="00:03:00:01:aa:bb:cc:dd:ee:ff" \
    server=pd-server
</code></pre>
<h3 id="linux-dhcpv6-pd-configuration"><a class="header" href="#linux-dhcpv6-pd-configuration">Linux DHCPv6-PD Configuration</a></h3>
<p><strong>ISC DHCP Client (dhclient):</strong></p>
<pre><code class="language-bash"># /etc/dhcp/dhclient6.conf
interface "eth0" {
    send ia-pd 0;
}

id-assoc pd 0 {
    prefix-interface eth1 {
        sla-id 0;
        sla-len 8;  # /56 to /64
    };
    prefix-interface eth2 {
        sla-id 1;
        sla-len 8;
    };
};
</code></pre>
<p><strong>systemd-networkd:</strong></p>
<pre><code class="language-ini"># /etc/systemd/network/wan.network
[Network]
DHCP=yes
IPv6AcceptRA=yes

[DHCPv6]
PrefixDelegationHint=::/56

# /etc/systemd/network/lan.network
[Network]
IPv6SendRA=yes
DHCPv6PrefixDelegation=yes

[DHCPv6PrefixDelegation]
SubnetId=0x01
Token=::1
</code></pre>
<h2 id="subnet-planning-best-practices"><a class="header" href="#subnet-planning-best-practices">Subnet Planning Best Practices</a></h2>
<h3 id="enterprise-allocation-strategy"><a class="header" href="#enterprise-allocation-strategy">Enterprise Allocation Strategy</a></h3>
<pre><code>2001:db8::/32 (ISP Block)
    │
    ├── 2001:db8:0000::/36 (Region 1)
    │   ├── 2001:db8:0000::/40 (Country A)
    │   │   ├── 2001:db8:0000::/44 (City 1)
    │   │   │   └── 2001:db8:0000::/48 (Site 1)
    │   │   └── 2001:db8:0010::/44 (City 2)
    │   └── 2001:db8:0100::/40 (Country B)
    │
    └── 2001:db8:1000::/36 (Region 2)
</code></pre>
<h3 id="residential-planning-with-56"><a class="header" href="#residential-planning-with-56">Residential Planning with /56</a></h3>
<pre><code>2001:db8:abcd::/56 from ISP
    │
    ├── 2001:db8:abcd:00::/64 - Main LAN
    ├── 2001:db8:abcd:01::/64 - Guest Network
    ├── 2001:db8:abcd:02::/64 - IoT Devices
    ├── 2001:db8:abcd:03::/64 - Home Office
    └── 2001:db8:abcd:ff::/64 - Management
</code></pre>
<h3 id="vlan-based-subnetting"><a class="header" href="#vlan-based-subnetting">VLAN-Based Subnetting</a></h3>
<pre><code>Pattern: 2001:db8:abcd:VVVV::/64
Where VVVV = VLAN ID in hex

VLAN 10  → 2001:db8:abcd:000a::/64
VLAN 20  → 2001:db8:abcd:0014::/64
VLAN 100 → 2001:db8:abcd:0064::/64
VLAN 200 → 2001:db8:abcd:00c8::/64
</code></pre>
<h2 id="advanced-dhcpv6-pd-features"><a class="header" href="#advanced-dhcpv6-pd-features">Advanced DHCPv6-PD Features</a></h2>
<h3 id="prefix-stability-and-hints"><a class="header" href="#prefix-stability-and-hints">Prefix Stability and Hints</a></h3>
<pre><code class="language-mikrotik"># Request specific prefix (hint)
/ipv6 dhcp-client
add interface=ether1 request=prefix \
    prefix-hint=2001:db8:1234::/56

# Server honors hints when possible
/ipv6 dhcp-server binding
add address=2001:db8:1234::/56 \
    duid="00:03:00:01:aa:bb:cc:dd:ee:ff" \
    prefer-lifetime=1w life-time=4w
</code></pre>
<h3 id="cascaded-prefix-delegation"><a class="header" href="#cascaded-prefix-delegation">Cascaded Prefix Delegation</a></h3>
<pre><code>ISP → Customer CPE → Internal Routers

ISP delegates /48 → CPE
CPE delegates /56 → Dept Router A  
CPE delegates /56 → Dept Router B

Configuration:
/ipv6 pool
add name=downstream prefix-from-pool=isp-pool \
    prefix-length=56
</code></pre>
<h3 id="dynamic-prefix-handling"><a class="header" href="#dynamic-prefix-handling">Dynamic Prefix Handling</a></h3>
<pre><code class="language-mikrotik"># Script to handle prefix changes
/system script
add name=prefix-change source={
    :local newPrefix [/ipv6 dhcp-client get 0 prefix]
    :if ($newPrefix != $oldPrefix) do={
        # Update DNS records
        # Update firewall rules
        # Notify monitoring system
    }
}

# Trigger on prefix change
/ipv6 dhcp-client
set 0 script=prefix-change
</code></pre>
<h2 id="troubleshooting-1"><a class="header" href="#troubleshooting-1">Troubleshooting</a></h2>
<h3 id="common-subnetting-mistakes"><a class="header" href="#common-subnetting-mistakes">Common Subnetting Mistakes</a></h3>
<p><strong>Wrong subnet size:</strong></p>
<pre><code class="language-bash"># Check actual prefix length
ip -6 addr show | grep "scope global"

# Verify SLAAC is working
rdisc6 -1 eth0 | grep "Prefix"
</code></pre>
<p><strong>Overlapping subnets:</strong></p>
<pre><code class="language-mikrotik"># Audit configuration
/ipv6 address print
/ipv6 route print where dst-address~"2001:db8"
</code></pre>
<h3 id="dhcpv6-pd-issues"><a class="header" href="#dhcpv6-pd-issues">DHCPv6-PD Issues</a></h3>
<p><strong>No prefix received:</strong></p>
<pre><code class="language-bash"># Enable DHCPv6 debugging
dhclient -6 -d -v eth0

# Check tcpdump
tcpdump -i eth0 -n port 546 or port 547
</code></pre>
<p><strong>Prefix not subdivided:</strong></p>
<pre><code class="language-mikrotik"># Check pool status
/ipv6 pool print detail
/ipv6 pool used print

# Verify address assignment
/ipv6 address print where from-pool!=none
</code></pre>
<h2 id="security-considerations-4"><a class="header" href="#security-considerations-4">Security Considerations</a></h2>
<h3 id="prefix-delegation-security"><a class="header" href="#prefix-delegation-security">Prefix Delegation Security</a></h3>
<pre><code class="language-mikrotik"># Secure DHCPv6-PD server
/ipv6 firewall filter
add chain=input protocol=udp dst-port=547 \
    src-address=fe80::/10 action=accept \
    comment="DHCPv6 from link-local only"

# Rate limit DHCPv6
add chain=input protocol=udp dst-port=547 \
    limit=10,5:packet action=accept
add chain=input protocol=udp dst-port=547 \
    action=drop

# Validate DUID bindings
/ipv6 dhcp-server
set 0 authoritative=yes address-pool=static-only
</code></pre>
<h3 id="subnet-isolation"><a class="header" href="#subnet-isolation">Subnet Isolation</a></h3>
<pre><code class="language-mikrotik"># Prevent inter-subnet routing
/ipv6 firewall filter
add chain=forward src-address=2001:db8:abcd:1::/64 \
    dst-address=2001:db8:abcd:2::/64 \
    action=drop comment="Isolate VLAN1 from VLAN2"
</code></pre>
<h2 id="best-practices-summary"><a class="header" href="#best-practices-summary">Best Practices Summary</a></h2>
<h3 id="do"><a class="header" href="#do">DO:</a></h3>
<ul>
<li>Use nibble boundaries (/48, /52, /56, /60, /64)</li>
<li>Plan for growth (sparse allocation)</li>
<li>Document allocation scheme</li>
<li>Use /64 for all end-user LANs</li>
<li>Implement prefix stability for DHCPv6-PD</li>
<li>Monitor prefix utilization</li>
</ul>
<h3 id="dont"><a class="header" href="#dont">DON'T:</a></h3>
<ul>
<li>Use prefixes longer than /64 for SLAAC</li>
<li>Assign sequentially (use sparse allocation)</li>
<li>Forget reverse DNS delegation</li>
<li>Mix allocation sizes unnecessarily</li>
<li>Hardcode prefixes in applications</li>
</ul>
<p><strong>Key Points:</strong></p>
<ul>
<li>IPv6 makes subnetting simpler (no variable masks)</li>
<li>Always use /64 for host subnets</li>
<li>DHCPv6-PD automates prefix distribution</li>
<li>Plan hierarchically for scalability</li>
<li>Nibble-aligned boundaries improve readability</li>
<li>Prefix delegation enables dynamic networks</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ipv6-routing-protocols-and-route-selection"><a class="header" href="#ipv6-routing-protocols-and-route-selection">IPv6 Routing Protocols and Route Selection</a></h1>
<h2 id="ipv6-routing-overview"><a class="header" href="#ipv6-routing-overview">IPv6 Routing Overview</a></h2>
<h3 id="route-types-in-ipv6"><a class="header" href="#route-types-in-ipv6">Route Types in IPv6</a></h3>
<pre><code>Connected Routes (C) → Directly attached networks
Static Routes (S) → Manually configured
Dynamic Routes → Learned via routing protocols
  - OSPFv3 (O)
  - BGP (B)
  - RIPng (R)
  - EIGRP for IPv6 (D)
  - IS-IS for IPv6 (i)
</code></pre>
<h2 id="static-routing"><a class="header" href="#static-routing">Static Routing</a></h2>
<h3 id="basic-static-routes"><a class="header" href="#basic-static-routes">Basic Static Routes</a></h3>
<pre><code class="language-mikrotik"># Default route
/ipv6 route
add dst-address=::/0 gateway=2001:db8::1

# Network route via global address
add dst-address=2001:db8:cafe::/48 gateway=2001:db8:abcd::2

# Route via link-local (requires interface)
add dst-address=2001:db8:beef::/48 gateway=fe80::1%ether1

# Blackhole route
add dst-address=2001:db8:dead::/48 type=blackhole

# Route with metric
add dst-address=2001:db8:food::/48 gateway=2001:db8:abcd::3 distance=150
</code></pre>
<h3 id="floating-static-routes"><a class="header" href="#floating-static-routes">Floating Static Routes</a></h3>
<pre><code class="language-mikrotik"># Primary route
add dst-address=2001:db8::/32 gateway=2001:db8:1::1 distance=10

# Backup route (higher distance)
add dst-address=2001:db8::/32 gateway=2001:db8:2::1 distance=20

# Check active routes
/ipv6 route print where dst-address="2001:db8::/32" and active
</code></pre>
<h2 id="ospfv3-configuration"><a class="header" href="#ospfv3-configuration">OSPFv3 Configuration</a></h2>
<h3 id="ospfv3-vs-ospfv2-differences"><a class="header" href="#ospfv3-vs-ospfv2-differences">OSPFv3 vs OSPFv2 Differences</a></h3>
<pre><code>- Runs directly over IPv6
- Router ID still 32-bit (usually IPv4 format)
- Link-local addresses for neighbor adjacencies
- Multiple instances per interface
- Authentication via IPsec
</code></pre>
<h3 id="mikrotik-ospfv3-setup"><a class="header" href="#mikrotik-ospfv3-setup">MikroTik OSPFv3 Setup</a></h3>
<pre><code class="language-mikrotik"># Create OSPFv3 instance
/routing ospf-v3 instance
add name=default router-id=1.1.1.1

# Configure areas
/routing ospf-v3 area
add name=backbone area-id=0.0.0.0 instance=default
add name=area1 area-id=0.0.0.1 instance=default type=nssa

# Configure interfaces
/routing ospf-v3 interface
add area=backbone interface=ether1 network-type=broadcast
add area=area1 interface=ether2 network-type=point-to-point

# Advertise networks
/ipv6 address
add address=2001:db8:1::1/64 interface=ether1 advertise=yes
add address=2001:db8:2::1/64 interface=ether2 advertise=yes

# Redistribution
/routing ospf-v3 instance
set default redistribute-connected=as-type-1 \
    redistribute-static=as-type-2
</code></pre>
<h3 id="ospfv3-network-types"><a class="header" href="#ospfv3-network-types">OSPFv3 Network Types</a></h3>
<pre><code class="language-mikrotik"># Point-to-point (no DR/BDR)
/routing ospf-v3 interface
add area=backbone interface=ether1 network-type=point-to-point

# Broadcast (elects DR/BDR)
add area=backbone interface=ether2 network-type=broadcast \
    priority=100 cost=10

# NBMA (manual neighbors)
add area=backbone interface=ether3 network-type=nbma

/routing ospf-v3 neighbor
add address=fe80::2%ether3 poll-interval=30s

# Point-to-multipoint
add area=backbone interface=ether4 network-type=point-to-multipoint
</code></pre>
<h3 id="ospfv3-troubleshooting"><a class="header" href="#ospfv3-troubleshooting">OSPFv3 Troubleshooting</a></h3>
<pre><code class="language-mikrotik"># Show neighbors
/routing ospf-v3 neighbor print

# Show database
/routing ospf-v3 lsa print detail

# Monitor state changes
/log print where topics~"ospf"

# Debug OSPFv3
/system logging
add topics=ospf,!raw action=memory
</code></pre>
<h2 id="bgp-for-ipv6"><a class="header" href="#bgp-for-ipv6">BGP for IPv6</a></h2>
<h3 id="bgp-configuration-types"><a class="header" href="#bgp-configuration-types">BGP Configuration Types</a></h3>
<p><strong>1. Dual-Stack BGP Session (Preferred)</strong></p>
<pre><code class="language-mikrotik">/routing bgp connection
add name=peer1 remote.address=192.0.2.1 remote.as=65001 \
    local.role=ebgp address-families=ip,ipv6

# Single session carries both IPv4 and IPv6 prefixes
</code></pre>
<p><strong>2. IPv6-Only BGP Session</strong></p>
<pre><code class="language-mikrotik">/routing bgp connection
add name=peer2-v6 remote.address=2001:db8::1 remote.as=65002 \
    local.role=ebgp address-families=ipv6 \
    local.address=2001:db8::2
</code></pre>
<h3 id="complete-bgp-ipv6-setup"><a class="header" href="#complete-bgp-ipv6-setup">Complete BGP IPv6 Setup</a></h3>
<pre><code class="language-mikrotik"># BGP instance
/routing bgp template
add name=default as=65100 router-id=10.0.0.1

# IPv6 peer configuration
/routing bgp connection
add name=upstream-v6 \
    remote.address=2001:db8:ffff::1 \
    remote.as=65000 \
    local.role=ebgp \
    templates=default \
    address-families=ipv6 \
    multihop=yes \
    ttl=2

# Network advertisement
/routing bgp network
add network=2001:db8:1000::/36 synchronize=no

# Prefix lists for filtering
/routing filter community-list
add name=my-communities list=65100:100,65100:200

/routing filter rule
add chain=bgp-in-v6 \
    rule="if (dst-len &gt; 48) { reject; }"

add chain=bgp-out-v6 \
    rule="if (dst in 2001:db8:1000::/36) { 
        set bgp-communities=65100:100; 
        accept; 
    }"

# Apply filters
/routing bgp connection
set upstream-v6 input.filter=bgp-in-v6 output.filter=bgp-out-v6
</code></pre>
<h3 id="bgp-path-selection-for-ipv6"><a class="header" href="#bgp-path-selection-for-ipv6">BGP Path Selection for IPv6</a></h3>
<pre><code>BGP Decision Process (same as IPv4):
1. Highest Weight (Cisco-specific)
2. Highest LOCAL_PREF
3. Locally originated
4. Shortest AS_PATH
5. Lowest ORIGIN (IGP &lt; EGP &lt; Incomplete)
6. Lowest MED
7. eBGP over iBGP
8. Lowest IGP metric to next-hop
9. Oldest route
10. Lowest Router ID
11. Lowest peer IP
</code></pre>
<h3 id="bgp-multihoming-example"><a class="header" href="#bgp-multihoming-example">BGP Multihoming Example</a></h3>
<pre><code class="language-mikrotik"># Two upstream providers
/routing bgp connection
add name=isp1-v6 remote.address=2001:db8:isp1::1 remote.as=65001 \
    local.role=ebgp address-families=ipv6

add name=isp2-v6 remote.address=2001:db8:isp2::1 remote.as=65002 \
    local.role=ebgp address-families=ipv6

# Prefer ISP1 for outbound
/routing filter rule
add chain=bgp-in-isp1-v6 \
    rule="set bgp-local-pref=150; accept;"

add chain=bgp-in-isp2-v6 \
    rule="set bgp-local-pref=100; accept;"

# Influence inbound via AS-PATH prepending
add chain=bgp-out-isp2-v6 \
    rule="if (dst in 2001:db8:1000::/36) {
        set bgp-path-prepend=3;
        accept;
    }"
</code></pre>
<h2 id="route-selection-and-metrics"><a class="header" href="#route-selection-and-metrics">Route Selection and Metrics</a></h2>
<h3 id="administrative-distance-defaults"><a class="header" href="#administrative-distance-defaults">Administrative Distance Defaults</a></h3>
<pre><code>Connected:        0
Static:           1
eBGP:            20
OSPF:           110
RIP:            120
iBGP:           200

# View in MikroTik
/ipv6 route print detail
</code></pre>
<h3 id="route-selection-example"><a class="header" href="#route-selection-example">Route Selection Example</a></h3>
<pre><code class="language-mikrotik"># Multiple routes to same destination
/ipv6 route print where dst-address="2001:db8::/32"
Flags: X - disabled, A - active, D - dynamic,
C - connect, S - static, r - rip, b - bgp, o - ospf
 #  DST-ADDRESS           GATEWAY          DISTANCE
 0  ADb 2001:db8::/32    fe80::1%ether1   20
 1   Db 2001:db8::/32    fe80::2%ether2   20
 2   S  2001:db8::/32    2001:db8:ff::1   150
 3   Do 2001:db8::/32    fe80::3%ether3   110

# Active route: BGP (lowest distance among active)
</code></pre>
<h3 id="ecmp-equal-cost-multi-path"><a class="header" href="#ecmp-equal-cost-multi-path">ECMP (Equal Cost Multi-Path)</a></h3>
<pre><code class="language-mikrotik"># Enable ECMP for BGP
/routing bgp template
set default multipath=yes

# Multiple equal-cost routes active
/ipv6 route print where dst-address="2001:db8::/32" and active
</code></pre>
<h2 id="route-redistribution"><a class="header" href="#route-redistribution">Route Redistribution</a></h2>
<h3 id="ospfv3-to-bgp"><a class="header" href="#ospfv3-to-bgp">OSPFv3 to BGP</a></h3>
<pre><code class="language-mikrotik">/routing filter rule
add chain=ospf-to-bgp \
    rule="if (protocol ospf &amp;&amp; dst-len &gt;= 48) { 
        set bgp-med=100; 
        accept; 
    }"

/routing bgp connection
set upstream-v6 output.redistribute=ospf
</code></pre>
<h3 id="static-to-ospf"><a class="header" href="#static-to-ospf">Static to OSPF</a></h3>
<pre><code class="language-mikrotik">/routing filter rule
add chain=static-to-ospf \
    rule="if (protocol static) { 
        set ospf-metric=1000; 
        set ospf-type=type-2; 
        accept; 
    }"

/routing ospf-v3 instance
set default redistribute-static=yes out-filter=static-to-ospf
</code></pre>
<h2 id="advanced-routing-features"><a class="header" href="#advanced-routing-features">Advanced Routing Features</a></h2>
<h3 id="ipv6-policy-based-routing"><a class="header" href="#ipv6-policy-based-routing">IPv6 Policy-Based Routing</a></h3>
<pre><code class="language-mikrotik"># Mark traffic for different routing tables
/ipv6 firewall mangle
add chain=prerouting src-address=2001:db8:100::/64 \
    action=mark-routing new-routing-mark=table-isp1

add chain=prerouting src-address=2001:db8:200::/64 \
    action=mark-routing new-routing-mark=table-isp2

# Create routing tables
/ipv6 route
add dst-address=::/0 gateway=2001:db8:isp1::1 \
    routing-table=table-isp1
add dst-address=::/0 gateway=2001:db8:isp2::1 \
    routing-table=table-isp2
</code></pre>
<h3 id="route-aggregation"><a class="header" href="#route-aggregation">Route Aggregation</a></h3>
<pre><code class="language-mikrotik"># Aggregate multiple /48s into /32
/ipv6 route
add dst-address=2001:db8::/32 type=blackhole

/routing filter rule
add chain=bgp-out \
    rule="if (dst in 2001:db8::/32 &amp;&amp; dst-len == 32) { 
        accept; 
    }"
add chain=bgp-out \
    rule="if (dst in 2001:db8::/32 &amp;&amp; dst-len &gt; 32) { 
        reject; 
    }"
</code></pre>
<h3 id="bfd-for-fast-convergence"><a class="header" href="#bfd-for-fast-convergence">BFD for Fast Convergence</a></h3>
<pre><code class="language-mikrotik"># Enable BFD for OSPF
/routing bfd configuration
add disabled=no interfaces=all min-rx=100ms min-tx=100ms

/routing ospf-v3 interface
set [find] use-bfd=yes

# Enable BFD for BGP
/routing bgp connection
set upstream-v6 use-bfd=yes
</code></pre>
<h2 id="troubleshooting-ipv6-routing"><a class="header" href="#troubleshooting-ipv6-routing">Troubleshooting IPv6 Routing</a></h2>
<h3 id="common-commands"><a class="header" href="#common-commands">Common Commands</a></h3>
<pre><code class="language-mikrotik"># Show routing table
/ipv6 route print detail

# Show specific route
/ipv6 route print where dst-address="2001:db8::/32"

# Trace route path
/tool traceroute 2001:db8:remote::1

# Check next-hop reachability
/ipv6 neighbor print
/ping 2001:db8:next::hop count=3

# Monitor routing changes
/log print where topics~"route"
</code></pre>
<h3 id="route-debugging"><a class="header" href="#route-debugging">Route Debugging</a></h3>
<pre><code class="language-mikrotik"># Enable route debugging
/system logging
add topics=route,bgp,ospf action=memory

# BGP-specific debugging
/routing bgp connection
set upstream-v6 output.log=yes input.log=yes

# OSPF-specific debugging
/routing ospf-v3 instance
set default log-adjacency-changes=yes
</code></pre>
<h2 id="best-practices-1"><a class="header" href="#best-practices-1">Best Practices</a></h2>
<h3 id="general-routing"><a class="header" href="#general-routing">General Routing</a></h3>
<ul>
<li>Use link-local next-hops where possible</li>
<li>Implement prefix filtering (max /48 for global)</li>
<li>Configure BFD for faster convergence</li>
<li>Use route aggregation to reduce table size</li>
<li>Document routing policy</li>
</ul>
<h3 id="bgp-specific"><a class="header" href="#bgp-specific">BGP Specific</a></h3>
<ul>
<li>Filter long prefixes (&gt;48 bits)</li>
<li>Use prefix-lists, not access-lists</li>
<li>Implement max-prefix limits</li>
<li>Configure route dampening carefully</li>
<li>Always filter customer routes</li>
</ul>
<h3 id="ospf-specific"><a class="header" href="#ospf-specific">OSPF Specific</a></h3>
<ul>
<li>Use areas to reduce flooding</li>
<li>Configure stub areas where appropriate</li>
<li>Set reference bandwidth for cost calculation</li>
<li>Use authentication (IPsec for OSPFv3)</li>
<li>Minimize type-5 LSAs</li>
</ul>
<p><strong>Key Points:</strong></p>
<ul>
<li>IPv6 routing protocols similar to IPv4 versions</li>
<li>Link-local addresses commonly used as next-hops</li>
<li>Route selection follows same preference rules</li>
<li>Proper filtering critical for Internet routing</li>
<li>Monitor and tune for optimal convergence</li>
<li>Plan for growth and redundancy</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
